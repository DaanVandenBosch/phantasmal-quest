!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),r=e[t[0]];return function(e,t,i){r.apply(this,[e,t,i].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){n(107),e.exports=n(94)},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],l=0;c=new Error(t.replace(/%s/g,function(){return u[l++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}e.exports=r},function(e,t,n){"use strict";var r=n(7),i=r;e.exports=i},function(e,t){"use strict";function n(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var i=new Error(n);throw i.name="Invariant Violation",i.framesToPop=1,i}e.exports=n},function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}var i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,t){for(var r,a,s=n(e),c=1;c<arguments.length;c++){r=Object(arguments[c]);for(var u in r)i.call(r,u)&&(s[u]=r[u]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(r);for(var l=0;l<a.length;l++)o.call(r,a[l])&&(s[a[l]]=r[a[l]])}}return s}},function(e,t,n){"use strict";function r(e){for(var t;t=e._renderedComponent;)e=t;return e}function i(e,t){var n=r(e);n._hostNode=t,t[m]=n}function o(e){var t=e._hostNode;t&&(delete t[m],e._hostNode=null)}function a(e,t){if(!(e._flags&f.hasCachedChildNodes)){var n=e._renderedChildren,o=t.firstChild;e:for(var a in n)if(n.hasOwnProperty(a)){var s=n[a],c=r(s)._domID;if(0!==c){for(;null!==o;o=o.nextSibling)if(1===o.nodeType&&o.getAttribute(d)===String(c)||8===o.nodeType&&o.nodeValue===" react-text: "+c+" "||8===o.nodeType&&o.nodeValue===" react-empty: "+c+" "){i(s,o);continue e}l("32",c)}}e._flags|=f.hasCachedChildNodes}}function s(e){if(e[m])return e[m];for(var t=[];!e[m];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}for(var n,r;e&&(r=e[m]);e=t.pop())n=r,t.length&&a(r,e);return n}function c(e){var t=s(e);return null!=t&&t._hostNode===e?t:null}function u(e){if(void 0===e._hostNode?l("33"):void 0,e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent?void 0:l("34"),e=e._hostParent;for(;t.length;e=t.pop())a(e,e._hostNode);return e._hostNode}var l=n(3),h=n(16),p=n(68),d=(n(1),h.ID_ATTRIBUTE_NAME),f=p,m="__reactInternalInstance$"+Math.random().toString(36).slice(2),v={getClosestInstanceFromNode:s,getInstanceFromNode:c,getNodeFromInstance:u,precacheChildNodes:a,precacheNode:i,uncacheNode:o};e.exports=v},function(e,t){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};e.exports=r},function(e,t){"use strict";function n(e){return function(){return e}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){"use strict";var r=null;e.exports={debugTool:r}},function(e,t,n){"use strict";function r(){R.ReactReconcileTransaction&&w?void 0:l("123")}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=p.getPooled(),this.reconcileTransaction=R.ReactReconcileTransaction.getPooled(!0)}function o(e,t,n,i,o,a){return r(),w.batchedUpdates(e,t,n,i,o,a)}function a(e,t){return e._mountOrder-t._mountOrder}function s(e){var t=e.dirtyComponentsLength;t!==g.length?l("124",t,g.length):void 0,g.sort(a),y++;for(var n=0;n<t;n++){var r=g[n],i=r._pendingCallbacks;r._pendingCallbacks=null;var o;if(f.logTopLevelRenders){var s=r;r._currentElement.type.isReactTopLevelWrapper&&(s=r._renderedComponent),o="React update: "+s.getName(),console.time(o)}if(m.performUpdateIfNecessary(r,e.reconcileTransaction,y),o&&console.timeEnd(o),i)for(var c=0;c<i.length;c++)e.callbackQueue.enqueue(i[c],r.getPublicInstance())}}function c(e){return r(),w.isBatchingUpdates?(g.push(e),void(null==e._updateBatchNumber&&(e._updateBatchNumber=y+1))):void w.batchedUpdates(c,e)}function u(e,t){w.isBatchingUpdates?void 0:l("125"),b.enqueue(e,t),_=!0}var l=n(3),h=n(4),p=n(66),d=n(13),f=n(71),m=n(17),v=n(31),g=(n(1),[]),y=0,b=p.getPooled(),_=!1,w=null,x={initialize:function(){this.dirtyComponentsLength=g.length},close:function(){this.dirtyComponentsLength!==g.length?(g.splice(0,this.dirtyComponentsLength),M()):g.length=0}},T={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},E=[x,T];h(i.prototype,v,{getTransactionWrappers:function(){return E},destructor:function(){this.dirtyComponentsLength=null,p.release(this.callbackQueue),this.callbackQueue=null,R.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return v.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),d.addPoolingTo(i);var M=function(){for(;g.length||_;){if(g.length){var e=i.getPooled();e.perform(s,null,e),i.release(e)}if(_){_=!1;var t=b;b=p.getPooled(),t.notifyAll(),p.release(t)}}},S={injectReconcileTransaction:function(e){e?void 0:l("126"),R.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e?void 0:l("127"),"function"!=typeof e.batchedUpdates?l("128"):void 0,"boolean"!=typeof e.isBatchingUpdates?l("129"):void 0,w=e}},R={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:c,flushBatchedUpdates:M,injection:S,asap:u};e.exports=R},function(e,t,n){"use strict";function r(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var i=this.constructor.Interface;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];s?this[o]=s(n):"target"===o?this.target=r:this[o]=n[o]}var c=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;return c?this.isDefaultPrevented=a.thatReturnsTrue:this.isDefaultPrevented=a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse,this}var i=n(4),o=n(13),a=n(7),s=(n(2),"function"==typeof Proxy,["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),c={type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};i(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;for(var n=0;n<s.length;n++)this[s[n]]=null}}),r.Interface=c,r.augmentClass=function(e,t){var n=this,r=function(){};r.prototype=n.prototype;var a=new r;i(a,e.prototype),e.prototype=a,e.prototype.constructor=e,e.Interface=i({},n.Interface,t),e.augmentClass=n.augmentClass,o.addPoolingTo(e,o.fourArgumentPooler)},o.addPoolingTo(r,o.fourArgumentPooler),e.exports=r},function(e,t){"use strict";var n={current:null};e.exports=n},function(e,t,n){"use strict";function r(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n,r,i){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(t,"__esModule",{value:!0}),t.Section=t.AreaVariant=t.Area=t.QuestNpc=t.QuestObject=t.Quest=t.ObjectType=t.NpcType=void 0;var a,s,c,u,l,h,p,d,f,m,v,g,y,b,_,w,x,T,E,M,S=n(92);Object.defineProperty(t,"NpcType",{enumerable:!0,get:function(){return S.NpcType}});var R=n(93);Object.defineProperty(t,"ObjectType",{enumerable:!0,get:function(){return R.ObjectType}});var C=(n(27),n(28)),A=n(35);t.Quest=(a=function e(t,n,o,a,f,m,v){if(i(this,e),r(this,"name",s,this),r(this,"short_description",c,this),r(this,"long_description",u,this),r(this,"episode",l,this),r(this,"area_variants",h,this),r(this,"objects",p,this),r(this,"npcs",d,this),1!==a&&2!==a&&4!==a)throw new Error("episode should be 1, 2 or 4.");if(!m)throw new Error("objs is required.");if(!v)throw new Error("npcs is required.");this.name=t,this.short_description=n,this.long_description=o,this.episode=a,this.area_variants=f,this.objects=m,this.npcs=v},s=o(a.prototype,"name",[C.observable],{enumerable:!0,initializer:null}),c=o(a.prototype,"short_description",[C.observable],{enumerable:!0,initializer:null}),u=o(a.prototype,"long_description",[C.observable],{enumerable:!0,initializer:null}),l=o(a.prototype,"episode",[C.observable],{enumerable:!0,initializer:null}),h=o(a.prototype,"area_variants",[C.observable],{enumerable:!0,initializer:null}),p=o(a.prototype,"objects",[C.observable],{enumerable:!0,initializer:null}),d=o(a.prototype,"npcs",[C.observable],{enumerable:!0,initializer:null}),a),t.QuestObject=(f=function e(t,n,o,a){if(i(this,e),r(this,"area_id",m,this),r(this,"section_id",v,this),r(this,"position",g,this),r(this,"type",y,this),!(0,A.is_int)(t)||t<0)throw new Error("Expected area_id to be a non-negative integer, got "+t+".");if(!(0,A.is_int)(n)||n<0)throw new Error("Expected section_id to be a non-negative integer, got "+n+".");if(!o)throw new Error("position is required.");if(!a)throw new Error("type is required.");this.area_id=t,this.section_id=n,this.position=o,this.type=a},m=o(f.prototype,"area_id",[C.observable],{enumerable:!0,initializer:null}),v=o(f.prototype,"section_id",[C.observable],{enumerable:!0,initializer:null}),g=o(f.prototype,"position",[C.observable],{enumerable:!0,initializer:null}),y=o(f.prototype,"type",[C.observable],{enumerable:!0,initializer:null}),f),t.QuestNpc=(b=function e(t,n,o,a){if(i(this,e),r(this,"area_id",_,this),r(this,"section_id",w,this),r(this,"position",x,this),r(this,"type",T,this),!(0,A.is_int)(t)||t<0)throw new Error("Expected area_id to be a non-negative integer, got "+t+".");if(!(0,A.is_int)(n)||n<0)throw new Error("Expected section_id to be a non-negative integer, got "+n+".");if(!o)throw new Error("position is required.");if(!a)throw new Error("type is required.");this.area_id=t,this.section_id=n,this.position=o,this.type=a},_=o(b.prototype,"area_id",[C.observable],{enumerable:!0,initializer:null}),w=o(b.prototype,"section_id",[C.observable],{enumerable:!0,initializer:null}),x=o(b.prototype,"position",[C.observable],{enumerable:!0,initializer:null}),T=o(b.prototype,"type",[C.observable],{enumerable:!0,initializer:null}),b),t.Area=function e(t,n,r,o){if(i(this,e),!(0,A.is_int)(t)||t<0)throw new Error("Expected id to be a non-negative integer, got "+t+".");if(!n)throw new Error("name is required.");if(!o)throw new Error("area_variants is required.");this.id=t,this.name=n,this.order=r,this.area_variants=o},t.AreaVariant=(E=function e(t){if(i(this,e),this.area=null,r(this,"sections",M,this),!(0,A.is_int)(t)||t<0)throw new Error("Expected id to be a non-negative integer, got "+t+".");this.id=t},M=o(E.prototype,"sections",[C.observable],{enumerable:!0,initializer:function(){return[]}}),E),t.Section=function e(t,n,r){if(i(this,e),!(0,A.is_int)(t)||t<-1)throw new Error("Expected id to be an integer greater than or equal to -1, got "+t+".");if(!n)throw new Error("position is required.");if(3!==n.length)throw new Error("position should have 3 elements.");if("number"!=typeof r)throw new Error("y_axis_rotation is required.");this.id=t,this.position=n,this.y_axis_rotation=r}},[201,3],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=new TextDecoder("ascii"),o=new TextDecoder("utf-16be"),a=new TextDecoder("utf-16le");t.ArrayBufferCursor=function(){function e(t,r){n(this,e),"number"==typeof t?(this._buffer=new ArrayBuffer(t),this.size=0):(this._buffer=t,this.size=this._buffer.byteLength),this.little_endian=r,this.position=0,this._dv=new DataView(this._buffer),this._utf_16_decoder=r?a:o}return r(e,[{key:"seek",value:function(e){return this.seek_start(this.position+e)}},{key:"seek_start",value:function(e){if(e<0||e>this.size)throw new Error("Offset "+e+" is out of bounds.");return this.position=e,this}},{key:"seek_end",value:function(e){if(e<0||e>this.size)throw new Error("Offset "+e+" is out of bounds.");return this.position=this.size-e,this}},{key:"u8",value:function(){return this._dv.getUint8(this.position++)}},{key:"u16",value:function(){var e=this._dv.getUint16(this.position,this.little_endian);return this.position+=2,e}},{key:"u32",value:function(){var e=this._dv.getUint32(this.position,this.little_endian);return this.position+=4,e}},{key:"i32",value:function(){var e=this._dv.getInt32(this.position,this.little_endian);return this.position+=4,e}},{key:"f32",value:function(){var e=this._dv.getFloat32(this.position,this.little_endian);return this.position+=4,e}},{key:"take",value:function(t){if(t<0||t>this.size-this.position)throw new Error("Size "+t+" out of bounds.");return this.position+=t,new e(this._buffer.slice(this.position-t,this.position),this.little_endian)}},{key:"string_ascii",value:function(e,t,n){var r=t?this._index_of_u8(0,e):this.position+e,o=i.decode(this._buffer.slice(this.position,r));return this.position=n?this.position+e:r,o}},{key:"string_utf_16",value:function(e,t,n){var r=t?this._index_of_u16(0,e):2*Math.floor((this.position+e)/2),i=this._utf_16_decoder.decode(this._buffer.slice(this.position,r));return this.position=n?this.position+e:r,i}},{key:"write_u8",value:function(e){return this._ensure_capacity(this.position+1),this._dv.setUint8(this.position++,e),this.position>this.size&&(this.size=this.position),this}},{key:"write_cursor",value:function(e){return this._ensure_capacity(this.position+e.size),new Uint8Array(this._buffer,this.position).set(new Uint8Array(e.buffer)),this.position+=e.size,this.position>this.size&&(this.size=this.position),this}},{key:"_index_of_u8",value:function(e,t){for(var n=Math.min(this.position+t,this.size),r=this.position;r<n;++r)if(this._dv.getUint8(r)===e)return r;return this.position+t}},{key:"_index_of_u16",value:function(e,t){for(var n=Math.min(this.position+t,this.size),r=this.position;r<n;r+=2)if(this._dv.getUint16(r,this.little_endian)===e)return r;return this.position+t}},{key:"_ensure_capacity",value:function(e){if(e>this.capacity){var t=this.capacity||e;do t*=2;while(t<e);var n=new ArrayBuffer(t);new Uint8Array(n).set(new Uint8Array(this._buffer,0,this.size)),this._buffer=n,this._dv=new DataView(this._buffer)}}},{key:"bytes_left",get:function(){return this.size-this.position}},{key:"capacity",get:function(){return this._buffer.byteLength}},{key:"buffer",get:function(){return this._buffer.slice(0,this.size)}}]),e}()},function(e,t,n){"use strict";function r(e){if(v){var t=e.node,n=e.children;if(n.length)for(var r=0;r<n.length;r++)g(t,n[r],null);else null!=e.html?h(t,e.html):null!=e.text&&d(t,e.text)}}function i(e,t){e.parentNode.replaceChild(t.node,e),r(t)}function o(e,t){v?e.children.push(t):e.node.appendChild(t.node)}function a(e,t){v?e.html=t:h(e.node,t)}function s(e,t){v?e.text=t:d(e.node,t)}function c(){return this.node.nodeName}function u(e){return{node:e,children:[],html:null,text:null,toString:c}}var l=n(38),h=n(33),p=n(46),d=n(83),f=1,m=11,v="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),g=p(function(e,t,n){t.node.nodeType===m||t.node.nodeType===f&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===l.html)?(r(t),e.insertBefore(t.node,n)):(e.insertBefore(t.node,n),r(t))});u.insertTreeBefore=g,u.replaceChildWithTree=i,u.queueChild=o,u.queueHTML=a,u.queueText=s,e.exports=u},function(e,t,n){"use strict";function r(e,t){return(e&t)===t}var i=n(3),o=(n(1),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=o,n=e.Properties||{},a=e.DOMAttributeNamespaces||{},c=e.DOMAttributeNames||{},u=e.DOMPropertyNames||{},l=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var h in n){s.properties.hasOwnProperty(h)?i("48",h):void 0;var p=h.toLowerCase(),d=n[h],f={attributeName:p,attributeNamespace:null,propertyName:h,mutationMethod:null,mustUseProperty:r(d,t.MUST_USE_PROPERTY),hasBooleanValue:r(d,t.HAS_BOOLEAN_VALUE),hasNumericValue:r(d,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(d,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(d,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(f.hasBooleanValue+f.hasNumericValue+f.hasOverloadedBooleanValue<=1?void 0:i("50",h),c.hasOwnProperty(h)){var m=c[h];f.attributeName=m}a.hasOwnProperty(h)&&(f.attributeNamespace=a[h]),u.hasOwnProperty(h)&&(f.propertyName=u[h]),l.hasOwnProperty(h)&&(f.mutationMethod=l[h]),s.properties[h]=f}}}),a=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:a,ATTRIBUTE_NAME_CHAR:a+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){var n=s._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},injection:o};e.exports=s},function(e,t,n){"use strict";function r(){i.attachRefs(this,this._currentElement)}var i=n(160),o=(n(8),n(2),{mountComponent:function(e,t,n,i,o,a){var s=e.mountComponent(t,n,i,o,a);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(r,e),s},getHostNode:function(e){return e.getHostNode()},unmountComponent:function(e,t){i.detachRefs(e,e._currentElement),e.unmountComponent(t)},receiveComponent:function(e,t,n,o){var a=e._currentElement;if(t!==a||o!==e._context){var s=i.shouldUpdateRefs(a,t);s&&i.detachRefs(e,a),e.receiveComponent(t,n,o),s&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(r,e)}},performUpdateIfNecessary:function(e,t,n){e._updateBatchNumber===n&&e.performUpdateIfNecessary(t)}});e.exports=o},function(e,t,n){"use strict";var r=n(4),i=n(190),o=n(53),a=n(195),s=n(191),c=n(192),u=n(19),l=n(193),h=n(196),p=n(197),d=(n(2),u.createElement),f=u.createFactory,m=u.cloneElement,v=r,g={Children:{map:i.map,forEach:i.forEach,count:i.count,toArray:i.toArray,only:p},Component:o,PureComponent:a,createElement:d,cloneElement:m,isValidElement:u.isValidElement,PropTypes:l,createClass:s.createClass,createFactory:f,createMixin:function(e){return e},DOM:c,version:h,__spread:v};e.exports=g},function(e,t,n){"use strict";function r(e){return void 0!==e.ref}function i(e){return void 0!==e.key}var o=n(4),a=n(11),s=(n(2),n(88),Object.prototype.hasOwnProperty),c=n(86),u={key:!0,ref:!0,__self:!0,__source:!0},l=function(e,t,n,r,i,o,a){var s={$$typeof:c,type:e,key:t,ref:n,props:a,_owner:o};return s};l.createElement=function(e,t,n){var o,c={},h=null,p=null,d=null,f=null;if(null!=t){r(t)&&(p=t.ref),i(t)&&(h=""+t.key),d=void 0===t.__self?null:t.__self,f=void 0===t.__source?null:t.__source;for(o in t)s.call(t,o)&&!u.hasOwnProperty(o)&&(c[o]=t[o])}var m=arguments.length-2;if(1===m)c.children=n;else if(m>1){for(var v=Array(m),g=0;g<m;g++)v[g]=arguments[g+2];c.children=v}if(e&&e.defaultProps){var y=e.defaultProps;for(o in y)void 0===c[o]&&(c[o]=y[o])}return l(e,h,p,d,f,a.current,c)},l.createFactory=function(e){var t=l.createElement.bind(null,e);return t.type=e,t},l.cloneAndReplaceKey=function(e,t){var n=l(e.type,t,e.ref,e._self,e._source,e._owner,e.props);return n},l.cloneElement=function(e,t,n){var c,h=o({},e.props),p=e.key,d=e.ref,f=e._self,m=e._source,v=e._owner;if(null!=t){r(t)&&(d=t.ref,v=a.current),i(t)&&(p=""+t.key);var g;e.type&&e.type.defaultProps&&(g=e.type.defaultProps);for(c in t)s.call(t,c)&&!u.hasOwnProperty(c)&&(void 0===t[c]&&void 0!==g?h[c]=g[c]:h[c]=t[c])}var y=arguments.length-2;if(1===y)h.children=n;else if(y>1){for(var b=Array(y),_=0;_<y;_++)b[_]=arguments[_+2];h.children=b}return l(e.type,p,d,f,m,v,h)},l.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===c},e.exports=l},3,function(e,t,n){"use strict";e.exports=n(18)},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";function r(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}function i(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||!r(t));default:return!1}}var o=n(3),a=n(39),s=n(40),c=n(44),u=n(77),l=n(78),h=(n(1),{}),p=null,d=function(e,t){e&&(s.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},f=function(e){return d(e,!0)},m=function(e){return d(e,!1)},v=function(e){return"."+e._rootNodeID},g={injection:{injectEventPluginOrder:a.injectEventPluginOrder,injectEventPluginsByName:a.injectEventPluginsByName},putListener:function(e,t,n){"function"!=typeof n?o("94",t,typeof n):void 0;var r=v(e),i=h[t]||(h[t]={});i[r]=n;var s=a.registrationNameModules[t];s&&s.didPutListener&&s.didPutListener(e,t,n)},getListener:function(e,t){var n=h[t];if(i(t,e._currentElement.type,e._currentElement.props))return null;var r=v(e);return n&&n[r]},deleteListener:function(e,t){var n=a.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var r=h[t];if(r){var i=v(e);delete r[i]}},deleteAllListeners:function(e){var t=v(e);for(var n in h)if(h.hasOwnProperty(n)&&h[n][t]){var r=a.registrationNameModules[n];r&&r.willDeleteListener&&r.willDeleteListener(e,n),delete h[n][t]}},extractEvents:function(e,t,n,r){for(var i,o=a.plugins,s=0;s<o.length;s++){var c=o[s];if(c){var l=c.extractEvents(e,t,n,r);l&&(i=u(i,l))}}return i},enqueueEvents:function(e){e&&(p=u(p,e))},processEventQueue:function(e){var t=p;p=null,e?l(t,f):l(t,m),p?o("95"):void 0,c.rethrowCaughtError()},__purge:function(){h={}},__getListenerBank:function(){return h}};e.exports=g},function(e,t,n){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return g(e,r)}function i(e,t,n){var i=r(e,n,t);i&&(n._dispatchListeners=m(n._dispatchListeners,i),n._dispatchInstances=m(n._dispatchInstances,e))}function o(e){e&&e.dispatchConfig.phasedRegistrationNames&&f.traverseTwoPhase(e._targetInst,i,e)}function a(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?f.getParentInstance(t):null;f.traverseTwoPhase(n,i,e)}}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=g(e,r);i&&(n._dispatchListeners=m(n._dispatchListeners,i),n._dispatchInstances=m(n._dispatchInstances,e))}}function c(e){e&&e.dispatchConfig.registrationName&&s(e._targetInst,null,e)}function u(e){v(e,o)}function l(e){v(e,a)}function h(e,t,n,r){f.traverseEnterLeave(n,r,s,e,t)}function p(e){v(e,c)}var d=n(23),f=n(40),m=n(77),v=n(78),g=(n(2),d.getListener),y={accumulateTwoPhaseDispatches:u,accumulateTwoPhaseDispatchesSkipTarget:l,accumulateDirectDispatches:p,accumulateEnterLeaveDispatches:h};e.exports=y},function(e,t){"use strict";var n={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};e.exports=n},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(10),o=n(49),a={view:function(e){if(e.view)return e.view;var t=o(e);if(t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};i.augmentClass(r,a),e.exports=r},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(){}function n(e,t){this.x=e||0,this.y=t||0}function r(e,t,o,a,s,c,u,l,h,p){Object.defineProperty(this,"id",{value:i()}),this.uuid=Ua.generateUUID(),this.name="",this.sourceFile="",this.image=void 0!==e?e:r.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:r.DEFAULT_MAPPING,this.wrapS=void 0!==o?o:Lo,this.wrapT=void 0!==a?a:Lo,this.magFilter=void 0!==s?s:No,this.minFilter=void 0!==c?c:Fo,this.anisotropy=void 0!==h?h:1,this.format=void 0!==u?u:ea,this.type=void 0!==l?l:Bo,this.offset=new n(0,0),this.repeat=new n(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==p?p:Ra,this.version=0,this.onUpdate=null}function i(){return Fa++}function o(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function a(e,t,n){this.uuid=Ua.generateUUID(),this.width=e,this.height=t,this.scissor=new o(0,0,e,t),this.scissorTest=!1,this.viewport=new o(0,0,e,t),n=n||{},void 0===n.minFilter&&(n.minFilter=No),this.texture=new r(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function s(e,t,n){a.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function c(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function u(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function l(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function h(e,t,n,i,o,a,s,c,u,l){e=void 0!==e?e:[],t=void 0!==t?t:wo,r.call(this,e,t,n,i,o,a,s,c,u,l),this.flipY=!1}function p(){this.seq=[],this.map={}}function d(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=za[i];if(void 0===o&&(o=new Float32Array(i),za[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function f(e,t){var n=Ga[t];void 0===n&&(n=new Int32Array(t),Ga[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function m(e,t){e.uniform1f(this.addr,t)}function v(e,t){e.uniform1i(this.addr,t)}function g(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function y(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function b(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function _(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function w(e,t){e.uniformMatrix3fv(this.addr,!1,t.elements||t)}function x(e,t){e.uniformMatrix4fv(this.addr,!1,t.elements||t)}function T(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTexture2D(t||ja,r)}function E(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTextureCube(t||Ba,r)}function M(e,t){e.uniform2iv(this.addr,t)}function S(e,t){e.uniform3iv(this.addr,t)}function R(e,t){e.uniform4iv(this.addr,t)}function C(e){switch(e){case 5126:return m;case 35664:return g;case 35665:return y;case 35666:return b;case 35674:return _;case 35675:return w;case 35676:return x;case 35678:return T;case 35680:return E;case 5124:case 35670:return v;case 35667:case 35671:return M;case 35668:case 35672:return S;case 35669:case 35673:return R}}function A(e,t){e.uniform1fv(this.addr,t)}function L(e,t){e.uniform1iv(this.addr,t)}function P(e,t){e.uniform2fv(this.addr,d(t,this.size,2))}function O(e,t){e.uniform3fv(this.addr,d(t,this.size,3))}function k(e,t){e.uniform4fv(this.addr,d(t,this.size,4))}function I(e,t){e.uniformMatrix2fv(this.addr,!1,d(t,this.size,4))}function D(e,t){e.uniformMatrix3fv(this.addr,!1,d(t,this.size,9))}function N(e,t){e.uniformMatrix4fv(this.addr,!1,d(t,this.size,16))}function U(e,t,n){var r=t.length,i=f(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTexture2D(t[o]||ja,i[o])}function F(e,t,n){var r=t.length,i=f(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTextureCube(t[o]||Ba,i[o])}function j(e){switch(e){case 5126:return A;case 35664:return P;case 35665:return O;case 35666:return k;case 35674:return I;case 35675:return D;case 35676:return N;case 35678:return U;case 35680:return F;case 5124:case 35670:return L;case 35667:case 35671:return M;case 35668:case 35672:return S;case 35669:case 35673:return R}}function B(e,t,n){this.id=e,this.addr=n,this.setValue=C(t.type)}function z(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=j(t.type)}function G(e){this.id=e,p.call(this)}function V(e,t){e.seq.push(t),e.map[t.id]=t}function H(e,t,n){var r=e.name,i=r.length;for(Va.lastIndex=0;;){var o=Va.exec(r),a=Va.lastIndex,s=o[1],c="]"===o[2],u=o[3];if(c&&(s|=0),void 0===u||"["===u&&a+2===i){V(n,void 0===u?new B(s,e,t):new z(s,e,t));break}var l=n.map,h=l[s];void 0===h&&(h=new G(s),V(n,h)),n=h}}function W(e,t,n){p.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i!==r;++i){var o=e.getActiveUniform(t,i),a=o.name,s=e.getUniformLocation(t,a);H(o,s,this)}}function X(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function q(e,t){this.min=void 0!==e?e:new n(+(1/0),+(1/0)),this.max=void 0!==t?t:new n(-(1/0),-(1/0))}function Y(e,t){function r(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),t=new Uint16Array([0,1,2,0,2,3]);o=f.createBuffer(),a=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,o),f.bufferData(f.ARRAY_BUFFER,e,f.STATIC_DRAW),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,a),f.bufferData(f.ELEMENT_ARRAY_BUFFER,t,f.STATIC_DRAW),p=f.createTexture(),d=f.createTexture(),m.bindTexture(f.TEXTURE_2D,p),f.texImage2D(f.TEXTURE_2D,0,f.RGB,16,16,0,f.RGB,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),
f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),m.bindTexture(f.TEXTURE_2D,d),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,16,16,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),s={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},c=i(s),l={vertex:f.getAttribLocation(c,"position"),uv:f.getAttribLocation(c,"uv")},h={renderType:f.getUniformLocation(c,"renderType"),map:f.getUniformLocation(c,"map"),occlusionMap:f.getUniformLocation(c,"occlusionMap"),opacity:f.getUniformLocation(c,"opacity"),color:f.getUniformLocation(c,"color"),scale:f.getUniformLocation(c,"scale"),rotation:f.getUniformLocation(c,"rotation"),screenPosition:f.getUniformLocation(c,"screenPosition")}}function i(t){var n=f.createProgram(),r=f.createShader(f.FRAGMENT_SHADER),i=f.createShader(f.VERTEX_SHADER),o="precision "+e.getPrecision()+" float;\n";return f.shaderSource(r,o+t.fragmentShader),f.shaderSource(i,o+t.vertexShader),f.compileShader(r),f.compileShader(i),f.attachShader(n,r),f.attachShader(n,i),f.linkProgram(n),n}var o,a,s,c,l,h,p,d,f=e.context,m=e.state;this.render=function(i,s,v){if(0!==t.length){var g=new u,y=v.w/v.z,b=.5*v.z,_=.5*v.w,w=16/v.w,x=new n(w*y,w),T=new u(1,1,0),E=new n(1,1),M=new q;M.min.set(v.x,v.y),M.max.set(v.x+(v.z-16),v.y+(v.w-16)),void 0===c&&r(),f.useProgram(c),m.initAttributes(),m.enableAttribute(l.vertex),m.enableAttribute(l.uv),m.disableUnusedAttributes(),f.uniform1i(h.occlusionMap,0),f.uniform1i(h.map,1),f.bindBuffer(f.ARRAY_BUFFER,o),f.vertexAttribPointer(l.vertex,2,f.FLOAT,!1,16,0),f.vertexAttribPointer(l.uv,2,f.FLOAT,!1,16,8),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,a),m.disable(f.CULL_FACE),m.setDepthWrite(!1);for(var S=0,R=t.length;S<R;S++){w=16/v.w,x.set(w*y,w);var C=t[S];if(g.set(C.matrixWorld.elements[12],C.matrixWorld.elements[13],C.matrixWorld.elements[14]),g.applyMatrix4(s.matrixWorldInverse),g.applyProjection(s.projectionMatrix),T.copy(g),E.x=v.x+T.x*b+b-8,E.y=v.y+T.y*_+_-8,M.containsPoint(E)===!0){m.activeTexture(f.TEXTURE0),m.bindTexture(f.TEXTURE_2D,null),m.activeTexture(f.TEXTURE1),m.bindTexture(f.TEXTURE_2D,p),f.copyTexImage2D(f.TEXTURE_2D,0,f.RGB,E.x,E.y,16,16,0),f.uniform1i(h.renderType,0),f.uniform2f(h.scale,x.x,x.y),f.uniform3f(h.screenPosition,T.x,T.y,T.z),m.disable(f.BLEND),m.enable(f.DEPTH_TEST),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0),m.activeTexture(f.TEXTURE0),m.bindTexture(f.TEXTURE_2D,d),f.copyTexImage2D(f.TEXTURE_2D,0,f.RGBA,E.x,E.y,16,16,0),f.uniform1i(h.renderType,1),m.disable(f.DEPTH_TEST),m.activeTexture(f.TEXTURE1),m.bindTexture(f.TEXTURE_2D,p),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0),C.positionScreen.copy(T),C.customUpdateCallback?C.customUpdateCallback(C):C.updateLensFlares(),f.uniform1i(h.renderType,2),m.enable(f.BLEND);for(var A=0,L=C.lensFlares.length;A<L;A++){var P=C.lensFlares[A];P.opacity>.001&&P.scale>.001&&(T.x=P.x,T.y=P.y,T.z=P.z,w=P.size*P.scale/v.w,x.x=w*y,x.y=w,f.uniform3f(h.screenPosition,T.x,T.y,T.z),f.uniform2f(h.scale,x.x,x.y),f.uniform1f(h.rotation,P.rotation),f.uniform1f(h.opacity,P.opacity),f.uniform3f(h.color,P.color.r,P.color.g,P.color.b),m.setBlending(P.blending,P.blendEquation,P.blendSrc,P.blendDst),e.setTexture2D(P.texture,1),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0))}}}m.enable(f.CULL_FACE),m.enable(f.DEPTH_TEST),m.setDepthWrite(!0),e.resetGLState()}}}function Z(e,t){function n(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),t=new Uint16Array([0,1,2,0,2,3]);a=f.createBuffer(),s=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,a),f.bufferData(f.ARRAY_BUFFER,e,f.STATIC_DRAW),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,s),f.bufferData(f.ELEMENT_ARRAY_BUFFER,t,f.STATIC_DRAW),l=i(),h={position:f.getAttribLocation(l,"position"),uv:f.getAttribLocation(l,"uv")},p={uvOffset:f.getUniformLocation(l,"uvOffset"),uvScale:f.getUniformLocation(l,"uvScale"),rotation:f.getUniformLocation(l,"rotation"),scale:f.getUniformLocation(l,"scale"),color:f.getUniformLocation(l,"color"),map:f.getUniformLocation(l,"map"),opacity:f.getUniformLocation(l,"opacity"),modelViewMatrix:f.getUniformLocation(l,"modelViewMatrix"),projectionMatrix:f.getUniformLocation(l,"projectionMatrix"),fogType:f.getUniformLocation(l,"fogType"),fogDensity:f.getUniformLocation(l,"fogDensity"),fogNear:f.getUniformLocation(l,"fogNear"),fogFar:f.getUniformLocation(l,"fogFar"),fogColor:f.getUniformLocation(l,"fogColor"),alphaTest:f.getUniformLocation(l,"alphaTest")};var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=8,n.height=8;var o=n.getContext("2d");o.fillStyle="white",o.fillRect(0,0,8,8),d=new r(n),d.needsUpdate=!0}function i(){var t=f.createProgram(),n=f.createShader(f.VERTEX_SHADER),r=f.createShader(f.FRAGMENT_SHADER);return f.shaderSource(n,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),f.shaderSource(r,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),f.compileShader(n),f.compileShader(r),f.attachShader(t,n),f.attachShader(t,r),f.linkProgram(t),t}function o(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}var a,s,l,h,p,d,f=e.context,m=e.state,v=new u,g=new c,y=new u;this.render=function(r,i){if(0!==t.length){void 0===l&&n(),f.useProgram(l),m.initAttributes(),m.enableAttribute(h.position),m.enableAttribute(h.uv),m.disableUnusedAttributes(),m.disable(f.CULL_FACE),m.enable(f.BLEND),f.bindBuffer(f.ARRAY_BUFFER,a),f.vertexAttribPointer(h.position,2,f.FLOAT,!1,16,0),f.vertexAttribPointer(h.uv,2,f.FLOAT,!1,16,8),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,s),f.uniformMatrix4fv(p.projectionMatrix,!1,i.projectionMatrix.elements),m.activeTexture(f.TEXTURE0),f.uniform1i(p.map,0);var c=0,u=0,b=r.fog;b?(f.uniform3f(p.fogColor,b.color.r,b.color.g,b.color.b),b&&b.isFog?(f.uniform1f(p.fogNear,b.near),f.uniform1f(p.fogFar,b.far),f.uniform1i(p.fogType,1),c=1,u=1):b&&b.isFogExp2&&(f.uniform1f(p.fogDensity,b.density),f.uniform1i(p.fogType,2),c=2,u=2)):(f.uniform1i(p.fogType,0),c=0,u=0);for(var _=0,w=t.length;_<w;_++){var x=t[_];x.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,x.matrixWorld),x.z=-x.modelViewMatrix.elements[14]}t.sort(o);for(var T=[],_=0,w=t.length;_<w;_++){var x=t[_],E=x.material;if(E.visible!==!1){f.uniform1f(p.alphaTest,E.alphaTest),f.uniformMatrix4fv(p.modelViewMatrix,!1,x.modelViewMatrix.elements),x.matrixWorld.decompose(v,g,y),T[0]=y.x,T[1]=y.y;var M=0;r.fog&&E.fog&&(M=u),c!==M&&(f.uniform1i(p.fogType,M),c=M),null!==E.map?(f.uniform2f(p.uvOffset,E.map.offset.x,E.map.offset.y),f.uniform2f(p.uvScale,E.map.repeat.x,E.map.repeat.y)):(f.uniform2f(p.uvOffset,0,0),f.uniform2f(p.uvScale,1,1)),f.uniform1f(p.opacity,E.opacity),f.uniform3f(p.color,E.color.r,E.color.g,E.color.b),f.uniform1f(p.rotation,E.rotation),f.uniform2fv(p.scale,T),m.setBlending(E.blending,E.blendEquation,E.blendSrc,E.blendDst),m.setDepthTest(E.depthTest),m.setDepthWrite(E.depthWrite),E.map?e.setTexture2D(E.map,0):e.setTexture2D(d,0),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0)}}m.enable(f.CULL_FACE),e.resetGLState()}}}function K(){Object.defineProperty(this,"id",{value:J()}),this.uuid=Ua.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Di,this.side=Si,this.shading=Li,this.vertexColors=Pi,this.opacity=1,this.transparent=!1,this.blendSrc=Ki,this.blendDst=Ji,this.blendEquation=zi,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ao,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function J(){return Xc++}function Q(e){K.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function $(e){K.call(this),this.type="MeshDepthMaterial",this.depthPacking=Da,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function ee(e,t){this.min=void 0!==e?e:new u(+(1/0),+(1/0),+(1/0)),this.max=void 0!==t?t:new u(-(1/0),-(1/0),-(1/0))}function te(e,t){this.center=void 0!==e?e:new u,this.radius=void 0!==t?t:0}function ne(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function re(e,t){this.normal=void 0!==e?e:new u(1,0,0),this.constant=void 0!==t?t:0}function ie(e,t,n,r,i,o){this.planes=[void 0!==e?e:new re,void 0!==t?t:new re,void 0!==n?n:new re,void 0!==r?r:new re,void 0!==i?i:new re,void 0!==o?o:new re]}function oe(e,t,r,i){function s(t,n,r,i){var o=t.geometry,a=null,s=E,c=t.customDepthMaterial;if(r&&(s=M,c=t.customDistanceMaterial),c)a=c;else{var u=!1;n.morphTargets&&(o&&o.isBufferGeometry?u=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0:o&&o.isGeometry&&(u=o.morphTargets&&o.morphTargets.length>0));var l=t.isSkinnedMesh&&n.skinning,h=0;u&&(h|=w),l&&(h|=x),a=s[h]}if(e.localClippingEnabled&&n.clipShadows===!0&&0!==n.clippingPlanes.length){var p=a.uuid,d=n.uuid,f=S[p];void 0===f&&(f={},S[p]=f);var m=f[d];void 0===m&&(m=a.clone(),f[d]=m),a=m}a.visible=n.visible,a.wireframe=n.wireframe;var v=n.side;return F.renderSingleSided&&v==Ci&&(v=Si),F.renderReverseSided&&(v===Si?v=Ri:v===Ri&&(v=Si)),a.side=v,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,r&&void 0!==a.uniforms.lightPos&&a.uniforms.lightPos.value.copy(i),a}function c(e,t,n){if(e.visible!==!1){var r=0!==(e.layers.mask&t.layers.mask);if(r&&(e.isMesh||e.isLine||e.isPoints)&&e.castShadow&&(e.frustumCulled===!1||d.intersectsObject(e)===!0)){var i=e.material;i.visible===!0&&(e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),_.push(e))}for(var o=e.children,a=0,s=o.length;a<s;a++)c(o[a],t,n)}}var h=e.context,p=e.state,d=new ie,f=new l,m=t.shadows,v=new n,g=new n(i.maxTextureSize,i.maxTextureSize),y=new u,b=new u,_=[],w=1,x=2,T=(w|x)+1,E=new Array(T),M=new Array(T),S={},R=[new u(1,0,0),new u(-1,0,0),new u(0,0,1),new u(0,0,-1),new u(0,1,0),new u(0,-1,0)],C=[new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,0,1),new u(0,0,-1)],A=[new o,new o,new o,new o,new o,new o],L=new $;L.depthPacking=Na,L.clipping=!0;for(var P=Wc.distanceRGBA,O=Ha.clone(P.uniforms),k=0;k!==T;++k){var I=0!==(k&w),D=0!==(k&x),N=L.clone();N.morphTargets=I,N.skinning=D,E[k]=N;var U=new Q({defines:{USE_SHADOWMAP:""},uniforms:O,vertexShader:P.vertexShader,fragmentShader:P.fragmentShader,morphTargets:I,skinning:D,clipping:!0});M[k]=U}var F=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ei,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,n){if(F.enabled!==!1&&(F.autoUpdate!==!1||F.needsUpdate!==!1)&&0!==m.length){p.clearColor(1,1,1,1),p.disable(h.BLEND),p.setDepthTest(!0),p.setScissorTest(!1);for(var i,o,u=0,l=m.length;u<l;u++){var w=m[u],x=w.shadow;if(void 0!==x){var T=x.camera;if(v.copy(x.mapSize),v.min(g),w&&w.isPointLight){i=6,o=!0;var E=v.x,M=v.y;A[0].set(2*E,M,E,M),A[1].set(0,M,E,M),A[2].set(3*E,M,E,M),A[3].set(E,M,E,M),A[4].set(3*E,0,E,M),A[5].set(E,0,E,M),v.x*=4,v.y*=2}else i=1,o=!1;if(null===x.map){var S={minFilter:ko,magFilter:ko,format:ea};x.map=new a(v.x,v.y,S),T.updateProjectionMatrix()}x&&x.isSpotLightShadow&&x.update(w);var L=x.map,P=x.matrix;b.setFromMatrixPosition(w.matrixWorld),T.position.copy(b),e.setRenderTarget(L),e.clear();for(var O=0;O<i;O++){if(o){y.copy(T.position),y.add(R[O]),T.up.copy(C[O]),T.lookAt(y);var k=A[O];p.viewport(k)}else y.setFromMatrixPosition(w.target.matrixWorld),T.lookAt(y);T.updateMatrixWorld(),T.matrixWorldInverse.getInverse(T.matrixWorld),P.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),P.multiply(T.projectionMatrix),P.multiply(T.matrixWorldInverse),f.multiplyMatrices(T.projectionMatrix,T.matrixWorldInverse),d.setFromMatrix(f),_.length=0,c(t,n,T);for(var I=0,D=_.length;I<D;I++){var N=_[I],U=r.update(N),j=N.material;if(j&&j.isMultiMaterial)for(var B=U.groups,z=j.materials,G=0,V=B.length;G<V;G++){var H=B[G],W=z[H.materialIndex];if(W.visible===!0){var X=s(N,W,o,b);e.renderBufferDirect(T,null,U,X,N,H)}}else{var X=s(N,j,o,b);e.renderBufferDirect(T,null,U,X,N,null)}}}}else console.warn("THREE.WebGLShadowMap:",w,"has no shadow.")}var q=e.getClearColor(),Y=e.getClearAlpha();e.setClearColor(q,Y),F.needsUpdate=!1}}}function ae(e,t){this.origin=void 0!==e?e:new u,this.direction=void 0!==t?t:new u}function se(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||se.DefaultOrder}function ce(){this.mask=1}function ue(){function e(){i.setFromEuler(r,!1)}function t(){r.setFromQuaternion(i,void 0,!1)}Object.defineProperty(this,"id",{value:le()}),this.uuid=Ua.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ue.DefaultUp.clone();var n=new u,r=new se,i=new c,o=new u(1,1,1);r.onChange(e),i.onChange(t),Object.defineProperties(this,{position:{enumerable:!0,value:n},rotation:{enumerable:!0,value:r},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:o},modelViewMatrix:{value:new l},normalMatrix:{value:new ne}}),this.matrix=new l,this.matrixWorld=new l,this.matrixAutoUpdate=ue.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ce,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function le(){return qc++}function he(e,t){this.start=void 0!==e?e:new u,this.end=void 0!==t?t:new u}function pe(e,t,n){this.a=void 0!==e?e:new u,this.b=void 0!==t?t:new u,this.c=void 0!==n?n:new u}function de(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new u,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new X,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function fe(e){K.call(this),this.type="MeshBasicMaterial",this.color=new X(16777215),this.map=null,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ho,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function me(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=Ua.generateUUID(),this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function ve(e,t){return new me(new Int8Array(e),t)}function ge(e,t){return new me(new Uint8Array(e),t)}function ye(e,t){return new me(new Uint8ClampedArray(e),t)}function be(e,t){return new me(new Int16Array(e),t)}function _e(e,t){return new me(new Uint16Array(e),t)}function we(e,t){return new me(new Int32Array(e),t)}function xe(e,t){return new me(new Uint32Array(e),t)}function Te(e,t){return new me(new Float32Array(e),t)}function Ee(e,t){return new me(new Float64Array(e),t)}function Me(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new me(e,t).setDynamic(!0)}function Se(){Object.defineProperty(this,"id",{value:Re()}),this.uuid=Ua.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Re(){return Yc++}function Ce(){Object.defineProperty(this,"id",{value:Re()}),this.uuid=Ua.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ae(){Object.defineProperty(this,"id",{value:Re()}),this.uuid=Ua.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Le(e,t){ue.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Ae,this.material=void 0!==t?t:new fe({color:16777215*Math.random()}),this.drawMode=Ea,this.updateMorphTargets()}function Pe(e,t,n,r,i,o){function a(e,t,n){var r=0;return r+=(e+1)*(t+1)*2,r+=(e+1)*(n+1)*2,r+=(n+1)*(t+1)*2}function s(e,t,n){var r=0;return r+=e*t*2,r+=e*n*2,r+=n*t*2,6*r}function c(e,t,n,r,i,o,a,s,c,h,p){for(var x=o/c,T=a/h,E=o/2,M=a/2,S=s/2,R=c+1,C=h+1,A=0,L=0,P=new u,O=0;O<C;O++)for(var k=O*T-M,I=0;I<R;I++){var D=I*x-E;P[e]=D*r,P[t]=k*i,P[n]=S,f[g]=P.x,f[g+1]=P.y,f[g+2]=P.z,P[e]=0,P[t]=0,P[n]=s>0?1:-1,m[g]=P.x,m[g+1]=P.y,m[g+2]=P.z,v[y]=I/c,v[y+1]=1-O/h,g+=3,y+=2,A+=1}for(O=0;O<h;O++)for(I=0;I<c;I++){var N=_+I+R*O,U=_+I+R*(O+1),F=_+(I+1)+R*(O+1),j=_+(I+1)+R*O;d[b]=N,d[b+1]=U,d[b+2]=j,d[b+3]=U,d[b+4]=F,d[b+5]=j,b+=6,L+=6}l.addGroup(w,L,p),w+=L,_+=A}Ae.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var l=this;r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var h=a(r,i,o),p=s(r,i,o),d=new(p>65535?Uint32Array:Uint16Array)(p),f=new Float32Array(3*h),m=new Float32Array(3*h),v=new Float32Array(2*h),g=0,y=0,b=0,_=0,w=0;c("z","y","x",-1,-1,n,t,e,o,i,0),c("z","y","x",1,-1,n,t,-e,o,i,1),c("x","z","y",1,1,e,n,t,r,o,2),c("x","z","y",1,-1,e,n,-t,r,o,3),c("x","y","z",1,-1,e,t,n,r,i,4),c("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(new me(d,1)),this.addAttribute("position",new me(f,3)),this.addAttribute("normal",new me(m,3)),this.addAttribute("uv",new me(v,2))}function Oe(e,t,n,r){Ae.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};for(var i=e/2,o=t/2,a=Math.floor(n)||1,s=Math.floor(r)||1,c=a+1,u=s+1,l=e/a,h=t/s,p=new Float32Array(c*u*3),d=new Float32Array(c*u*3),f=new Float32Array(c*u*2),m=0,v=0,g=0;g<u;g++)for(var y=g*h-o,b=0;b<c;b++){var _=b*l-i;p[m]=_,p[m+1]=-y,d[m+2]=1,f[v]=b/a,f[v+1]=1-g/s,m+=3,v+=2}m=0;for(var w=new(p.length/3>65535?Uint32Array:Uint16Array)(a*s*6),g=0;g<s;g++)for(var b=0;b<a;b++){var x=b+c*g,T=b+c*(g+1),E=b+1+c*(g+1),M=b+1+c*g;w[m]=x,w[m+1]=T,w[m+2]=M,w[m+3]=T,w[m+4]=E,w[m+5]=M,m+=6}this.setIndex(new me(w,1)),this.addAttribute("position",new me(p,3)),this.addAttribute("normal",new me(d,3)),this.addAttribute("uv",new me(f,2))}function ke(){ue.call(this),this.type="Camera",this.matrixWorldInverse=new l,this.projectionMatrix=new l}function Ie(e,t,n,r){ke.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function De(e,t,n,r,i,o){ke.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Ne(e,t,n){function r(e){s=e}function i(n){n.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(c=e.UNSIGNED_INT,u=4):(c=e.UNSIGNED_SHORT,u=2)}function o(t,r){e.drawElements(s,r,c,t*u),n.calls++,n.vertices+=r,s===e.TRIANGLES&&(n.faces+=r/3)}function a(r,i,o){var a=t.get("ANGLE_instanced_arrays");return null===a?void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(a.drawElementsInstancedANGLE(s,o,c,i*u,r.maxInstancedCount),n.calls++,n.vertices+=o*r.maxInstancedCount,void(s===e.TRIANGLES&&(n.faces+=r.maxInstancedCount*o/3)))}var s,c,u;return{setMode:r,setIndex:i,render:o,renderInstances:a}}function Ue(e,t,n){function r(e){a=e}function i(t,r){e.drawArrays(a,t,r),n.calls++,n.vertices+=r,a===e.TRIANGLES&&(n.faces+=r/3)}function o(r){var i=t.get("ANGLE_instanced_arrays");if(null===i)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var o=r.attributes.position,s=0;o&&o.isInterleavedBufferAttribute?(s=o.data.count,i.drawArraysInstancedANGLE(a,0,s,r.maxInstancedCount)):(s=o.count,i.drawArraysInstancedANGLE(a,0,s,r.maxInstancedCount)),n.calls++,n.vertices+=s*r.maxInstancedCount,a===e.TRIANGLES&&(n.faces+=r.maxInstancedCount*s/3)}var a;return{setMode:r,render:i,renderInstances:o}}function Fe(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new u,color:new X,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"SpotLight":r={position:new u,direction:new u,color:new X,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"PointLight":r={position:new u,color:new X,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"HemisphereLight":r={direction:new u,skyColor:new X,groundColor:new X}}return e[t.id]=r,r}}}function je(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}function Be(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),je(n)),r}function ze(e){switch(e){case Ra:return["Linear","( value )"];case Ca:return["sRGB","( value )"];case La:return["RGBE","( value )"];case Oa:return["RGBM","( value, 7.0 )"];case ka:return["RGBM","( value, 16.0 )"];case Ia:return["RGBD","( value, 256.0 )"];case Aa:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Ge(e,t){var n=ze(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ve(e,t){var n=ze(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function He(e,t){var n;switch(t){case vo:n="Linear";break;case go:n="Reinhard";break;case yo:n="Uncharted2";break;case bo:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function We(e,t,n){e=e||{};var r=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(Ye).join("\n")}function Xe(e){var t=[];for(var n in e){var r=e[n];r!==!1&&t.push("#define "+n+" "+r)}return t.join("\n")}function qe(e,t,n){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<i;o++){var a=e.getActiveAttrib(t,o),s=a.name;r[s]=e.getAttribLocation(t,s)}return r}function Ye(e){return""!==e}function Ze(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Ke(e){function t(e,t){var n=Gc[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Ke(n)}var n=/#include +<([\w\d.]+)>/g;return e.replace(n,t)}function Je(e){function t(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i}var n=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return e.replace(n,t)}function Qe(e,t,n,r){var i=e.context,o=n.extensions,a=n.defines,s=n.__webglShader.vertexShader,c=n.__webglShader.fragmentShader,u="SHADOWMAP_TYPE_BASIC";r.shadowMapType===Ei?u="SHADOWMAP_TYPE_PCF":r.shadowMapType===Mi&&(u="SHADOWMAP_TYPE_PCF_SOFT");var l="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(n.envMap.mapping){case wo:case xo:l="ENVMAP_TYPE_CUBE";break;case So:case Ro:l="ENVMAP_TYPE_CUBE_UV";break;case To:case Eo:l="ENVMAP_TYPE_EQUIREC";break;case Mo:l="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case xo:case Eo:h="ENVMAP_MODE_REFRACTION"}switch(n.combine){case ho:p="ENVMAP_BLENDING_MULTIPLY";break;case po:p="ENVMAP_BLENDING_MIX";break;case fo:p="ENVMAP_BLENDING_ADD"}}var d,f,m=e.gammaFactor>0?e.gammaFactor:1,v=We(o,r,e.extensions),g=Xe(a),y=i.createProgram();n.isRawShaderMaterial?(d=[g,"\n"].filter(Ye).join("\n"),f=[v,g,"\n"].filter(Ye).join("\n")):(d=["precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,g,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+r.maxBones,r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+u:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ye).join("\n"),
f=[v,"precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,g,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"","#define GAMMA_FACTOR "+m,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+l:"",r.envMap?"#define "+h:"",r.envMap?"#define "+p:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(r.numClippingPlanes-r.numClipIntersection),r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+u:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",r.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",r.toneMapping!==mo?"#define TONE_MAPPING":"",r.toneMapping!==mo?Gc.tonemapping_pars_fragment:"",r.toneMapping!==mo?He("toneMapping",r.toneMapping):"",r.outputEncoding||r.mapEncoding||r.envMapEncoding||r.emissiveMapEncoding?Gc.encodings_pars_fragment:"",r.mapEncoding?Ge("mapTexelToLinear",r.mapEncoding):"",r.envMapEncoding?Ge("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?Ge("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.outputEncoding?Ve("linearToOutputTexel",r.outputEncoding):"",r.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ye).join("\n")),s=Ke(s,r),s=Ze(s,r),c=Ke(c,r),c=Ze(c,r),n.isShaderMaterial||(s=Je(s),c=Je(c));var b=d+s,_=f+c,w=Be(i,i.VERTEX_SHADER,b),x=Be(i,i.FRAGMENT_SHADER,_);i.attachShader(y,w),i.attachShader(y,x),void 0!==n.index0AttributeName?i.bindAttribLocation(y,0,n.index0AttributeName):r.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);var T=i.getProgramInfoLog(y),E=i.getShaderInfoLog(w),M=i.getShaderInfoLog(x),S=!0,R=!0;i.getProgramParameter(y,i.LINK_STATUS)===!1?(S=!1,console.error("THREE.WebGLProgram: shader error: ",i.getError(),"gl.VALIDATE_STATUS",i.getProgramParameter(y,i.VALIDATE_STATUS),"gl.getProgramInfoLog",T,E,M)):""!==T?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",T):""!==E&&""!==M||(R=!1),R&&(this.diagnostics={runnable:S,material:n,programLog:T,vertexShader:{log:E,prefix:d},fragmentShader:{log:M,prefix:f}}),i.deleteShader(w),i.deleteShader(x);var C;this.getUniforms=function(){return void 0===C&&(C=new W(i,y,e)),C};var A;return this.getAttributes=function(){return void 0===A&&(A=qe(i,y)),A},this.destroy=function(){i.deleteProgram(y),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Zc++,this.code=t,this.usedTimes=1,this.program=y,this.vertexShader=w,this.fragmentShader=x,this}function $e(e,t){function n(e){if(t.floatVertexTextures&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var n=t.maxVertexUniforms,r=Math.floor((n-20)/4),i=r;return void 0!==e&&e&&e.isSkinnedMesh&&(i=Math.min(e.skeleton.bones.length,i),i<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+i+" (try OpenGL instead of ANGLE)")),i}function r(e,t){var n;return e?e&&e.isTexture?n=e.encoding:e&&e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=Ra,n===Ra&&t&&(n=Aa),n}var i=[],o={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];this.getParameters=function(i,a,s,c,u,l){var h=o[i.type],p=n(l),d=e.getPrecision();null!==i.precision&&(d=t.getMaxPrecision(i.precision),d!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",d,"instead."));var f=e.getCurrentRenderTarget(),m={shaderID:h,precision:d,supportsVertexTextures:t.vertexTextures,outputEncoding:r(f?f.texture:null,e.gammaOutput),map:!!i.map,mapEncoding:r(i.map,e.gammaInput),envMap:!!i.envMap,envMapMode:i.envMap&&i.envMap.mapping,envMapEncoding:r(i.envMap,e.gammaInput),envMapCubeUV:!!i.envMap&&(i.envMap.mapping===So||i.envMap.mapping===Ro),lightMap:!!i.lightMap,aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:r(i.emissiveMap,e.gammaInput),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,combine:i.combine,vertexColors:i.vertexColors,fog:!!s,useFog:i.fog,fogExp:s&&s.isFogExp2,flatShading:i.shading===Ai,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:i.skinning,maxBones:p,useVertexTexture:t.floatVertexTextures&&l&&l.skeleton&&l.skeleton.useVertexTexture,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numHemiLights:a.hemi.length,numClippingPlanes:c,numClipIntersection:u,shadowMapEnabled:e.shadowMap.enabled&&l.receiveShadow&&a.shadows.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===Ci,flipSided:i.side===Ri,depthPacking:void 0!==i.depthPacking&&i.depthPacking};return m},this.getProgramCode=function(e,t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);for(var i=0;i<a.length;i++)n.push(t[a[i]]);return n.join()},this.acquireProgram=function(t,n,r){for(var o,a=0,s=i.length;a<s;a++){var c=i[a];if(c.code===r){o=c,++o.usedTimes;break}}return void 0===o&&(o=new Qe(e,r,t,n),i.push(o)),o},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function et(e,t,n){function r(e){var i=e.target,s=c[i.id];null!==s.index&&o(s.index),a(s.attributes),i.removeEventListener("dispose",r),delete c[i.id];var u=t.get(i);u.wireframe&&o(u.wireframe),t.delete(i);var l=t.get(s);l.wireframe&&o(l.wireframe),t.delete(s),n.memory.geometries--}function i(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}function o(t){var n=i(t);void 0!==n&&(e.deleteBuffer(n),s(t))}function a(e){for(var t in e)o(e[t])}function s(e){e.isInterleavedBufferAttribute?t.delete(e.data):t.delete(e)}var c={};return{get:function(e){var t=e.geometry;if(void 0!==c[t.id])return c[t.id];t.addEventListener("dispose",r);var i;return t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Ae).setFromObject(e)),i=t._bufferGeometry),c[t.id]=i,n.memory.geometries++,i}}}function tt(e,t,n){function r(t){var n=u.get(t);t.geometry.isGeometry&&n.updateFromObject(t);var r=n.index,o=n.attributes;null!==r&&i(r,e.ELEMENT_ARRAY_BUFFER);for(var a in o)i(o[a],e.ARRAY_BUFFER);var s=n.morphAttributes;for(var a in s)for(var c=s[a],l=0,h=c.length;l<h;l++)i(c[l],e.ARRAY_BUFFER);return n}function i(e,n){var r=e.isInterleavedBufferAttribute?e.data:e,i=t.get(r);void 0===i.__webglBuffer?o(i,r,n):i.version!==r.version&&a(i,r,n)}function o(t,n,r){t.__webglBuffer=e.createBuffer(),e.bindBuffer(r,t.__webglBuffer);var i=n.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW;e.bufferData(r,n.array,i),t.version=n.version}function a(t,n,r){e.bindBuffer(r,t.__webglBuffer),n.dynamic===!1?e.bufferData(r,n.array,e.STATIC_DRAW):n.updateRange.count===-1?e.bufferSubData(r,0,n.array):0===n.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,n.updateRange.offset*n.array.BYTES_PER_ELEMENT,n.array.subarray(n.updateRange.offset,n.updateRange.offset+n.updateRange.count)),n.updateRange.count=0),t.version=n.version}function s(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}function c(n){var r=t.get(n);if(void 0!==r.wireframe)return r.wireframe;var o=[],a=n.index,s=n.attributes,c=s.position;if(null!==a)for(var u=a.array,l=0,h=u.length;l<h;l+=3){var p=u[l+0],d=u[l+1],f=u[l+2];o.push(p,d,d,f,f,p)}else for(var u=s.position.array,l=0,h=u.length/3-1;l<h;l+=3){var p=l+0,d=l+1,f=l+2;o.push(p,d,d,f,f,p)}var m=c.count>65535?Uint32Array:Uint16Array,v=new me(new m(o),1);return i(v,e.ELEMENT_ARRAY_BUFFER),r.wireframe=v,v}var u=new et(e,t,n);return{getAttributeBuffer:s,getWireframeAttribute:c,update:r}}function nt(e,t,n,r,i,o,a){function s(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n);var i=r.getContext("2d");return i.drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function c(e){return Ua.isPowerOfTwo(e.width)&&Ua.isPowerOfTwo(e.height)}function u(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");t.width=Ua.nearestPowerOfTwo(e.width),t.height=Ua.nearestPowerOfTwo(e.height);var n=t.getContext("2d");return n.drawImage(e,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}function l(e){return e.wrapS!==Lo||e.wrapT!==Lo||e.minFilter!==ko&&e.minFilter!==No}function h(t){return t===ko||t===Io||t===Do?e.NEAREST:e.LINEAR}function p(e){var t=e.target;t.removeEventListener("dispose",p),f(t),R.textures--}function d(e){var t=e.target;t.removeEventListener("dispose",d),m(t),R.textures--}function f(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.delete(t)}function m(t){var n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t&&t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.delete(t.texture),r.delete(t)}}function v(t,i){var o=r.get(t);if(t.version>0&&o.__version!==t.version){var a=t.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(a.complete!==!1)return void _(o,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_2D,o.__webglTexture)}function g(t,a){var u=r.get(t);if(6===t.image.length)if(t.version>0&&u.__version!==t.version){u.__image__webglTextureCube||(t.addEventListener("dispose",p),u.__image__webglTextureCube=e.createTexture(),R.textures++),n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var l=t&&t.isCompressedTexture,h=t.image[0]&&t.image[0].isDataTexture,d=[],f=0;f<6;f++)l||h?d[f]=h?t.image[f].image:t.image[f]:d[f]=s(t.image[f],i.maxCubemapSize);var m=d[0],v=c(m),g=o(t.format),y=o(t.type);b(e.TEXTURE_CUBE_MAP,t,v);for(var f=0;f<6;f++)if(l)for(var _,w=d[f].mipmaps,x=0,T=w.length;x<T;x++)_=w[x],t.format!==ea&&t.format!==$o?n.getCompressedTextureFormats().indexOf(g)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+f,x,g,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+f,x,g,_.width,_.height,0,g,y,_.data);else h?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,g,d[f].width,d[f].height,0,g,y,d[f].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,g,g,y,d[f]);t.generateMipmaps&&v&&e.generateMipmap(e.TEXTURE_CUBE_MAP),u.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)}function y(t,i){n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)}function b(n,a,s){var c;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===Lo&&a.wrapT===Lo||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),e.texParameteri(n,e.TEXTURE_MAG_FILTER,h(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,h(a.minFilter)),a.minFilter!==ko&&a.minFilter!==No&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),c=t.get("EXT_texture_filter_anisotropic")){if(a.type===Xo&&null===t.get("OES_texture_float_linear"))return;if(a.type===qo&&null===t.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function _(t,r,a){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",p),t.__webglTexture=e.createTexture(),R.textures++),n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var h=s(r.image,i.maxTextureSize);l(r)&&c(h)===!1&&(h=u(h));var d=c(h),f=o(r.format),m=o(r.type);b(e.TEXTURE_2D,r,d);var v,g=r.mipmaps;if(r&&r.isDepthTexture){var y=e.DEPTH_COMPONENT;if(r.type===Xo){if(!C)throw new Error("Float Depth Texture only supported in WebGL2.0");y=e.DEPTH_COMPONENT32F}else C&&(y=e.DEPTH_COMPONENT16);r.format===oa&&(y=e.DEPTH_STENCIL),n.texImage2D(e.TEXTURE_2D,0,y,h.width,h.height,0,f,m,null)}else if(r&&r.isDataTexture)if(g.length>0&&d){for(var _=0,w=g.length;_<w;_++)v=g[_],n.texImage2D(e.TEXTURE_2D,_,f,v.width,v.height,0,f,m,v.data);r.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,f,h.width,h.height,0,f,m,h.data);else if(r&&r.isCompressedTexture)for(var _=0,w=g.length;_<w;_++)v=g[_],r.format!==ea&&r.format!==$o?n.getCompressedTextureFormats().indexOf(f)>-1?n.compressedTexImage2D(e.TEXTURE_2D,_,f,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,_,f,v.width,v.height,0,f,m,v.data);else if(g.length>0&&d){for(var _=0,w=g.length;_<w;_++)v=g[_],n.texImage2D(e.TEXTURE_2D,_,f,f,m,v);r.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,f,f,m,h);r.generateMipmaps&&d&&e.generateMipmap(e.TEXTURE_2D),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function w(t,i,a,s){var c=o(i.texture.format),u=o(i.texture.type);n.texImage2D(s,0,c,i.width,i.height,0,c,u,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function x(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function T(t,n){var i=n&&n.isWebGLRenderTargetCube;if(i)throw new Error("Depth Texture with cube render targets is not supported!");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),v(n.depthTexture,0);var o=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===ia)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(n.depthTexture.format!==oa)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}function E(t){var n=r.get(t),i=t&&t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");T(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),x(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),x(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}function M(t){var i=r.get(t),o=r.get(t.texture);t.addEventListener("dispose",d),o.__webglTexture=e.createTexture(),R.textures++;var a=t&&t.isWebGLRenderTargetCube,s=c(t);if(a){i.__webglFramebuffer=[];for(var u=0;u<6;u++)i.__webglFramebuffer[u]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(a){n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),b(e.TEXTURE_CUBE_MAP,t.texture,s);for(var u=0;u<6;u++)w(i.__webglFramebuffer[u],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+u);t.texture.generateMipmaps&&s&&e.generateMipmap(e.TEXTURE_CUBE_MAP),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),b(e.TEXTURE_2D,t.texture,s),w(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),t.texture.generateMipmaps&&s&&e.generateMipmap(e.TEXTURE_2D),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&E(t)}function S(t){var i=t.texture;if(i.generateMipmaps&&c(t)&&i.minFilter!==ko&&i.minFilter!==No){var o=t&&t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(i).__webglTexture;n.bindTexture(o,a),e.generateMipmap(o),n.bindTexture(o,null)}}var R=a.memory,C="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;this.setTexture2D=v,this.setTextureCube=g,this.setTextureCubeDynamic=y,this.setupRenderTarget=M,this.updateRenderTargetMipmap=S}function rt(){var e={};return{get:function(t){var n=t.uuid,r=e[n];return void 0===r&&(r={},e[n]=r),r},delete:function(t){delete e[t.uuid]},clear:function(){e={}}}}function it(e,t,n){function r(){var t=!1,n=new o,r=null,i=new o;return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a){n.set(t,r,o,a),i.equals(n)===!1&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(0,0,0,1)}}}function i(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?d(e.DEPTH_TEST):f(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case ro:e.depthFunc(e.NEVER);break;case io:e.depthFunc(e.ALWAYS);break;case oo:e.depthFunc(e.LESS);break;case ao:e.depthFunc(e.LEQUAL);break;case so:e.depthFunc(e.EQUAL);break;case co:e.depthFunc(e.GEQUAL);break;case uo:e.depthFunc(e.GREATER);break;case lo:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}}function a(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,u=null;return{setTest:function(t){t?d(e.STENCIL_TEST):f(e.STENCIL_TEST)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&c===r||(e.stencilOp(t,n,r),a=t,s=n,c=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,u=null}}}function s(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<r;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}function c(){D(0,0,0,1),N(1),U(0),d(e.DEPTH_TEST),_(ao),M(!1),S(yi),d(e.CULL_FACE),d(e.BLEND),v(Di)}function u(){for(var e=0,t=W.length;e<t;e++)W[e]=0}function l(n){if(W[n]=1,0===X[n]&&(e.enableVertexAttribArray(n),X[n]=1),0!==q[n]){var r=t.get("ANGLE_instanced_arrays");r.vertexAttribDivisorANGLE(n,0),q[n]=0}}function h(t,n,r){W[t]=1,0===X[t]&&(e.enableVertexAttribArray(t),X[t]=1),q[t]!==n&&(r.vertexAttribDivisorANGLE(t,n),q[t]=n)}function p(){for(var t=0,n=X.length;t!==n;++t)X[t]!==W[t]&&(e.disableVertexAttribArray(t),X[t]=0)}function d(t){Y[t]!==!0&&(e.enable(t),Y[t]=!0)}function f(t){Y[t]!==!1&&(e.disable(t),Y[t]=!1)}function m(){if(null===Z&&(Z=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)Z.push(n[r]);return Z}function v(t,r,i,o,a,s,c,u){t!==Ii?d(e.BLEND):f(e.BLEND),t===K&&u===re||(t===Ni?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===Ui?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===Fi?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),K=t,re=u),t===ji?(a=a||r,s=s||i,c=c||o,r===J&&a===ee||(e.blendEquationSeparate(n(r),n(a)),J=r,ee=a),i===Q&&o===$&&s===te&&c===ne||(e.blendFuncSeparate(n(i),n(o),n(s),n(c)),Q=i,$=o,te=s,ne=c)):(J=null,Q=null,$=null,ee=null,te=null,ne=null)}function g(e){z.setMask(e)}function y(e){G.setTest(e)}function b(e){G.setMask(e)}function _(e){G.setFunc(e)}function w(e){V.setTest(e)}function x(e){V.setMask(e)}function T(e,t,n){V.setFunc(e,t,n)}function E(e,t,n){V.setOp(e,t,n)}function M(t){ie!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),ie=t)}function S(t){t!==gi?(d(e.CULL_FACE),t!==oe&&(t===yi?e.cullFace(e.BACK):t===bi?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):f(e.CULL_FACE),oe=t}function R(t){t!==ae&&(e.lineWidth(t),ae=t)}function C(t,n,r){t?(d(e.POLYGON_OFFSET_FILL),se===n&&ce===r||(e.polygonOffset(n,r),se=n,ce=r)):f(e.POLYGON_OFFSET_FILL)}function A(){return ue}function L(t){ue=t,t?d(e.SCISSOR_TEST):f(e.SCISSOR_TEST)}function P(t){void 0===t&&(t=e.TEXTURE0+le-1),he!==t&&(e.activeTexture(t),he=t)}function O(t,n){null===he&&P();var r=pe[he];void 0===r&&(r={type:void 0,texture:void 0},pe[he]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||me[t]),r.type=t,r.texture=n)}function k(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error(e)}}function I(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error(e)}}function D(e,t,n,r){z.setClear(e,t,n,r)}function N(e){G.setClear(e)}function U(e){V.setClear(e)}function F(t){de.equals(t)===!1&&(e.scissor(t.x,t.y,t.z,t.w),de.copy(t))}function j(t){fe.equals(t)===!1&&(e.viewport(t.x,t.y,t.z,t.w),fe.copy(t))}function B(){for(var t=0;t<X.length;t++)1===X[t]&&(e.disableVertexAttribArray(t),X[t]=0);Y={},Z=null,he=null,pe={},K=null,ie=null,oe=null,z.reset(),G.reset(),V.reset()}var z=new r,G=new i,V=new a,H=e.getParameter(e.MAX_VERTEX_ATTRIBS),W=new Uint8Array(H),X=new Uint8Array(H),q=new Uint8Array(H),Y={},Z=null,K=null,J=null,Q=null,$=null,ee=null,te=null,ne=null,re=!1,ie=null,oe=null,ae=null,se=null,ce=null,ue=null,le=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),he=null,pe={},de=new o,fe=new o,me={};return me[e.TEXTURE_2D]=s(e.TEXTURE_2D,e.TEXTURE_2D,1),me[e.TEXTURE_CUBE_MAP]=s(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:z,depth:G,stencil:V},init:c,initAttributes:u,enableAttribute:l,enableAttributeAndDivisor:h,disableUnusedAttributes:p,enable:d,disable:f,getCompressedTextureFormats:m,setBlending:v,setColorWrite:g,setDepthTest:y,setDepthWrite:b,setDepthFunc:_,setStencilTest:w,setStencilWrite:x,setStencilFunc:T,setStencilOp:E,setFlipSided:M,setCullFace:S,setLineWidth:R,setPolygonOffset:C,getScissorTest:A,setScissorTest:L,activeTexture:P,bindTexture:O,compressedTexImage2D:k,texImage2D:I,clearColor:D,clearDepth:N,clearStencil:U,scissor:F,viewport:j,reset:B}}function ot(e,t,n){function r(){if(void 0!==o)return o;var n=t.get("EXT_texture_filter_anisotropic");return o=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var c=n.logarithmicDepthBuffer===!0&&!!t.get("EXT_frag_depth"),u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),d=e.getParameter(e.MAX_VERTEX_ATTRIBS),f=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),g=l>0,y=!!t.get("OES_texture_float"),b=g&&y;return{getMaxAnisotropy:r,getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:l,maxTextureSize:h,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:b}}function at(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=e.getExtension("WEBGL_compressed_texture_etc1");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function st(){function e(){u.value!==r&&(u.value=r,u.needsUpdate=i>0),n.numPlanes=i,n.numIntersection=0}function t(e,t,r,i){var o=null!==e?e.length:0,a=null;if(0!==o){if(a=u.value,i!==!0||null===a){var l=r+4*o,h=t.matrixWorldInverse;c.getNormalMatrix(h),(null===a||a.length<l)&&(a=new Float32Array(l));for(var p=0,d=r;p!==o;++p,d+=4)s.copy(e[p]).applyMatrix4(h,c),s.normal.toArray(a,d),a[d+3]=s.constant}u.value=a,u.needsUpdate=!0}return n.numPlanes=o,a}var n=this,r=null,i=0,o=!1,a=!1,s=new re,c=new ne,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,n,a){var s=0!==e.length||n||0!==i||o;return o=n,r=t(e,a,0),i=e.length,s},this.beginShadows=function(){a=!0,t(null)},this.endShadows=function(){a=!1,e()},this.setState=function(n,s,c,l,h,p){if(!o||null===n||0===n.length||a&&!c)a?t(null):e();else{var d=a?0:i,f=4*d,m=h.clippingState||null;u.value=m,m=t(n,l,f,p);for(var v=0;v!==f;++v)m[v]=r[v];h.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=d}}}function ct(e){function t(){return null===he?Me:1}function n(e,t,n,r){q===!0&&(e*=r,t*=r,n*=r),Je.clearColor(e,t,n,r)}function r(){Je.init(),Je.scissor(ge.copy(Se).multiplyScalar(Me)),Je.viewport(be.copy(Ce).multiplyScalar(Me)),n(we.r,we.g,we.b,xe)}function i(){le=null,ve=null,me="",de=-1,Je.reset()}function a(e){e.preventDefault(),i(),r(),Qe.clear()}function s(e){var t=e.target;t.removeEventListener("dispose",s),c(t)}function c(e){h(e),Qe.delete(e)}function h(e){var t=Qe.get(e).program;e.program=void 0,void 0!==t&&ut.releaseProgram(t)}function p(e,t,n,r){var i;if(n&&n.isInstancedBufferGeometry&&(i=Ze.get("ANGLE_instanced_arrays"),null===i))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===r&&(r=0),Je.initAttributes();var o=n.attributes,a=t.getAttributes(),s=e.defaultAttributeValues;for(var c in a){var u=a[c];if(u>=0){var l=o[c];if(void 0!==l){var h=qe.FLOAT,p=l.array,d=l.normalized;p instanceof Float32Array?h=qe.FLOAT:p instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):p instanceof Uint16Array?h=qe.UNSIGNED_SHORT:p instanceof Int16Array?h=qe.SHORT:p instanceof Uint32Array?h=qe.UNSIGNED_INT:p instanceof Int32Array?h=qe.INT:p instanceof Int8Array?h=qe.BYTE:p instanceof Uint8Array&&(h=qe.UNSIGNED_BYTE);var f=l.itemSize,m=ct.getAttributeBuffer(l);if(l.isInterleavedBufferAttribute){
var v=l.data,g=v.stride,y=l.offset;v&&v.isInstancedInterleavedBuffer?(Je.enableAttributeAndDivisor(u,v.meshPerAttribute,i),void 0===n.maxInstancedCount&&(n.maxInstancedCount=v.meshPerAttribute*v.count)):Je.enableAttribute(u),qe.bindBuffer(qe.ARRAY_BUFFER,m),qe.vertexAttribPointer(u,f,h,d,g*v.array.BYTES_PER_ELEMENT,(r*g+y)*v.array.BYTES_PER_ELEMENT)}else l.isInstancedBufferAttribute?(Je.enableAttributeAndDivisor(u,l.meshPerAttribute,i),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):Je.enableAttribute(u),qe.bindBuffer(qe.ARRAY_BUFFER,m),qe.vertexAttribPointer(u,f,h,d,0,r*f*l.array.BYTES_PER_ELEMENT)}else if(void 0!==s){var b=s[c];if(void 0!==b)switch(b.length){case 2:qe.vertexAttrib2fv(u,b);break;case 3:qe.vertexAttrib3fv(u,b);break;case 4:qe.vertexAttrib4fv(u,b);break;default:qe.vertexAttrib1fv(u,b)}}}}Je.disableUnusedAttributes()}function d(e,t){return Math.abs(t[0])-Math.abs(e[0])}function f(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.program&&t.material.program&&e.material.program!==t.material.program?e.material.program.id-t.material.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function m(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function v(e,t,n,r,i){var o,a;n.transparent?(o=ne,a=++re):(o=$,a=++ee);var s=o[a];void 0!==s?(s.id=e.id,s.object=e,s.geometry=t,s.material=n,s.z=He.z,s.group=i):(s={id:e.id,object:e,geometry:t,material:n,z:He.z,group:i},o.push(s))}function g(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Ge.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),b(Ge)}function y(e){return Ge.center.set(0,0,0),Ge.radius=.7071067811865476,Ge.applyMatrix4(e.matrixWorld),b(Ge)}function b(e){if(!ke.intersectsSphere(e))return!1;var t=je.numPlanes;if(0===t)return!0;var n=ue.clippingPlanes,r=e.center,i=-e.radius,o=0;do if(n[o].distanceToPoint(r)<i)return!1;while(++o!==t);return!0}function _(e,t){if(e.visible!==!1){var n=0!==(e.layers.mask&t.layers.mask);if(n)if(e.isLight)J.push(e);else if(e.isSprite)e.frustumCulled!==!1&&y(e)!==!0||se.push(e);else if(e.isLensFlare)ce.push(e);else if(e.isImmediateRenderObject)ue.sortObjects===!0&&(He.setFromMatrixPosition(e.matrixWorld),He.applyProjection(Ve)),v(e,null,e.material,He.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),e.frustumCulled===!1||g(e)===!0)){var r=e.material;if(r.visible===!0){ue.sortObjects===!0&&(He.setFromMatrixPosition(e.matrixWorld),He.applyProjection(Ve));var i=ct.update(e);if(r.isMultiMaterial)for(var o=i.groups,a=r.materials,s=0,c=o.length;s<c;s++){var u=o[s],l=a[u.materialIndex];l.visible===!0&&v(e,i,l,He.z,u)}else v(e,i,r,He.z,null)}}for(var h=e.children,s=0,c=h.length;s<c;s++)_(h[s],t)}}function w(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,c=a.geometry,u=void 0===r?a.material:r,l=a.group;if(s.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,s.matrixWorld),s.normalMatrix.getNormalMatrix(s.modelViewMatrix),s.onBeforeRender(ue,t,n,c,u,l),s.isImmediateRenderObject){T(u);var h=E(n,t.fog,u,s);me="",s.render(function(e){ue.renderBufferImmediate(e,h,u)})}else ue.renderBufferDirect(n,t.fog,c,u,s,l);s.onAfterRender(ue,t,n,c,u,l)}}function x(e,t,n){var r=Qe.get(e),i=ut.getParameters(e,We,t,je.numPlanes,je.numIntersection,n),o=ut.getProgramCode(e,i),a=r.program,c=!0;if(void 0===a)e.addEventListener("dispose",s);else if(a.code!==o)h(e);else{if(void 0!==i.shaderID)return;c=!1}if(c){if(i.shaderID){var u=Wc[i.shaderID];r.__webglShader={name:e.type,uniforms:Ha.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else r.__webglShader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.__webglShader=r.__webglShader,a=ut.acquireProgram(e,i,o),r.program=a,e.program=a}var l=a.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var p=0;p<ue.maxMorphTargets;p++)l["morphTarget"+p]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var p=0;p<ue.maxMorphNormals;p++)l["morphNormal"+p]>=0&&e.numSupportedMorphNormals++}var d=r.__webglShader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&e.clipping!==!0||(r.numClippingPlanes=je.numPlanes,r.numIntersection=je.numIntersection,d.clippingPlanes=je.uniform),r.fog=t,r.lightsHash=We.hash,e.lights&&(d.ambientLightColor.value=We.ambient,d.directionalLights.value=We.directional,d.spotLights.value=We.spot,d.pointLights.value=We.point,d.hemisphereLights.value=We.hemi,d.directionalShadowMap.value=We.directionalShadowMap,d.directionalShadowMatrix.value=We.directionalShadowMatrix,d.spotShadowMap.value=We.spotShadowMap,d.spotShadowMatrix.value=We.spotShadowMatrix,d.pointShadowMap.value=We.pointShadowMap,d.pointShadowMatrix.value=We.pointShadowMatrix);var f=r.program.getUniforms(),m=W.seqWithValue(f.seq,d);r.uniformsList=m}function T(e){e.side===Ci?Je.disable(qe.CULL_FACE):Je.enable(qe.CULL_FACE),Je.setFlipSided(e.side===Ri),e.transparent===!0?Je.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):Je.setBlending(Ii),Je.setDepthFunc(e.depthFunc),Je.setDepthTest(e.depthTest),Je.setDepthWrite(e.depthWrite),Je.setColorWrite(e.colorWrite),Je.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function E(e,t,n,r){_e=0;var i=Qe.get(n);if(Be&&(ze||e!==ve)){var o=e===ve&&n.id===de;je.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,o)}n.needsUpdate===!1&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:n.lights&&i.lightsHash!==We.hash?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===je.numPlanes&&i.numIntersection===je.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(x(n,t,r),n.needsUpdate=!1);var a=!1,s=!1,c=!1,u=i.program,l=u.getUniforms(),h=i.__webglShader.uniforms;if(u.id!==le&&(qe.useProgram(u.program),le=u.id,a=!0,s=!0,c=!0),n.id!==de&&(de=n.id,s=!0),a||e!==ve){if(l.set(qe,e,"projectionMatrix"),Ke.logarithmicDepthBuffer&&l.setValue(qe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),e!==ve&&(ve=e,s=!0,c=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var p=l.map.cameraPosition;void 0!==p&&p.setValue(qe,He.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&l.setValue(qe,"viewMatrix",e.matrixWorldInverse),l.set(qe,ue,"toneMappingExposure"),l.set(qe,ue,"toneMappingWhitePoint")}if(n.skinning){l.setOptional(qe,r,"bindMatrix"),l.setOptional(qe,r,"bindMatrixInverse");var d=r.skeleton;d&&(Ke.floatVertexTextures&&d.useVertexTexture?(l.set(qe,d,"boneTexture"),l.set(qe,d,"boneTextureWidth"),l.set(qe,d,"boneTextureHeight")):l.setOptional(qe,d,"boneMatrices"))}return s&&(n.lights&&I(h,c),t&&n.fog&&A(h,t),(n.isMeshBasicMaterial||n.isMeshLambertMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.isMeshDepthMaterial)&&M(h,n),n.isLineBasicMaterial?S(h,n):n.isLineDashedMaterial?(S(h,n),R(h,n)):n.isPointsMaterial?C(h,n):n.isMeshLambertMaterial?L(h,n):n.isMeshPhongMaterial?P(h,n):n.isMeshPhysicalMaterial?k(h,n):n.isMeshStandardMaterial?O(h,n):n.isMeshDepthMaterial?n.displacementMap&&(h.displacementMap.value=n.displacementMap,h.displacementScale.value=n.displacementScale,h.displacementBias.value=n.displacementBias):n.isMeshNormalMaterial&&(h.opacity.value=n.opacity),W.upload(qe,i.uniformsList,h,ue)),l.set(qe,r,"modelViewMatrix"),l.set(qe,r,"normalMatrix"),l.setValue(qe,"modelMatrix",r.matrixWorld),u}function M(e,t){e.opacity.value=t.opacity,e.diffuse.value=t.color,t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),e.map.value=t.map,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var n;if(t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n){n.isWebGLRenderTarget&&(n=n.texture);var r=n.offset,i=n.repeat;e.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}function S(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function R(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function C(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*Me,e.scale.value=.5*Ee,e.map.value=t.map,null!==t.map){var n=t.map.offset,r=t.map.repeat;e.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}}function A(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function L(e,t){t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function P(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function O(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function k(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,O(e,t)}function I(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function D(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];i.castShadow&&(We.shadows[t++]=i)}We.shadows.length=t}function N(e,t){var n,r,i,o,a,s,c,u=0,h=0,p=0,d=t.matrixWorldInverse,f=0,m=0,v=0,g=0;for(n=0,r=e.length;n<r;n++)if(i=e[n],o=i.color,a=i.intensity,s=i.distance,c=i.shadow&&i.shadow.map?i.shadow.map.texture:null,i.isAmbientLight)u+=o.r*a,h+=o.g*a,p+=o.b*a;else if(i.isDirectionalLight){var y=lt.get(i);y.color.copy(i.color).multiplyScalar(i.intensity),y.direction.setFromMatrixPosition(i.matrixWorld),He.setFromMatrixPosition(i.target.matrixWorld),y.direction.sub(He),y.direction.transformDirection(d),y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),We.directionalShadowMap[f]=c,We.directionalShadowMatrix[f]=i.shadow.matrix,We.directional[f++]=y}else if(i.isSpotLight){var y=lt.get(i);y.position.setFromMatrixPosition(i.matrixWorld),y.position.applyMatrix4(d),y.color.copy(o).multiplyScalar(a),y.distance=s,y.direction.setFromMatrixPosition(i.matrixWorld),He.setFromMatrixPosition(i.target.matrixWorld),y.direction.sub(He),y.direction.transformDirection(d),y.coneCos=Math.cos(i.angle),y.penumbraCos=Math.cos(i.angle*(1-i.penumbra)),y.decay=0===i.distance?0:i.decay,y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),We.spotShadowMap[v]=c,We.spotShadowMatrix[v]=i.shadow.matrix,We.spot[v++]=y}else if(i.isPointLight){var y=lt.get(i);y.position.setFromMatrixPosition(i.matrixWorld),y.position.applyMatrix4(d),y.color.copy(i.color).multiplyScalar(i.intensity),y.distance=i.distance,y.decay=0===i.distance?0:i.decay,y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),We.pointShadowMap[m]=c,void 0===We.pointShadowMatrix[m]&&(We.pointShadowMatrix[m]=new l),He.setFromMatrixPosition(i.matrixWorld).negate(),We.pointShadowMatrix[m].identity().setPosition(He),We.point[m++]=y}else if(i.isHemisphereLight){var y=lt.get(i);y.direction.setFromMatrixPosition(i.matrixWorld),y.direction.transformDirection(d),y.direction.normalize(),y.skyColor.copy(i.color).multiplyScalar(a),y.groundColor.copy(i.groundColor).multiplyScalar(a),We.hemi[g++]=y}We.ambient[0]=u,We.ambient[1]=h,We.ambient[2]=p,We.directional.length=f,We.spot.length=v,We.point.length=m,We.hemi.length=g,We.hash=f+","+m+","+v+","+g+","+We.shadows.length}function U(){var e=_e;return e>=Ke.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Ke.maxTextures),_e+=1,e}function F(e){var t;if(e===Ao)return qe.REPEAT;if(e===Lo)return qe.CLAMP_TO_EDGE;if(e===Po)return qe.MIRRORED_REPEAT;if(e===ko)return qe.NEAREST;if(e===Io)return qe.NEAREST_MIPMAP_NEAREST;if(e===Do)return qe.NEAREST_MIPMAP_LINEAR;if(e===No)return qe.LINEAR;if(e===Uo)return qe.LINEAR_MIPMAP_NEAREST;if(e===Fo)return qe.LINEAR_MIPMAP_LINEAR;if(e===Bo)return qe.UNSIGNED_BYTE;if(e===Yo)return qe.UNSIGNED_SHORT_4_4_4_4;if(e===Zo)return qe.UNSIGNED_SHORT_5_5_5_1;if(e===Ko)return qe.UNSIGNED_SHORT_5_6_5;if(e===zo)return qe.BYTE;if(e===Go)return qe.SHORT;if(e===Vo)return qe.UNSIGNED_SHORT;if(e===Ho)return qe.INT;if(e===Wo)return qe.UNSIGNED_INT;if(e===Xo)return qe.FLOAT;if(e===qo&&(t=Ze.get("OES_texture_half_float"),null!==t))return t.HALF_FLOAT_OES;if(e===Qo)return qe.ALPHA;if(e===$o)return qe.RGB;if(e===ea)return qe.RGBA;if(e===ta)return qe.LUMINANCE;if(e===na)return qe.LUMINANCE_ALPHA;if(e===ia)return qe.DEPTH_COMPONENT;if(e===oa)return qe.DEPTH_STENCIL;if(e===zi)return qe.FUNC_ADD;if(e===Gi)return qe.FUNC_SUBTRACT;if(e===Vi)return qe.FUNC_REVERSE_SUBTRACT;if(e===Xi)return qe.ZERO;if(e===qi)return qe.ONE;if(e===Yi)return qe.SRC_COLOR;if(e===Zi)return qe.ONE_MINUS_SRC_COLOR;if(e===Ki)return qe.SRC_ALPHA;if(e===Ji)return qe.ONE_MINUS_SRC_ALPHA;if(e===Qi)return qe.DST_ALPHA;if(e===$i)return qe.ONE_MINUS_DST_ALPHA;if(e===eo)return qe.DST_COLOR;if(e===to)return qe.ONE_MINUS_DST_COLOR;if(e===no)return qe.SRC_ALPHA_SATURATE;if((e===aa||e===sa||e===ca||e===ua)&&(t=Ze.get("WEBGL_compressed_texture_s3tc"),null!==t)){if(e===aa)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===sa)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===ca)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===ua)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===la||e===ha||e===pa||e===da)&&(t=Ze.get("WEBGL_compressed_texture_pvrtc"),null!==t)){if(e===la)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===ha)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===pa)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===da)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===fa&&(t=Ze.get("WEBGL_compressed_texture_etc1"),null!==t))return t.COMPRESSED_RGB_ETC1_WEBGL;if((e===Hi||e===Wi)&&(t=Ze.get("EXT_blend_minmax"),null!==t)){if(e===Hi)return t.MIN_EXT;if(e===Wi)return t.MAX_EXT}return e===Jo&&(t=Ze.get("WEBGL_depth_texture"),null!==t)?t.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer",mi),e=e||{};var j=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),B=void 0!==e.context?e.context:null,z=void 0!==e.alpha&&e.alpha,G=void 0===e.depth||e.depth,V=void 0===e.stencil||e.stencil,H=void 0!==e.antialias&&e.antialias,q=void 0===e.premultipliedAlpha||e.premultipliedAlpha,K=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,J=[],$=[],ee=-1,ne=[],re=-1,ae=new Float32Array(8),se=[],ce=[];this.domElement=j,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=vo,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ue=this,le=null,he=null,pe=null,de=-1,me="",ve=null,ge=new o,ye=null,be=new o,_e=0,we=new X(0),xe=0,Te=j.width,Ee=j.height,Me=1,Se=new o(0,0,Te,Ee),Re=!1,Ce=new o(0,0,Te,Ee),ke=new ie,je=new st,Be=!1,ze=!1,Ge=new te,Ve=new l,He=new u,We={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Xe={calls:0,vertices:0,faces:0,points:0};this.info={render:Xe,memory:{geometries:0,textures:0},programs:null};var qe;try{var Ye={alpha:z,depth:G,stencil:V,antialias:H,premultipliedAlpha:q,preserveDrawingBuffer:K};if(qe=B||j.getContext("webgl",Ye)||j.getContext("experimental-webgl",Ye),null===qe)throw null!==j.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===qe.getShaderPrecisionFormat&&(qe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),j.addEventListener("webglcontextlost",a,!1)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var Ze=new at(qe);Ze.get("WEBGL_depth_texture"),Ze.get("OES_texture_float"),Ze.get("OES_texture_float_linear"),Ze.get("OES_texture_half_float"),Ze.get("OES_texture_half_float_linear"),Ze.get("OES_standard_derivatives"),Ze.get("ANGLE_instanced_arrays"),Ze.get("OES_element_index_uint")&&(Ae.MaxIndex=4294967296);var Ke=new ot(qe,Ze,e),Je=new it(qe,Ze,F),Qe=new rt,et=new nt(qe,Ze,Je,Qe,Ke,F,this.info),ct=new tt(qe,Qe,this.info),ut=new $e(this,Ke),lt=new Fe;this.info.programs=ut.programs;var ht=new Ue(qe,Ze,Xe),pt=new Ne(qe,Ze,Xe),dt=new De(-1,1,1,-1,0,1),ft=new Ie,mt=new Le(new Oe(2,2),new fe({depthTest:!1,depthWrite:!1,fog:!1})),vt=Wc.cube,gt=new Le(new Pe(5,5,5),new Q({uniforms:vt.uniforms,vertexShader:vt.vertexShader,fragmentShader:vt.fragmentShader,side:Ri,depthTest:!1,depthWrite:!1,fog:!1}));r(),this.context=qe,this.capabilities=Ke,this.extensions=Ze,this.properties=Qe,this.state=Je;var yt=new oe(this,We,ct,Ke);this.shadowMap=yt;var bt=new Z(this,se),_t=new Y(this,ce);this.getContext=function(){return qe},this.getContextAttributes=function(){return qe.getContextAttributes()},this.forceContextLoss=function(){Ze.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return Ke.getMaxAnisotropy()},this.getPrecision=function(){return Ke.precision},this.getPixelRatio=function(){return Me},this.setPixelRatio=function(e){void 0!==e&&(Me=e,this.setSize(Ce.z,Ce.w,!1))},this.getSize=function(){return{width:Te,height:Ee}},this.setSize=function(e,t,n){Te=e,Ee=t,j.width=e*Me,j.height=t*Me,n!==!1&&(j.style.width=e+"px",j.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,n,r){Je.viewport(Ce.set(e,t,n,r))},this.setScissor=function(e,t,n,r){Je.scissor(Se.set(e,t,n,r))},this.setScissorTest=function(e){Je.setScissorTest(Re=e)},this.getClearColor=function(){return we},this.setClearColor=function(e,t){we.set(e),xe=void 0!==t?t:1,n(we.r,we.g,we.b,xe)},this.getClearAlpha=function(){return xe},this.setClearAlpha=function(e){xe=e,n(we.r,we.g,we.b,xe)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=qe.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=qe.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=qe.STENCIL_BUFFER_BIT),qe.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.resetGLState=i,this.dispose=function(){ne=[],re=-1,$=[],ee=-1,j.removeEventListener("webglcontextlost",a,!1)},this.renderBufferImmediate=function(e,t,n){Je.initAttributes();var r=Qe.get(e);e.hasPositions&&!r.position&&(r.position=qe.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=qe.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=qe.createBuffer()),e.hasColors&&!r.color&&(r.color=qe.createBuffer());var i=t.getAttributes();if(e.hasPositions&&(qe.bindBuffer(qe.ARRAY_BUFFER,r.position),qe.bufferData(qe.ARRAY_BUFFER,e.positionArray,qe.DYNAMIC_DRAW),Je.enableAttribute(i.position),qe.vertexAttribPointer(i.position,3,qe.FLOAT,!1,0,0)),e.hasNormals){if(qe.bindBuffer(qe.ARRAY_BUFFER,r.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&n.shading===Ai)for(var o=0,a=3*e.count;o<a;o+=9){var s=e.normalArray,c=(s[o+0]+s[o+3]+s[o+6])/3,u=(s[o+1]+s[o+4]+s[o+7])/3,l=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=c,s[o+1]=u,s[o+2]=l,s[o+3]=c,s[o+4]=u,s[o+5]=l,s[o+6]=c,s[o+7]=u,s[o+8]=l}qe.bufferData(qe.ARRAY_BUFFER,e.normalArray,qe.DYNAMIC_DRAW),Je.enableAttribute(i.normal),qe.vertexAttribPointer(i.normal,3,qe.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(qe.bindBuffer(qe.ARRAY_BUFFER,r.uv),qe.bufferData(qe.ARRAY_BUFFER,e.uvArray,qe.DYNAMIC_DRAW),Je.enableAttribute(i.uv),qe.vertexAttribPointer(i.uv,2,qe.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==Pi&&(qe.bindBuffer(qe.ARRAY_BUFFER,r.color),qe.bufferData(qe.ARRAY_BUFFER,e.colorArray,qe.DYNAMIC_DRAW),Je.enableAttribute(i.color),qe.vertexAttribPointer(i.color,3,qe.FLOAT,!1,0,0)),Je.disableUnusedAttributes(),qe.drawArrays(qe.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,n,r,i,o,a){T(i);var s=E(e,n,i,o),c=!1,u=r.id+"_"+s.id+"_"+i.wireframe;u!==me&&(me=u,c=!0);var l=o.morphTargetInfluences;if(void 0!==l){for(var h=[],f=0,m=l.length;f<m;f++){var v=l[f];h.push([v,f])}h.sort(d),h.length>8&&(h.length=8);for(var g=r.morphAttributes,f=0,m=h.length;f<m;f++){var v=h[f];if(ae[f]=v[0],0!==v[0]){var y=v[1];i.morphTargets===!0&&g.position&&r.addAttribute("morphTarget"+f,g.position[y]),i.morphNormals===!0&&g.normal&&r.addAttribute("morphNormal"+f,g.normal[y])}else i.morphTargets===!0&&r.removeAttribute("morphTarget"+f),i.morphNormals===!0&&r.removeAttribute("morphNormal"+f)}for(var f=h.length,b=ae.length;f<b;f++)ae[f]=0;s.getUniforms().setValue(qe,"morphTargetInfluences",ae),c=!0}var y=r.index,_=r.attributes.position,w=1;i.wireframe===!0&&(y=ct.getWireframeAttribute(r),w=2);var x;null!==y?(x=pt,x.setIndex(y)):x=ht,c&&(p(i,s,r),null!==y&&qe.bindBuffer(qe.ELEMENT_ARRAY_BUFFER,ct.getAttributeBuffer(y)));var M=0;null!==y?M=y.count:void 0!==_&&(M=_.count);var S=r.drawRange.start*w,R=r.drawRange.count*w,C=null!==a?a.start*w:0,A=null!==a?a.count*w:1/0,L=Math.max(S,C),P=Math.min(M,S+R,C+A)-1,O=Math.max(0,P-L+1);if(0!==O){if(o.isMesh)if(i.wireframe===!0)Je.setLineWidth(i.wireframeLinewidth*t()),x.setMode(qe.LINES);else switch(o.drawMode){case Ea:x.setMode(qe.TRIANGLES);break;case Ma:x.setMode(qe.TRIANGLE_STRIP);break;case Sa:x.setMode(qe.TRIANGLE_FAN)}else if(o.isLine){var k=i.linewidth;void 0===k&&(k=1),Je.setLineWidth(k*t()),o.isLineSegments?x.setMode(qe.LINES):x.setMode(qe.LINE_STRIP)}else o.isPoints&&x.setMode(qe.POINTS);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&x.renderInstances(r,L,O):x.render(L,O)}},this.render=function(e,t,r,i){if(void 0!==t&&t.isCamera!==!0)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");me="",de=-1,ve=null,e.autoUpdate===!0&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),Ve.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ke.setFromMatrix(Ve),J.length=0,ee=-1,re=-1,se.length=0,ce.length=0,ze=this.localClippingEnabled,Be=je.init(this.clippingPlanes,ze,t),_(e,t),$.length=ee+1,ne.length=re+1,ue.sortObjects===!0&&($.sort(f),ne.sort(m)),Be&&je.beginShadows(),D(J),yt.render(e,t),N(J,t),Be&&je.endShadows(),Xe.calls=0,Xe.vertices=0,Xe.faces=0,Xe.points=0,void 0===r&&(r=null),this.setRenderTarget(r);var o=e.background;if(null===o?n(we.r,we.g,we.b,xe):o&&o.isColor&&(n(o.r,o.g,o.b,1),i=!0),(this.autoClear||i)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),o&&o.isCubeTexture?(ft.projectionMatrix.copy(t.projectionMatrix),ft.matrixWorld.extractRotation(t.matrixWorld),ft.matrixWorldInverse.getInverse(ft.matrixWorld),gt.material.uniforms.tCube.value=o,gt.modelViewMatrix.multiplyMatrices(ft.matrixWorldInverse,gt.matrixWorld),ct.update(gt),ue.renderBufferDirect(ft,null,gt.geometry,gt.material,gt,null)):o&&o.isTexture&&(mt.material.map=o,ct.update(mt),ue.renderBufferDirect(dt,null,mt.geometry,mt.material,mt,null)),e.overrideMaterial){var a=e.overrideMaterial;w($,e,t,a),w(ne,e,t,a)}else Je.setBlending(Ii),w($,e,t),w(ne,e,t);bt.render(e,t),_t.render(e,t,be),r&&et.updateRenderTargetMipmap(r),Je.setDepthTest(!0),Je.setDepthWrite(!0),Je.setColorWrite(!0)},this.setFaceCulling=function(e,t){Je.setCullFace(e),Je.setFlipSided(t===wi)},this.allocTextureUnit=U,this.setTexture2D=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),et.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),et.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?et.setTextureCube(t,n):et.setTextureCubeDynamic(t,n)}}(),this.getCurrentRenderTarget=function(){return he},this.setRenderTarget=function(e){he=e,e&&void 0===Qe.get(e).__webglFramebuffer&&et.setupRenderTarget(e);var t,n=e&&e.isWebGLRenderTargetCube;if(e){var r=Qe.get(e);t=n?r.__webglFramebuffer[e.activeCubeFace]:r.__webglFramebuffer,ge.copy(e.scissor),ye=e.scissorTest,be.copy(e.viewport)}else t=null,ge.copy(Se).multiplyScalar(Me),ye=Re,be.copy(Ce).multiplyScalar(Me);if(pe!==t&&(qe.bindFramebuffer(qe.FRAMEBUFFER,t),pe=t),Je.scissor(ge),Je.setScissorTest(ye),Je.viewport(be),n){var i=Qe.get(e.texture);qe.framebufferTexture2D(qe.FRAMEBUFFER,qe.COLOR_ATTACHMENT0,qe.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,i,o){if((e&&e.isWebGLRenderTarget)===!1)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var a=Qe.get(e).__webglFramebuffer;if(a){var s=!1;a!==pe&&(qe.bindFramebuffer(qe.FRAMEBUFFER,a),s=!0);try{var c=e.texture,u=c.format,l=c.type;if(u!==ea&&F(u)!==qe.getParameter(qe.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l===Bo||F(l)===qe.getParameter(qe.IMPLEMENTATION_COLOR_READ_TYPE)||l===Xo&&(Ze.get("OES_texture_float")||Ze.get("WEBGL_color_buffer_float"))||l===qo&&Ze.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");qe.checkFramebufferStatus(qe.FRAMEBUFFER)===qe.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&qe.readPixels(t,n,r,i,F(u),F(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&qe.bindFramebuffer(qe.FRAMEBUFFER,pe)}}}}function ut(e,t){this.name="",this.color=new X(e),this.density=void 0!==t?t:25e-5}function lt(e,t,n){this.name="",this.color=new X(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function ht(){ue.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function pt(e,t,n,r,i){ue.call(this),this.lensFlares=[],this.positionScreen=new u,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,n,r,i)}function dt(e){K.call(this),this.type="SpriteMaterial",this.color=new X(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function ft(e){ue.call(this),this.type="Sprite",this.material=void 0!==e?e:new dt}function mt(){ue.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function vt(e,t,n,i,o,a,s,c,u,l,h,p){r.call(this,null,a,s,c,u,l,i,o,h,p),this.image={data:e,width:t,height:n},this.magFilter=void 0!==u?u:ko,this.minFilter=void 0!==l?l:ko,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function gt(e,t,n){if(this.useVertexTexture=void 0===n||n,this.identityMatrix=new l,e=e||[],this.bones=e.slice(0),this.useVertexTexture){var r=Math.sqrt(4*this.bones.length);r=Ua.nextPowerOfTwo(Math.ceil(r)),r=Math.max(r,4),this.boneTextureWidth=r,this.boneTextureHeight=r,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new vt(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,ea,Xo)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var i=0,o=this.bones.length;i<o;i++)this.boneInverses.push(new l)}}function yt(e){ue.call(this),this.type="Bone",this.skin=e}function bt(e,t,n){Le.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new l,this.bindMatrixInverse=new l;var r=[];if(this.geometry&&void 0!==this.geometry.bones){for(var i,o,a=0,s=this.geometry.bones.length;a<s;++a)o=this.geometry.bones[a],i=new yt(this),r.push(i),i.name=o.name,i.position.fromArray(o.pos),i.quaternion.fromArray(o.rotq),void 0!==o.scl&&i.scale.fromArray(o.scl);for(var a=0,s=this.geometry.bones.length;a<s;++a)o=this.geometry.bones[a],o.parent!==-1&&null!==o.parent&&void 0!==r[o.parent]?r[o.parent].add(r[a]):this.add(r[a])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new gt(r,void 0,n),this.matrixWorld)}function _t(e){K.call(this),this.type="LineBasicMaterial",this.color=new X(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function wt(e,t,n){return 1===n?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new xt(e,t)):(ue.call(this),this.type="Line",this.geometry=void 0!==e?e:new Ae,void(this.material=void 0!==t?t:new _t({color:16777215*Math.random()})))}function xt(e,t){wt.call(this,e,t),this.type="LineSegments"}function Tt(e){K.call(this),this.type="PointsMaterial",this.color=new X(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function Et(e,t){ue.call(this),this.type="Points",this.geometry=void 0!==e?e:new Ae,this.material=void 0!==t?t:new Tt({color:16777215*Math.random()})}function Mt(){ue.call(this),this.type="Group"}function St(e,t,n,i,o,a,s,c,u){function l(){requestAnimationFrame(l),e.readyState>=e.HAVE_CURRENT_DATA&&(h.needsUpdate=!0)}r.call(this,e,t,n,i,o,a,s,c,u),this.generateMipmaps=!1;var h=this;l()}function Rt(e,t,n,i,o,a,s,c,u,l,h,p){r.call(this,null,a,s,c,u,l,i,o,h,p),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Ct(e,t,n,i,o,a,s,c,u){r.call(this,e,t,n,i,o,a,s,c,u),this.needsUpdate=!0}function At(e,t,n,i,o,a,s,c,u,l){if(l=void 0!==l?l:ia,l!==ia&&l!==oa)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r.call(this,null,i,o,a,s,c,l,n,u),this.image={width:e,height:t},this.type=void 0!==n?n:Vo,this.magFilter=void 0!==s?s:ko,
this.minFilter=void 0!==c?c:ko,this.flipY=!1,this.generateMipmaps=!1}function Lt(e){function t(e,t){return e-t}Ae.call(this);var n=[0,0],r={},i=["a","b","c"];if(e&&e.isGeometry){for(var o=e.vertices,a=e.faces,s=0,c=new Uint32Array(6*a.length),u=0,l=a.length;u<l;u++)for(var h=a[u],p=0;p<3;p++){n[0]=h[i[p]],n[1]=h[i[(p+1)%3]],n.sort(t);var d=n.toString();void 0===r[d]&&(c[2*s]=n[0],c[2*s+1]=n[1],r[d]=!0,s++)}for(var f=new Float32Array(2*s*3),u=0,l=s;u<l;u++)for(var p=0;p<2;p++){var m=o[c[2*u+p]],v=6*u+3*p;f[v+0]=m.x,f[v+1]=m.y,f[v+2]=m.z}this.addAttribute("position",new me(f,3))}else if(e&&e.isBufferGeometry)if(null!==e.index){var g=e.index.array,o=e.attributes.position,y=e.groups,s=0;0===y.length&&e.addGroup(0,g.length);for(var c=new Uint32Array(2*g.length),b=0,_=y.length;b<_;++b)for(var w=y[b],x=w.start,T=w.count,u=x,E=x+T;u<E;u+=3)for(var p=0;p<3;p++){n[0]=g[u+p],n[1]=g[u+(p+1)%3],n.sort(t);var d=n.toString();void 0===r[d]&&(c[2*s]=n[0],c[2*s+1]=n[1],r[d]=!0,s++)}for(var f=new Float32Array(2*s*3),u=0,l=s;u<l;u++)for(var p=0;p<2;p++){var v=6*u+3*p,M=c[2*u+p];f[v+0]=o.getX(M),f[v+1]=o.getY(M),f[v+2]=o.getZ(M)}this.addAttribute("position",new me(f,3))}else{for(var o=e.attributes.position.array,s=o.length/3,S=s/3,f=new Float32Array(2*s*3),u=0,l=S;u<l;u++)for(var p=0;p<3;p++){var v=18*u+6*p,R=9*u+3*p;f[v+0]=o[R],f[v+1]=o[R+1],f[v+2]=o[R+2];var M=9*u+3*((p+1)%3);f[v+3]=o[M],f[v+4]=o[M+1],f[v+5]=o[M+2]}this.addAttribute("position",new me(f,3))}}function Pt(e,t,n){Ae.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o,a,s,c=[],u=[],l=t+1;for(r=0;r<=n;r++)for(s=r/n,i=0;i<=t;i++)a=i/t,o=e(a,s),c.push(o.x,o.y,o.z),u.push(a,s);var h,p,d,f,m=[];for(r=0;r<n;r++)for(i=0;i<t;i++)h=r*l+i,p=r*l+i+1,d=(r+1)*l+i+1,f=(r+1)*l+i,m.push(h,p,f),m.push(p,d,f);this.setIndex((m.length>65535?xe:_e)(m,1)),this.addAttribute("position",Te(c,3)),this.addAttribute("uv",Te(u,2)),this.computeVertexNormals()}function Ot(e,t,n){Se.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Pt(e,t,n)),this.mergeVertices()}function kt(e,t,r,i){function o(e){for(var n=new u,r=new u,i=new u,o=0;o<t.length;o+=3)p(t[o+0],n),p(t[o+1],r),p(t[o+2],i),a(n,r,i,e)}function a(e,t,n,r){var i,o,a=Math.pow(2,r),s=[];for(i=0;i<=a;i++){s[i]=[];var c=e.clone().lerp(n,i/a),u=t.clone().lerp(n,i/a),l=a-i;for(o=0;o<=l;o++)0===o&&i===a?s[i][o]=c:s[i][o]=c.clone().lerp(u,o/l)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var p=Math.floor(o/2);o%2===0?(h(s[i][p+1]),h(s[i+1][p]),h(s[i][p])):(h(s[i][p+1]),h(s[i+1][p+1]),h(s[i+1][p]))}}function s(e){for(var t=new u,n=0;n<g.length;n+=3)t.x=g[n+0],t.y=g[n+1],t.z=g[n+2],t.normalize().multiplyScalar(e),g[n+0]=t.x,g[n+1]=t.y,g[n+2]=t.z}function c(){for(var e=new u,t=0;t<g.length;t+=3){e.x=g[t+0],e.y=g[t+1],e.z=g[t+2];var n=m(e)/2/Math.PI+.5,r=v(e)/Math.PI+.5;y.push(n,1-r)}d(),l()}function l(){for(var e=0;e<y.length;e+=6){var t=y[e+0],n=y[e+2],r=y[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(y[e+0]+=1),n<.2&&(y[e+2]+=1),r<.2&&(y[e+4]+=1))}}function h(e){g.push(e.x,e.y,e.z)}function p(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function d(){for(var e=new u,t=new u,r=new u,i=new u,o=new n,a=new n,s=new n,c=0,l=0;c<g.length;c+=9,l+=6){e.set(g[c+0],g[c+1],g[c+2]),t.set(g[c+3],g[c+4],g[c+5]),r.set(g[c+6],g[c+7],g[c+8]),o.set(y[l+0],y[l+1]),a.set(y[l+2],y[l+3]),s.set(y[l+4],y[l+5]),i.copy(e).add(t).add(r).divideScalar(3);var h=m(i);f(o,l+0,e,h),f(a,l+2,t,h),f(s,l+4,r,h)}}function f(e,t,n,r){r<0&&1===e.x&&(y[t]=e.x-1),0===n.x&&0===n.z&&(y[t]=r/2/Math.PI+.5)}function m(e){return Math.atan2(e.z,-e.x)}function v(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}Ae.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i},r=r||1,i=i||0;var g=[],y=[];o(i),s(r),c(),this.addAttribute("position",Te(g,3)),this.addAttribute("normal",Te(g.slice(),3)),this.addAttribute("uv",Te(y,2)),this.normalizeNormals(),this.boundingSphere=new te(new u,r)}function It(e,t){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];kt.call(this,n,r,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Dt(e,t){Se.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new It(e,t)),this.mergeVertices()}function Nt(e,t){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];kt.call(this,n,r,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ut(e,t){Se.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Nt(e,t)),this.mergeVertices()}function Ft(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];kt.call(this,r,i,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function jt(e,t){Se.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ft(e,t)),this.mergeVertices()}function Bt(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];kt.call(this,i,o,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function zt(e,t){Se.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Bt(e,t)),this.mergeVertices()}function Gt(e,t,n,r){Se.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new kt(e,t,n,r)),this.mergeVertices()}function Vt(e,t,r,i,o){function a(){for(p=0;p<t;p++)s(p);s(o===!1?t:0),l(),c()}function s(n){var o=e.getPointAt(n/t),a=h.normals[n],s=h.binormals[n];for(d=0;d<=i;d++){var c=d/i*Math.PI*2,u=Math.sin(c),l=-Math.cos(c);m.x=l*a.x+u*s.x,m.y=l*a.y+u*s.y,m.z=l*a.z+u*s.z,m.normalize(),y.push(m.x,m.y,m.z),f.x=o.x+r*m.x,f.y=o.y+r*m.y,f.z=o.z+r*m.z,g.push(f.x,f.y,f.z)}}function c(){for(d=1;d<=t;d++)for(p=1;p<=i;p++){var e=(i+1)*(d-1)+(p-1),n=(i+1)*d+(p-1),r=(i+1)*d+p,o=(i+1)*(d-1)+p;_.push(e,n,o),_.push(n,r,o)}}function l(){for(p=0;p<=t;p++)for(d=0;d<=i;d++)v.x=p/t,v.y=d/i,b.push(v.x,v.y)}Ae.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:o},t=t||64,r=r||1,i=i||8,o=o||!1;var h=e.computeFrenetFrames(t,o);this.tangents=h.tangents,this.normals=h.normals,this.binormals=h.binormals;var p,d,f=new u,m=new u,v=new n,g=[],y=[],b=[],_=[];a(),this.setIndex((_.length>65535?xe:_e)(_,1)),this.addAttribute("position",Te(g,3)),this.addAttribute("normal",Te(y,3)),this.addAttribute("uv",Te(b,2))}function Ht(e,t,n,r,i,o){Se.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Vt(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Wt(e,t,r,i,o,a){function s(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,c=Math.cos(s);i.x=r*(2+c)*.5*o,i.y=r*(2+c)*a*.5,i.z=r*Math.sin(s)*.5}Ae.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:o,q:a},e=e||100,t=t||40,r=Math.floor(r)||64,i=Math.floor(i)||8,o=o||2,a=a||3;var c,l,h=(i+1)*(r+1),p=i*r*2*3,d=new me(new(p>65535?Uint32Array:Uint16Array)(p),1),f=new me(new Float32Array(3*h),3),m=new me(new Float32Array(3*h),3),v=new me(new Float32Array(2*h),2),g=0,y=0,b=new u,_=new u,w=new n,x=new u,T=new u,E=new u,M=new u,S=new u;for(c=0;c<=r;++c){var R=c/r*o*Math.PI*2;for(s(R,o,a,e,x),s(R+.01,o,a,e,T),M.subVectors(T,x),S.addVectors(T,x),E.crossVectors(M,S),S.crossVectors(E,M),E.normalize(),S.normalize(),l=0;l<=i;++l){var C=l/i*Math.PI*2,A=-t*Math.cos(C),L=t*Math.sin(C);b.x=x.x+(A*S.x+L*E.x),b.y=x.y+(A*S.y+L*E.y),b.z=x.z+(A*S.z+L*E.z),f.setXYZ(g,b.x,b.y,b.z),_.subVectors(b,x).normalize(),m.setXYZ(g,_.x,_.y,_.z),w.x=c/r,w.y=l/i,v.setXY(g,w.x,w.y),g++}}for(l=1;l<=r;l++)for(c=1;c<=i;c++){var P=(i+1)*(l-1)+(c-1),O=(i+1)*l+(c-1),k=(i+1)*l+c,I=(i+1)*(l-1)+c;d.setX(y,P),y++,d.setX(y,O),y++,d.setX(y,I),y++,d.setX(y,O),y++,d.setX(y,k),y++,d.setX(y,I),y++}this.setIndex(d),this.addAttribute("position",f),this.addAttribute("normal",m),this.addAttribute("uv",v)}function Xt(e,t,n,r,i,o,a){Se.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Wt(e,t,n,r,i,o)),this.mergeVertices()}function qt(e,t,n,r,i){Ae.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||100,t=t||40,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=(n+1)*(r+1),c=n*r*2*3,l=new(c>65535?Uint32Array:Uint16Array)(c),h=new Float32Array(3*s),p=new Float32Array(3*s),d=new Float32Array(2*s),f=0,m=0,v=0,g=new u,y=new u,b=new u;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var _=a/r*i,w=o/n*Math.PI*2;y.x=(e+t*Math.cos(w))*Math.cos(_),y.y=(e+t*Math.cos(w))*Math.sin(_),y.z=t*Math.sin(w),h[f]=y.x,h[f+1]=y.y,h[f+2]=y.z,g.x=e*Math.cos(_),g.y=e*Math.sin(_),b.subVectors(y,g).normalize(),p[f]=b.x,p[f+1]=b.y,p[f+2]=b.z,d[m]=a/r,d[m+1]=o/n,f+=3,m+=2}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var x=(r+1)*o+a-1,T=(r+1)*(o-1)+a-1,E=(r+1)*(o-1)+a,M=(r+1)*o+a;l[v]=x,l[v+1]=T,l[v+2]=M,l[v+3]=T,l[v+4]=E,l[v+5]=M,v+=6}this.setIndex(new me(l,1)),this.addAttribute("position",new me(h,3)),this.addAttribute("normal",new me(p,3)),this.addAttribute("uv",new me(d,2))}function Yt(e,t,n,r,i){Se.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new qt(e,t,n,r,i))}function Zt(e,t){return"undefined"==typeof e?void(e=[]):(Se.call(this),this.type="ExtrudeGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),void this.computeFaceNormals())}function Kt(e,t){t=t||{};var n=t.font;if((n&&n.isFont)===!1)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Se;var r=n.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Zt.call(this,r,t),this.type="TextGeometry"}function Jt(e,t,n,r,i,o,a){Ae.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||50,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;for(var s=o+a,c=(t+1)*(n+1),l=new me(new Float32Array(3*c),3),h=new me(new Float32Array(3*c),3),p=new me(new Float32Array(2*c),2),d=0,f=[],m=new u,v=0;v<=n;v++){for(var g=[],y=v/n,b=0;b<=t;b++){var _=b/t,w=-e*Math.cos(r+_*i)*Math.sin(o+y*a),x=e*Math.cos(o+y*a),T=e*Math.sin(r+_*i)*Math.sin(o+y*a);m.set(w,x,T).normalize(),l.setXYZ(d,w,x,T),h.setXYZ(d,m.x,m.y,m.z),p.setXY(d,_,1-y),g.push(d),d++}f.push(g)}for(var E=[],v=0;v<n;v++)for(var b=0;b<t;b++){var M=f[v][b+1],S=f[v][b],R=f[v+1][b],C=f[v+1][b+1];(0!==v||o>0)&&E.push(M,S,C),(v!==n-1||s<Math.PI)&&E.push(S,R,C)}this.setIndex(new(l.count>65535?xe:_e)(E,1)),this.addAttribute("position",l),this.addAttribute("normal",h),this.addAttribute("uv",p),this.boundingSphere=new te(new u,e)}function Qt(e,t,n,r,i,o,a){Se.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Jt(e,t,n,r,i,o,a))}function $t(e,t,r,i,o,a){Ae.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:o,thetaLength:a},e=e||20,t=t||50,o=void 0!==o?o:0,a=void 0!==a?a:2*Math.PI,r=void 0!==r?Math.max(3,r):8,i=void 0!==i?Math.max(1,i):1;var s,c,l,h=(r+1)*(i+1),p=r*i*2*3,d=new me(new(p>65535?Uint32Array:Uint16Array)(p),1),f=new me(new Float32Array(3*h),3),m=new me(new Float32Array(3*h),3),v=new me(new Float32Array(2*h),2),g=0,y=0,b=e,_=(t-e)/i,w=new u,x=new n;for(c=0;c<=i;c++){for(l=0;l<=r;l++)s=o+l/r*a,w.x=b*Math.cos(s),w.y=b*Math.sin(s),f.setXYZ(g,w.x,w.y,w.z),m.setXYZ(g,0,0,1),x.x=(w.x/t+1)/2,x.y=(w.y/t+1)/2,v.setXY(g,x.x,x.y),g++;b+=_}for(c=0;c<i;c++){var T=c*(r+1);for(l=0;l<r;l++){s=l+T;var E=s,M=s+r+1,S=s+r+2,R=s+1;d.setX(y,E),y++,d.setX(y,M),y++,d.setX(y,S),y++,d.setX(y,E),y++,d.setX(y,S),y++,d.setX(y,R),y++}}this.setIndex(d),this.addAttribute("position",f),this.addAttribute("normal",m),this.addAttribute("uv",v)}function en(e,t,n,r,i,o){Se.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new $t(e,t,n,r,i,o))}function tn(e,t,n,r){Se.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Oe(e,t,n,r))}function nn(e,t,r,i){Ae.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t)||12,r=r||0,i=i||2*Math.PI,i=Ua.clamp(i,0,2*Math.PI);var o,a,s,c=(t+1)*e.length,l=t*e.length*2*3,h=new me(new(l>65535?Uint32Array:Uint16Array)(l),1),p=new me(new Float32Array(3*c),3),d=new me(new Float32Array(2*c),2),f=0,m=0,v=1/t,g=new u,y=new n;for(a=0;a<=t;a++){var b=r+a*v*i,_=Math.sin(b),w=Math.cos(b);for(s=0;s<=e.length-1;s++)g.x=e[s].x*_,g.y=e[s].y,g.z=e[s].x*w,p.setXYZ(f,g.x,g.y,g.z),y.x=a/t,y.y=s/(e.length-1),d.setXY(f,y.x,y.y),f++}for(a=0;a<t;a++)for(s=0;s<e.length-1;s++){o=s+a*e.length;var x=o,T=o+e.length,E=o+e.length+1,M=o+1;h.setX(m,x),m++,h.setX(m,T),m++,h.setX(m,M),m++,h.setX(m,T),m++,h.setX(m,E),m++,h.setX(m,M),m++}if(this.setIndex(h),this.addAttribute("position",p),this.addAttribute("uv",d),this.computeVertexNormals(),i===2*Math.PI){var S=this.attributes.normal.array,R=new u,C=new u,A=new u;for(o=t*e.length*3,a=0,s=0;a<e.length;a++,s+=3)R.x=S[s+0],R.y=S[s+1],R.z=S[s+2],C.x=S[o+s+0],C.y=S[o+s+1],C.z=S[o+s+2],A.addVectors(R,C).normalize(),S[s+0]=S[o+s+0]=A.x,S[s+1]=S[o+s+1]=A.y,S[s+2]=S[o+s+2]=A.z}}function rn(e,t,n,r){Se.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new nn(e,t,n,r)),this.mergeVertices()}function on(e,t){Se.call(this),this.type="ShapeGeometry",Array.isArray(e)===!1&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()}function an(e,t){function n(e,t){return e-t}Ae.call(this),t=void 0!==t?t:1;var r,i=Math.cos(Ua.DEG2RAD*t),o=[0,0],a={},s=["a","b","c"];e&&e.isBufferGeometry?(r=new Se,r.fromBufferGeometry(e)):r=e.clone(),r.mergeVertices(),r.computeFaceNormals();for(var c=r.vertices,u=r.faces,l=0,h=u.length;l<h;l++)for(var p=u[l],d=0;d<3;d++){o[0]=p[s[d]],o[1]=p[s[(d+1)%3]],o.sort(n);var f=o.toString();void 0===a[f]?a[f]={vert1:o[0],vert2:o[1],face1:l,face2:void 0}:a[f].face2=l}var m=[];for(var f in a){var v=a[f];if(void 0===v.face2||u[v.face1].normal.dot(u[v.face2].normal)<=i){var g=c[v.vert1];m.push(g.x),m.push(g.y),m.push(g.z),g=c[v.vert2],m.push(g.x),m.push(g.y),m.push(g.z)}}this.addAttribute("position",new me(new Float32Array(m),3))}function sn(e,t,r,i,o,a,s,c){function l(){var e=(i+1)*(o+1);return a===!1&&(e+=(i+1)*m+i*m),e}function h(){var e=i*o*2*3;return a===!1&&(e+=i*m*3),e}function p(){var n,a,l=new u,h=new u,p=0,d=(t-e)/r;for(a=0;a<=o;a++){var m=[],v=a/o,g=v*(t-e)+e;for(n=0;n<=i;n++){var R=n/i,C=R*c+s,A=Math.sin(C),L=Math.cos(C);h.x=g*A,h.y=-v*r+M,h.z=g*L,b.setXYZ(x,h.x,h.y,h.z),l.set(A,d,L).normalize(),_.setXYZ(x,l.x,l.y,l.z),w.setXY(x,R,1-v),m.push(x),x++}E.push(m)}for(n=0;n<i;n++)for(a=0;a<o;a++){var P=E[a][n],O=E[a+1][n],k=E[a+1][n+1],I=E[a][n+1];y.setX(T,P),T++,y.setX(T,O),T++,y.setX(T,I),T++,y.setX(T,O),T++,y.setX(T,k),T++,y.setX(T,I),T++,p+=6}f.addGroup(S,p,0),S+=p}function d(r){var o,a,l,h=new n,p=new u,d=0,m=r===!0?e:t,v=r===!0?1:-1;for(a=x,o=1;o<=i;o++)b.setXYZ(x,0,M*v,0),_.setXYZ(x,0,v,0),h.x=.5,h.y=.5,w.setXY(x,h.x,h.y),x++;for(l=x,o=0;o<=i;o++){var g=o/i,E=g*c+s,R=Math.cos(E),C=Math.sin(E);p.x=m*C,p.y=M*v,p.z=m*R,b.setXYZ(x,p.x,p.y,p.z),_.setXYZ(x,0,v,0),h.x=.5*R+.5,h.y=.5*C*v+.5,w.setXY(x,h.x,h.y),x++}for(o=0;o<i;o++){var A=a+o,L=l+o;r===!0?(y.setX(T,L),T++,y.setX(T,L+1),T++,y.setX(T,A),T++):(y.setX(T,L+1),T++,y.setX(T,L),T++,y.setX(T,A),T++),d+=3}f.addGroup(S,d,r===!0?1:2),S+=d}Ae.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:c};var f=this;e=void 0!==e?e:20,t=void 0!==t?t:20,r=void 0!==r?r:100,i=Math.floor(i)||8,o=Math.floor(o)||1,a=void 0!==a&&a,s=void 0!==s?s:0,c=void 0!==c?c:2*Math.PI;var m=0;a===!1&&(e>0&&m++,t>0&&m++);var v=l(),g=h(),y=new me(new(g>65535?Uint32Array:Uint16Array)(g),1),b=new me(new Float32Array(3*v),3),_=new me(new Float32Array(3*v),3),w=new me(new Float32Array(2*v),2),x=0,T=0,E=[],M=r/2,S=0;p(),a===!1&&(e>0&&d(!0),t>0&&d(!1)),this.setIndex(y),this.addAttribute("position",b),this.addAttribute("normal",_),this.addAttribute("uv",w)}function cn(e,t,n,r,i,o,a,s){Se.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new sn(e,t,n,r,i,o,a,s)),this.mergeVertices()}function un(e,t,n,r,i,o,a){cn.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function ln(e,t,n,r,i,o,a){sn.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function hn(e,t,n,r){Ae.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||50,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i=t+2,o=new Float32Array(3*i),a=new Float32Array(3*i),s=new Float32Array(2*i);a[2]=1,s[0]=.5,s[1]=.5;for(var c=0,l=3,h=2;c<=t;c++,l+=3,h+=2){var p=n+c/t*r;o[l]=e*Math.cos(p),o[l+1]=e*Math.sin(p),a[l+2]=1,s[h]=(o[l]/e+1)/2,s[h+1]=(o[l+1]/e+1)/2}for(var d=[],l=1;l<=t;l++)d.push(l,l+1,0);this.setIndex(new me(new Uint16Array(d),1)),this.addAttribute("position",new me(o,3)),this.addAttribute("normal",new me(a,3)),this.addAttribute("uv",new me(s,2)),this.boundingSphere=new te(new u,e)}function pn(e,t,n,r){Se.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new hn(e,t,n,r))}function dn(e,t,n,r,i,o){Se.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Pe(e,t,n,r,i,o)),this.mergeVertices()}function fn(){Q.call(this,{uniforms:Ha.merge([Hc.lights,{opacity:{value:1}}]),vertexShader:Gc.shadow_vert,fragmentShader:Gc.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}}})}function mn(e){Q.call(this,e),this.type="RawShaderMaterial"}function vn(e){this.uuid=Ua.generateUUID(),this.type="MultiMaterial",this.materials=e instanceof Array?e:[],this.visible=!0}function gn(e){K.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new X(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function yn(e){gn.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function bn(e){K.call(this),this.type="MeshPhongMaterial",this.color=new X(16777215),this.specular=new X(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ho,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function _n(e){K.call(this,e),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.morphTargets=!1,this.setValues(e)}function wn(e){K.call(this),this.type="MeshLambertMaterial",this.color=new X(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ho,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function xn(e){K.call(this),this.type="LineDashedMaterial",this.color=new X(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(e)}function Tn(e,t,n){var r=this,i=!1,o=0,a=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,i===!1&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)}}function En(e){this.manager=void 0!==e?e:eu}function Mn(e){this.manager=void 0!==e?e:eu,this._parser=null}function Sn(e){this.manager=void 0!==e?e:eu,this._parser=null}function Rn(e){this.manager=void 0!==e?e:eu}function Cn(e){this.manager=void 0!==e?e:eu}function An(e){this.manager=void 0!==e?e:eu}function Ln(e,t){ue.call(this),this.type="Light",this.color=new X(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Pn(e,t,n){Ln.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ue.DefaultUp),this.updateMatrix(),this.groundColor=new X(t)}function On(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new n(512,512),this.map=null,this.matrix=new l}function kn(){On.call(this,new Ie(50,1,.5,500))}function In(e,t,n,r,i,o){Ln.call(this,e,t),this.type="SpotLight",this.position.copy(ue.DefaultUp),this.updateMatrix(),this.target=new ue,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new kn}function Dn(e,t,n,r){Ln.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new On(new Ie(90,1,.5,500))}function Nn(e){On.call(this,new De(-5,5,5,-5,.5,500))}function Un(e,t){Ln.call(this,e,t),this.type="DirectionalLight",this.position.copy(ue.DefaultUp),this.updateMatrix(),this.target=new ue,this.shadow=new Nn}function Fn(e,t){Ln.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function jn(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Bn(e,t,n,r){jn.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function zn(e,t,n,r){jn.call(this,e,t,n,r)}function Gn(e,t,n,r){jn.call(this,e,t,n,r)}function Vn(e,t,n,r){if(void 0===e)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keyframes in track named "+e);this.name=e,this.times=nu.convertArray(t,this.TimeBufferType),this.values=nu.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function Hn(e,t,n,r){Vn.call(this,e,t,n,r)}function Wn(e,t,n,r){jn.call(this,e,t,n,r)}function Xn(e,t,n,r){Vn.call(this,e,t,n,r)}function qn(e,t,n,r){Vn.call(this,e,t,n,r)}function Yn(e,t,n,r){Vn.call(this,e,t,n,r)}function Zn(e,t,n){Vn.call(this,e,t,n)}function Kn(e,t,n,r){Vn.call(this,e,t,n,r)}function Jn(e,t,n,r){Vn.apply(this,arguments)}function Qn(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Ua.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function $n(e){this.manager=void 0!==e?e:eu,this.textures={}}function er(e){this.manager=void 0!==e?e:eu}function tr(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function nr(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:eu,this.withCredentials=!1}function rr(e){this.manager=void 0!==e?e:eu,this.texturePath=""}function ir(){}function or(e,t){this.v1=e,this.v2=t}function ar(){this.curves=[],this.autoClose=!1}function sr(e,t,n,r,i,o,a,s){this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s||0}function cr(e){this.points=void 0===e?[]:e}function ur(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r}function lr(e,t,n){this.v0=e,this.v1=t,this.v2=n}function hr(){pr.apply(this,arguments),this.holes=[]}function pr(e){ar.call(this),this.currentPoint=new n,e&&this.fromPoints(e)}function dr(){this.subPaths=[],this.currentPath=null}function fr(e){this.data=e}function mr(e){this.manager=void 0!==e?e:eu}function vr(){return void 0===au&&(au=new(window.AudioContext||window.webkitAudioContext)),au}function gr(e){this.manager=void 0!==e?e:eu}function yr(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ie,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ie,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function br(e,t,n){ue.call(this),this.type="CubeCamera";var r=90,i=1,o=new Ie(r,i,e,t);o.up.set(0,-1,0),o.lookAt(new u(1,0,0)),this.add(o);var a=new Ie(r,i,e,t);a.up.set(0,-1,0),a.lookAt(new u(-1,0,0)),this.add(a);var c=new Ie(r,i,e,t);c.up.set(0,0,1),c.lookAt(new u(0,1,0)),this.add(c);var l=new Ie(r,i,e,t);l.up.set(0,0,-1),l.lookAt(new u(0,-1,0)),this.add(l);var h=new Ie(r,i,e,t);h.up.set(0,-1,0),h.lookAt(new u(0,0,1)),this.add(h);var p=new Ie(r,i,e,t);p.up.set(0,-1,0),p.lookAt(new u(0,0,-1)),this.add(p);var d={format:$o,magFilter:No,minFilter:No};this.renderTarget=new s(n,n,d),this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,o,n),n.activeCubeFace=1,e.render(t,a,n),n.activeCubeFace=2,e.render(t,c,n),n.activeCubeFace=3,e.render(t,l,n),n.activeCubeFace=4,e.render(t,h,n),n.texture.generateMipmaps=r,n.activeCubeFace=5,e.render(t,p,n),e.setRenderTarget(null)}}function _r(){ue.call(this),this.type="AudioListener",this.context=vr(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function wr(e){ue.call(this),this.type="Audio",this.context=e.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function xr(e){wr.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Tr(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Er(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Mr(e,t,n){this.path=t,this.parsedPath=n||Mr.parseTrackName(t),this.node=Mr.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Sr(e){this.uuid=Ua.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Rr(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:wa,endingEnd:wa},s=0;s!==i;++s){var c=r[s].createInterpolant(null);o[s]=c,c.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=va,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Cr(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Ar(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Lr(){Ae.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Pr(e,t,n,r){this.uuid=Ua.generateUUID(),this.data=e,this.itemSize=t,this.offset=n,this.normalized=r===!0}function Or(e,t){this.uuid=Ua.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function kr(e,t,n){Or.call(this,e,t),this.meshPerAttribute=n||1}function Ir(e,t,n){me.call(this,e,t),this.meshPerAttribute=n||1}function Dr(e,t,n,r){this.ray=new ae(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),
this.Points}}})}function Nr(e,t){return e.distance-t.distance}function Ur(e,t,n,r){if(e.visible!==!1&&(e.raycast(t,n),r===!0))for(var i=e.children,o=0,a=i.length;o<a;o++)Ur(i[o],t,n,!0)}function Fr(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function jr(e){function t(e,t,n,r,i,o,a){var s=.5*(n-e),c=.5*(r-t);return(2*(t-n)+s+c)*a+(-3*(t-n)-2*s-c)*o+s*i+t}this.points=e;var n,r,i,o,a,s,c,l,h,p=[],d={x:0,y:0,z:0};this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return n=(this.points.length-1)*e,r=Math.floor(n),i=n-r,p[0]=0===r?r:r-1,p[1]=r,p[2]=r>this.points.length-2?this.points.length-1:r+1,p[3]=r>this.points.length-3?this.points.length-1:r+2,s=this.points[p[0]],c=this.points[p[1]],l=this.points[p[2]],h=this.points[p[3]],o=i*i,a=i*o,d.x=t(s.x,c.x,l.x,h.x,i,o,a),d.y=t(s.y,c.y,l.y,h.y,i,o,a),d.z=t(s.z,c.z,l.z,h.z,i,o,a),d},this.getControlPointsArray=function(){var e,t,n=this.points.length,r=[];for(e=0;e<n;e++)t=this.points[e],r[e]=[t.x,t.y,t.z];return r},this.getLength=function(e){var t,n,r,i,o=0,a=0,s=0,c=new u,l=new u,h=[],p=0;for(h[0]=0,e||(e=100),r=this.points.length*e,c.copy(this.points[0]),t=1;t<r;t++)n=t/r,i=this.getPoint(n),l.copy(i),p+=l.distanceTo(c),c.copy(i),o=(this.points.length-1)*n,a=Math.floor(o),a!==s&&(h[a]=p,s=a);return h[h.length]=p,{chunks:h,total:p}},this.reparametrizeByArcLength=function(e){var t,n,r,i,o,a,s,c,l=[],h=new u,p=this.getLength();for(l.push(h.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(a=p.chunks[t]-p.chunks[t-1],s=Math.ceil(e*a/p.total),i=(t-1)/(this.points.length-1),o=t/(this.points.length-1),n=1;n<s-1;n++)r=i+n*(1/s)*(o-i),c=this.getPoint(r),l.push(h.copy(c).clone());l.push(h.copy(this.points[t]).clone())}this.points=l}}function Br(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function zr(e,t){Le.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length,r="__default",i=0,o=n-1,a=n/1;this.createAnimation(r,i,o,a),this.setAnimationWeight(r,1)}function Gr(e){ue.call(this),this.material=e,this.render=function(e){}}function Vr(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var c=new Ae,u=new Te(2*a*3,3);c.addAttribute("position",u),xt.call(this,c,new _t({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Hr(e){ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;for(var t=new Ae,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,i=1,o=32;r<o;r++,i++){var a=r/o*Math.PI*2,s=i/o*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}t.addAttribute("position",new Te(n,3));var c=new _t({fog:!1});this.cone=new xt(t,c),this.add(this.cone),this.update()}function Wr(e){this.bones=this.getBoneList(e);for(var t=new Se,n=0;n<this.bones.length;n++){var r=this.bones[n];r.parent&&r.parent.isBone&&(t.vertices.push(new u),t.vertices.push(new u),t.colors.push(new X(0,0,1)),t.colors.push(new X(0,1,0)))}t.dynamic=!0;var i=new _t({vertexColors:ki,depthTest:!1,depthWrite:!1,transparent:!0});xt.call(this,t,i),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Xr(e,t){this.light=e,this.light.updateMatrixWorld();var n=new Jt(t,4,2),r=new fe({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),Le.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function qr(e,t){ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new X,new X];var n=new Qt(t,4,2);n.rotateX(-Math.PI/2);for(var r=0,i=8;r<i;r++)n.faces[r].color=this.colors[r<4?0:1];var o=new fe({vertexColors:Oi,wireframe:!0});this.lightSphere=new Le(n,o),this.add(this.lightSphere),this.update()}function Yr(e,t,n,r){t=t||1,n=new X(void 0!==n?n:4473924),r=new X(void 0!==r?r:8947848);for(var i=t/2,o=2*e/t,a=[],s=[],c=0,u=0,l=-e;c<=t;c++,l+=o){a.push(-e,0,l,e,0,l),a.push(l,0,-e,l,0,e);var h=c===i?n:r;h.toArray(s,u),u+=3,h.toArray(s,u),u+=3,h.toArray(s,u),u+=3,h.toArray(s,u),u+=3}var p=new Ae;p.addAttribute("position",new Te(a,3)),p.addAttribute("color",new Te(s,3));var d=new _t({vertexColors:ki});xt.call(this,p,d)}function Zr(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new Ae,u=new Te(2*a*3,3);c.addAttribute("position",u),xt.call(this,c,new _t({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Kr(e,t){ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,void 0===t&&(t=1);var n=new Ae;n.addAttribute("position",new Te([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new _t({fog:!1});this.add(new wt(n,r)),n=new Ae,n.addAttribute("position",new Te([0,0,0,0,0,1],3)),this.add(new wt(n,r)),this.update()}function Jr(e){function t(e,t,r){n(e,r),n(t,r)}function n(e,t){r.vertices.push(new u),r.colors.push(new X(t)),void 0===o[e]&&(o[e]=[]),o[e].push(r.vertices.length-1)}var r=new Se,i=new _t({color:16777215,vertexColors:Oi}),o={},a=16755200,s=16711680,c=43775,l=16777215,h=3355443;t("n1","n2",a),t("n2","n4",a),t("n4","n3",a),t("n3","n1",a),t("f1","f2",a),t("f2","f4",a),t("f4","f3",a),t("f3","f1",a),t("n1","f1",a),t("n2","f2",a),t("n3","f3",a),t("n4","f4",a),t("p","n1",s),t("p","n2",s),t("p","n3",s),t("p","n4",s),t("u1","u2",c),t("u2","u3",c),t("u3","u1",c),t("c","t",l),t("p","c",h),t("cn1","cn2",h),t("cn3","cn4",h),t("cf1","cf2",h),t("cf3","cf4",h),xt.call(this,r,i),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Qr(e,t){var n=void 0!==t?t:8947848;this.object=e,this.box=new ee,Le.call(this,new dn(1,1,1),new fe({color:n,wireframe:!0}))}function $r(e,t){void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Ae;i.setIndex(new me(n,1)),i.addAttribute("position",new me(r,3)),xt.call(this,i,new _t({color:t})),void 0!==e&&this.update(e)}function ei(e,t,n,r,i,o){ue.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),this.position.copy(t),this.line=new wt(su,new _t({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Le(cu,new fe({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function ti(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),r=new Ae;r.addAttribute("position",new me(t,3)),r.addAttribute("color",new me(n,3));var i=new _t({vertexColors:ki});xt.call(this,r,i)}function ni(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3."),uu.call(this,e),this.type="catmullrom",this.closed=!0}function ri(e,t,n,r,i,o){sr.call(this,e,t,n,n,r,i,o)}function ii(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new de(e,t,n,i,o,a)}function oi(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Et(e,t)}function ai(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Et(e,t)}function si(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Tt(e)}function ci(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Tt(e)}function ui(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Tt(e)}function li(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new u(e,t,n)}function hi(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new xt(new an(e.geometry),new _t({color:void 0!==t?t:16777215}))}function pi(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new xt(new Lt(e.geometry),new _t({color:void 0!==t?t:16777215}))}function di(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(e,t){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function fi(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),void 0===Object.assign&&!function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}}(),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&n[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners,r=n[e];if(void 0!==r){var i=r.indexOf(t);i!==-1&&r.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;var r=[],i=0,o=n.length;for(i=0;i<o;i++)r[i]=n[i];for(i=0;i<o;i++)r[i].call(this,e)}}}});var mi="82",vi={LEFT:0,MIDDLE:1,RIGHT:2},gi=0,yi=1,bi=2,_i=3,wi=0,xi=1,Ti=0,Ei=1,Mi=2,Si=0,Ri=1,Ci=2,Ai=1,Li=2,Pi=0,Oi=1,ki=2,Ii=0,Di=1,Ni=2,Ui=3,Fi=4,ji=5,Bi={NoBlending:Ii,NormalBlending:Di,AdditiveBlending:Ni,SubtractiveBlending:Ui,MultiplyBlending:Fi,CustomBlending:ji},zi=100,Gi=101,Vi=102,Hi=103,Wi=104,Xi=200,qi=201,Yi=202,Zi=203,Ki=204,Ji=205,Qi=206,$i=207,eo=208,to=209,no=210,ro=0,io=1,oo=2,ao=3,so=4,co=5,uo=6,lo=7,ho=0,po=1,fo=2,mo=0,vo=1,go=2,yo=3,bo=4,_o=300,wo=301,xo=302,To=303,Eo=304,Mo=305,So=306,Ro=307,Co={UVMapping:_o,CubeReflectionMapping:wo,CubeRefractionMapping:xo,EquirectangularReflectionMapping:To,EquirectangularRefractionMapping:Eo,SphericalReflectionMapping:Mo,CubeUVReflectionMapping:So,CubeUVRefractionMapping:Ro},Ao=1e3,Lo=1001,Po=1002,Oo={RepeatWrapping:Ao,ClampToEdgeWrapping:Lo,MirroredRepeatWrapping:Po},ko=1003,Io=1004,Do=1005,No=1006,Uo=1007,Fo=1008,jo={NearestFilter:ko,NearestMipMapNearestFilter:Io,NearestMipMapLinearFilter:Do,LinearFilter:No,LinearMipMapNearestFilter:Uo,LinearMipMapLinearFilter:Fo},Bo=1009,zo=1010,Go=1011,Vo=1012,Ho=1013,Wo=1014,Xo=1015,qo=1016,Yo=1017,Zo=1018,Ko=1019,Jo=1020,Qo=1021,$o=1022,ea=1023,ta=1024,na=1025,ra=ea,ia=1026,oa=1027,aa=2001,sa=2002,ca=2003,ua=2004,la=2100,ha=2101,pa=2102,da=2103,fa=2151,ma=2200,va=2201,ga=2202,ya=2300,ba=2301,_a=2302,wa=2400,xa=2401,Ta=2402,Ea=0,Ma=1,Sa=2,Ra=3e3,Ca=3001,Aa=3007,La=3002,Pa=3003,Oa=3004,ka=3005,Ia=3006,Da=3200,Na=3201,Ua={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),r=0;return function(){for(var i=0;i<36;i++)8===i||13===i||18===i||23===i?n[i]="-":14===i?n[i]="4":(r<=2&&(r=33554432+16777216*Math.random()|0),e=15&r,r>>=4,n[i]=t[19===i?3&e|8:e]);return n.join("")}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))},random16:function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Ua.DEG2RAD},radToDeg:function(e){return e*Ua.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}};n.prototype={constructor:n,isVector2:!0,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e,t;return function(r,i){return void 0===e&&(e=new n,t=new n),e.set(r,r),t.set(i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}},r.DEFAULT_IMAGE=void 0,r.DEFAULT_MAPPING=_o,r.prototype={constructor:r,isTexture:!0,set needsUpdate(e){e===!0&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){function t(e){var t;return void 0!==e.toDataURL?t=e:(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height)),t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=Ua.generateUUID()),void 0===e.images[r.uuid]&&(e.images[r.uuid]={uuid:r.uuid,url:t(r)}),n.image=r.uuid}return e.textures[this.uuid]=n,n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===_o){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||e.x>1)switch(this.wrapS){case Ao:e.x=e.x-Math.floor(e.x);break;case Lo:e.x=e.x<0?0:1;break;case Po:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Ao:e.y=e.y-Math.floor(e.y);break;case Lo:e.y=e.y<0?0:1;break;case Po:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}},Object.assign(r.prototype,t.prototype);var Fa=0;o.prototype={constructor:o,isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=.01,a=.1,s=e.elements,c=s[0],u=s[4],l=s[8],h=s[1],p=s[5],d=s[9],f=s[2],m=s[6],v=s[10];if(Math.abs(u-h)<o&&Math.abs(l-f)<o&&Math.abs(d-m)<o){if(Math.abs(u+h)<a&&Math.abs(l+f)<a&&Math.abs(d+m)<a&&Math.abs(c+p+v-3)<a)return this.set(1,0,0,0),this;t=Math.PI;var g=(c+1)/2,y=(p+1)/2,b=(v+1)/2,_=(u+h)/4,w=(l+f)/4,x=(d+m)/4;return g>y&&g>b?g<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(g),r=_/n,i=w/n):y>b?y<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(y),n=_/r,i=x/r):b<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(b),n=w/i,r=x/i),this.set(n,r,i,t),this}var T=Math.sqrt((m-d)*(m-d)+(l-f)*(l-f)+(h-u)*(h-u));return Math.abs(T)<.001&&(T=1),this.x=(m-d)/T,this.y=(l-f)/T,this.z=(h-u)/T,this.w=Math.acos((c+p+v-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new o,t=new o),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this.w=e.array[t+3],this}},Object.assign(a.prototype,t.prototype,{isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.isWebGLRenderTargetCube=!0,c.prototype={constructor:c,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if((e&&e.isEuler)===!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=Math.cos(e._x/2),r=Math.cos(e._y/2),i=Math.cos(e._z/2),o=Math.sin(e._x/2),a=Math.sin(e._y/2),s=Math.sin(e._z/2),c=e.order;return"XYZ"===c?(this._x=o*r*i+n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i-o*a*s):"YXZ"===c?(this._x=o*r*i+n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i+o*a*s):"ZXY"===c?(this._x=o*r*i-n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i-o*a*s):"ZYX"===c?(this._x=o*r*i-n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i+o*a*s):"YZX"===c?(this._x=o*r*i+n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i-o*a*s):"XZY"===c&&(this._x=o*r*i-n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i+o*a*s),t!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],c=n[9],u=n[2],l=n[6],h=n[10],p=r+s+h;return p>0?(t=.5/Math.sqrt(p+1),this._w=.25/t,this._x=(l-c)*t,this._y=(o-u)*t,this._z=(a-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(l-c)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+u)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(o-u)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(c+l)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+u)/t,this._y=(c+l)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t,n=1e-6;return function(r,i){return void 0===e&&(e=new u),t=r.dot(i)+1,t<n?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,i),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,c=t._z,u=t._w;return this._x=n*u+o*a+r*c-i*s,this._y=r*u+o*s+i*a-n*c,this._z=i*u+o*c+n*s-r*a,this._w=o*u-n*a-r*s-i*c,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var c=Math.atan2(s,a),u=Math.sin((1-t)*c)/s,l=Math.sin(t*c)/s;return this._w=o*u+this._w*l,this._x=n*u+this._x*l,this._y=r*u+this._y*l,this._z=i*u+this._z*l,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},Object.assign(c,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],c=n[r+1],u=n[r+2],l=n[r+3],h=i[o+0],p=i[o+1],d=i[o+2],f=i[o+3];if(l!==f||s!==h||c!==p||u!==d){var m=1-a,v=s*h+c*p+u*d+l*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,v*g);m=Math.sin(m*_)/b,a=Math.sin(a*_)/b}var w=a*g;if(s=s*m+h*w,c=c*m+p*w,u=u*m+d*w,l=l*m+f*w,m===1-a){var x=1/Math.sqrt(s*s+c*c+u*u+l*l);s*=x,c*=x,u*=x,l*=x}}e[t]=s,e[t+1]=c,e[t+2]=u,e[t+3]=l}}),u.prototype={constructor:u,isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,
this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return(t&&t.isEuler)===!1&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new c),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e;return function(t,n){return void 0===e&&(e=new c),this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12],this.y=i[1]*t+i[5]*n+i[9]*r+i[13],this.z=i[2]*t+i[6]*n+i[10]*r+i[14],this},applyProjection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,c=s*t+o*r-a*n,u=s*n+a*t-i*r,l=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=c*s+h*-i+u*-a-l*-o,this.y=u*s+h*-o+l*-i-c*-a,this.z=l*s+h*-a+c*-o-u*-i,this},project:function(){var e;return function(t){return void 0===e&&(e=new l),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyProjection(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new l),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyProjection(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new u,t=new u),e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,r=this.y,i=this.z;return this.x=r*e.z-i*e.y,this.y=i*e.x-n*e.z,this.z=n*e.y-r*e.x,this},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new u),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new u),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Ua.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){if("number"==typeof e){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var n=e;e=t,t=n}return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this}},l.prototype={constructor:l,isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,c,u,l,h,p,d,f,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=c,v[6]=u,v[10]=l,v[14]=h,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new l).fromArray(this.elements)},copy:function(e){return this.elements.set(e.elements),this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e;return function(t){void 0===e&&(e=new u);var n=this.elements,r=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,this}}(),makeRotationFromEuler:function(e){(e&&e.isEuler)===!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),c=Math.sin(r),u=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){var h=o*u,p=o*l,d=a*u,f=a*l;t[0]=s*u,t[4]=-s*l,t[8]=c,t[1]=p+d*c,t[5]=h-f*c,t[9]=-a*s,t[2]=f-h*c,t[6]=d+p*c,t[10]=o*s}else if("YXZ"===e.order){var m=s*u,v=s*l,g=c*u,y=c*l;t[0]=m+y*a,t[4]=g*a-v,t[8]=o*c,t[1]=o*l,t[5]=o*u,t[9]=-a,t[2]=v*a-g,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){var m=s*u,v=s*l,g=c*u,y=c*l;t[0]=m-y*a,t[4]=-o*l,t[8]=g+v*a,t[1]=v+g*a,t[5]=o*u,t[9]=y-m*a,t[2]=-o*c,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){var h=o*u,p=o*l,d=a*u,f=a*l;t[0]=s*u,t[4]=d*c-p,t[8]=h*c+f,t[1]=s*l,t[5]=f*c+h,t[9]=p*c-d,t[2]=-c,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var b=o*s,_=o*c,w=a*s,x=a*c;t[0]=s*u,t[4]=x-b*l,t[8]=w*l+_,t[1]=l,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=_*l+w,t[10]=b-x*l}else if("XZY"===e.order){var b=o*s,_=o*c,w=a*s,x=a*c;t[0]=s*u,t[4]=-l,t[8]=c*u,t[1]=b*l+x,t[5]=o*u,t[9]=_*l-w,t[2]=w*l-_,t[6]=a*u,t[10]=x*l+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,o=e.w,a=n+n,s=r+r,c=i+i,u=n*a,l=n*s,h=n*c,p=r*s,d=r*c,f=i*c,m=o*a,v=o*s,g=o*c;return t[0]=1-(p+f),t[4]=l-g,t[8]=h+v,t[1]=l+g,t[5]=1-(u+f),t[9]=d-m,t[2]=h-v,t[6]=d+m,t[10]=1-(u+p),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e,t,n;return function(r,i,o){void 0===e&&(e=new u,t=new u,n=new u);var a=this.elements;return n.subVectors(r,i).normalize(),0===n.lengthSq()&&(n.z=1),e.crossVectors(o,n).normalize(),0===e.lengthSq()&&(n.z+=1e-4,e.crossVectors(o,n).normalize()),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],c=n[12],u=n[1],l=n[5],h=n[9],p=n[13],d=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],_=n[15],w=r[0],x=r[4],T=r[8],E=r[12],M=r[1],S=r[5],R=r[9],C=r[13],A=r[2],L=r[6],P=r[10],O=r[14],k=r[3],I=r[7],D=r[11],N=r[15];return i[0]=o*w+a*M+s*A+c*k,i[4]=o*x+a*S+s*L+c*I,i[8]=o*T+a*R+s*P+c*D,i[12]=o*E+a*C+s*O+c*N,i[1]=u*w+l*M+h*A+p*k,i[5]=u*x+l*S+h*L+p*I,i[9]=u*T+l*R+h*P+p*D,i[13]=u*E+l*C+h*O+p*N,i[2]=d*w+f*M+m*A+v*k,i[6]=d*x+f*S+m*L+v*I,i[10]=d*T+f*R+m*P+v*D,i[14]=d*E+f*C+m*O+v*N,i[3]=g*w+y*M+b*A+_*k,i[7]=g*x+y*S+b*L+_*I,i[11]=g*T+y*R+b*P+_*D,i[15]=g*E+y*C+b*O+_*N,this},multiplyToArray:function(e,t,n){var r=this.elements;return this.multiplyMatrices(e,t),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToVector3Array:function(){var e;return function(t,n,r){void 0===e&&(e=new u),void 0===n&&(n=0),void 0===r&&(r=t.length);for(var i=0,o=n;i<r;i+=3,o+=3)e.fromArray(t,o),e.applyMatrix4(this),e.toArray(t,o);return t}}(),applyToBuffer:function(){var e;return function(t,n,r){void 0===e&&(e=new u),void 0===n&&(n=0),void 0===r&&(r=t.length/t.itemSize);for(var i=0,o=n;i<r;i++,o++)e.x=t.getX(o),e.y=t.getY(o),e.z=t.getZ(o),e.applyMatrix4(this),t.setXYZ(o,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],c=e[13],u=e[2],l=e[6],h=e[10],p=e[14],d=e[3],f=e[7],m=e[11],v=e[15];return d*(+i*s*l-r*c*l-i*a*h+n*c*h+r*a*p-n*s*p)+f*(+t*s*p-t*c*h+i*o*h-r*o*p+r*c*u-i*s*u)+m*(+t*c*l-t*a*p-i*o*l+n*o*p+i*a*u-n*c*u)+v*(-r*a*u-t*s*l+t*a*h+r*o*l-n*o*h+n*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new u),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],c=r[4],u=r[5],l=r[6],h=r[7],p=r[8],d=r[9],f=r[10],m=r[11],v=r[12],g=r[13],y=r[14],b=r[15],_=d*y*h-g*f*h+g*l*m-u*y*m-d*l*b+u*f*b,w=v*f*h-p*y*h-v*l*m+c*y*m+p*l*b-c*f*b,x=p*g*h-v*d*h+v*u*m-c*g*m-p*u*b+c*d*b,T=v*d*l-p*g*l-v*u*f+c*g*f+p*u*y-c*d*y,E=i*_+o*w+a*x+s*T;if(0===E){var M="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t===!0)throw new Error(M);return console.warn(M),this.identity()}var S=1/E;return n[0]=_*S,n[1]=(g*f*s-d*y*s-g*a*m+o*y*m+d*a*b-o*f*b)*S,n[2]=(u*y*s-g*l*s+g*a*h-o*y*h-u*a*b+o*l*b)*S,n[3]=(d*l*s-u*f*s-d*a*h+o*f*h+u*a*m-o*l*m)*S,n[4]=w*S,n[5]=(p*y*s-v*f*s+v*a*m-i*y*m-p*a*b+i*f*b)*S,n[6]=(v*l*s-c*y*s-v*a*h+i*y*h+c*a*b-i*l*b)*S,n[7]=(c*f*s-p*l*s+p*a*h-i*f*h-c*a*m+i*l*m)*S,n[8]=x*S,n[9]=(v*d*s-p*g*s-v*o*m+i*g*m+p*o*b-i*d*b)*S,n[10]=(c*g*s-v*u*s+v*o*h-i*g*h-c*o*b+i*u*b)*S,n[11]=(p*u*s-c*d*s-p*o*h+i*d*h+c*o*m-i*u*m)*S,n[12]=T*S,n[13]=(p*g*a-v*d*a+v*o*f-i*g*f-p*o*y+i*d*y)*S,n[14]=(v*u*a-c*g*a-v*o*l+i*g*l+c*o*y-i*u*y)*S,n[15]=(c*d*a-p*u*a+p*o*l-i*d*l-c*o*f+i*u*f)*S,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,c=i*o,u=i*a;return this.set(c*o+n,c*a-r*s,c*s+r*a,0,c*a+r*s,u*a+n,u*s-r*o,0,c*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e,t;return function(n,r,i){void 0===e&&(e=new u,t=new l);var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),c=e.set(o[8],o[9],o[10]).length(),h=this.determinant();h<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.elements.set(this.elements);var p=1/a,d=1/s,f=1/c;return t.elements[0]*=p,t.elements[1]*=p,t.elements[2]*=p,t.elements[4]*=d,t.elements[5]*=d,t.elements[6]*=d,t.elements[8]*=f,t.elements[9]*=f,t.elements[10]*=f,r.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=c,this}}(),makeFrustum:function(e,t,n,r,i,o){var a=this.elements,s=2*i/(t-e),c=2*i/(r-n),u=(t+e)/(t-e),l=(r+n)/(r-n),h=-(o+i)/(o-i),p=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(e,t,n,r){var i=n*Math.tan(Ua.DEG2RAD*e*.5),o=-i,a=o*t,s=i*t;return this.makeFrustum(a,s,o,i,n,r)},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),c=1/(n-r),u=1/(o-i),l=(t+e)*s,h=(n+r)*c,p=(o+i)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}},h.prototype=Object.create(r.prototype),h.prototype.constructor=h,h.prototype.isCubeTexture=!0,Object.defineProperty(h.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var ja=new r,Ba=new h,za=[],Ga=[];G.prototype.setValue=function(e,t){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var o=n[r];o.setValue(e,t[o.id])}};var Va=/([\w\d_]+)(\])?(\[|\.)?/g;W.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},W.prototype.set=function(e,t,n){var r=this.map[n];void 0!==r&&r.setValue(e,t[n],this.renderer)},W.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},W.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];s.needsUpdate!==!1&&a.setValue(e,s.value,r)}},W.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var Ha={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e){t[n]={};for(var r in e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}},Wa="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",Xa="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",qa="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",Ya="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",Za="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",Ka="\nvec3 transformed = vec3( position );\n",Ja="\nvec3 objectNormal = vec3( normal );\n",Qa="bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",$a="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",es="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",ts="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",ns="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",rs="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",is="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",os="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",as="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",ss="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",cs="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n",us="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",ls="#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",hs="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",ps="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",ds="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",fs="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",ms="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",vs="\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",gs="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",ys="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",bs="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",_s="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",ws="#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",xs="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",Ts="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",Es="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",Ms="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",Ss="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\n\t\t\tdirectLight.color = pointLight.color;\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#include <normal_flip>\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#include <normal_flip>\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",Rs="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",Cs="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",As="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",Ls="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",Ps="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",Os="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",ks="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",Is="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",Ds="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",Ns="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",Us="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",Fs="#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",js="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",Bs="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",zs="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Gs="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",Vs="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",Hs="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",Ws="#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",Xs="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",qs="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",Ys="vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",Zs="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",Ks="#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",Js="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",Qs="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",$s="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",ec="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",tc="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",nc="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",rc="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",ic="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",oc="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",ac="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",sc="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",cc="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",uc="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",lc="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",hc="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",pc="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",dc="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",fc="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",mc="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",vc="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",gc="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",yc="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",bc="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",_c="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",wc="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",xc="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",Tc="varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",Ec="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",Mc="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",Sc="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Rc="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",Cc="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight;\n\treflectedLight.directDiffuse = vec3( 0.0 );\n\treflectedLight.directSpecular = vec3( 0.0 );\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\n\treflectedLight.indirectSpecular = vec3( 0.0 );\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Ac="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",Lc="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Pc="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",Oc="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",kc="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",Ic="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Dc="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",Nc="uniform float opacity;\nvarying vec3 vNormal;\n#include <common>\n#include <packing>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\n\t#include <logdepthbuf_fragment>\n}\n",Uc="varying vec3 vNormal;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvNormal = normalize( normalMatrix * normal );\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",Fc="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",jc="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",Bc="uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",zc="#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",Gc={
alphamap_fragment:Wa,alphamap_pars_fragment:Xa,alphatest_fragment:qa,aomap_fragment:Ya,aomap_pars_fragment:Za,begin_vertex:Ka,beginnormal_vertex:Ja,bsdfs:Qa,bumpmap_pars_fragment:$a,clipping_planes_fragment:es,clipping_planes_pars_fragment:ts,clipping_planes_pars_vertex:ns,clipping_planes_vertex:rs,color_fragment:is,color_pars_fragment:os,color_pars_vertex:as,color_vertex:ss,common:cs,cube_uv_reflection_fragment:us,defaultnormal_vertex:ls,displacementmap_pars_vertex:hs,displacementmap_vertex:ps,emissivemap_fragment:ds,emissivemap_pars_fragment:fs,encodings_fragment:ms,encodings_pars_fragment:vs,envmap_fragment:gs,envmap_pars_fragment:ys,envmap_pars_vertex:bs,envmap_vertex:_s,fog_fragment:ws,fog_pars_fragment:xs,lightmap_fragment:Ts,lightmap_pars_fragment:Es,lights_lambert_vertex:Ms,lights_pars:Ss,lights_phong_fragment:Rs,lights_phong_pars_fragment:Cs,lights_physical_fragment:As,lights_physical_pars_fragment:Ls,lights_template:Ps,logdepthbuf_fragment:Os,logdepthbuf_pars_fragment:ks,logdepthbuf_pars_vertex:Is,logdepthbuf_vertex:Ds,map_fragment:Ns,map_pars_fragment:Us,map_particle_fragment:Fs,map_particle_pars_fragment:js,metalnessmap_fragment:Bs,metalnessmap_pars_fragment:zs,morphnormal_vertex:Gs,morphtarget_pars_vertex:Vs,morphtarget_vertex:Hs,normal_flip:Ws,normal_fragment:Xs,normalmap_pars_fragment:qs,packing:Ys,premultiplied_alpha_fragment:Zs,project_vertex:Ks,roughnessmap_fragment:Js,roughnessmap_pars_fragment:Qs,shadowmap_pars_fragment:$s,shadowmap_pars_vertex:ec,shadowmap_vertex:tc,shadowmask_pars_fragment:nc,skinbase_vertex:rc,skinning_pars_vertex:ic,skinning_vertex:oc,skinnormal_vertex:ac,specularmap_fragment:sc,specularmap_pars_fragment:cc,tonemapping_fragment:uc,tonemapping_pars_fragment:lc,uv_pars_fragment:hc,uv_pars_vertex:pc,uv_vertex:dc,uv2_pars_fragment:fc,uv2_pars_vertex:mc,uv2_vertex:vc,worldpos_vertex:gc,cube_frag:yc,cube_vert:bc,depth_frag:_c,depth_vert:wc,distanceRGBA_frag:xc,distanceRGBA_vert:Tc,equirect_frag:Ec,equirect_vert:Mc,linedashed_frag:Sc,linedashed_vert:Rc,meshbasic_frag:Cc,meshbasic_vert:Ac,meshlambert_frag:Lc,meshlambert_vert:Pc,meshphong_frag:Oc,meshphong_vert:kc,meshphysical_frag:Ic,meshphysical_vert:Dc,normal_frag:Nc,normal_vert:Uc,points_frag:Fc,points_vert:jc,shadow_frag:Bc,shadow_vert:zc};X.prototype={constructor:X,isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=Ua.euclideanModulo(t,1),n=Ua.clamp(n,0,1),r=Ua.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=e(o,i,t+1/3),this.g=e(o,i,t),this.b=e(o,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,c=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,c)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=n[1],l=u.length;if(3===l)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}if(e&&e.length>0){var u=Vc[e];void 0!==u?this.setHex(u):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,n,r=e||{h:0,s:0,l:0},i=this.r,o=this.g,a=this.b,s=Math.max(i,o,a),c=Math.min(i,o,a),u=(c+s)/2;if(c===s)t=0,n=0;else{var l=s-c;switch(n=u<=.5?l/(s+c):l/(2-s-c),s){case i:t=(o-a)/l+(o<a?6:0);break;case o:t=(a-i)/l+2;break;case a:t=(i-o)/l+4}t/=6}return r.h=t,r.s=n,r.l=u,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}};var Vc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Hc={common:{diffuse:{value:new X(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new o(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new X(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}}},points:{diffuse:{value:new X(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new o(0,0,1,1)}}},Wc={basic:{uniforms:Ha.merge([Hc.common,Hc.aomap,Hc.fog]),vertexShader:Gc.meshbasic_vert,fragmentShader:Gc.meshbasic_frag},lambert:{uniforms:Ha.merge([Hc.common,Hc.aomap,Hc.lightmap,Hc.emissivemap,Hc.fog,Hc.lights,{emissive:{value:new X(0)}}]),vertexShader:Gc.meshlambert_vert,fragmentShader:Gc.meshlambert_frag},phong:{uniforms:Ha.merge([Hc.common,Hc.aomap,Hc.lightmap,Hc.emissivemap,Hc.bumpmap,Hc.normalmap,Hc.displacementmap,Hc.fog,Hc.lights,{emissive:{value:new X(0)},specular:{value:new X(1118481)},shininess:{value:30}}]),vertexShader:Gc.meshphong_vert,fragmentShader:Gc.meshphong_frag},standard:{uniforms:Ha.merge([Hc.common,Hc.aomap,Hc.lightmap,Hc.emissivemap,Hc.bumpmap,Hc.normalmap,Hc.displacementmap,Hc.roughnessmap,Hc.metalnessmap,Hc.fog,Hc.lights,{emissive:{value:new X(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Gc.meshphysical_vert,fragmentShader:Gc.meshphysical_frag},points:{uniforms:Ha.merge([Hc.points,Hc.fog]),vertexShader:Gc.points_vert,fragmentShader:Gc.points_frag},dashed:{uniforms:Ha.merge([Hc.common,Hc.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Gc.linedashed_vert,fragmentShader:Gc.linedashed_frag},depth:{uniforms:Ha.merge([Hc.common,Hc.displacementmap]),vertexShader:Gc.depth_vert,fragmentShader:Gc.depth_frag},normal:{uniforms:{opacity:{value:1}},vertexShader:Gc.normal_vert,fragmentShader:Gc.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Gc.cube_vert,fragmentShader:Gc.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:Gc.equirect_vert,fragmentShader:Gc.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new u}},vertexShader:Gc.distanceRGBA_vert,fragmentShader:Gc.distanceRGBA_frag}};Wc.physical={uniforms:Ha.merge([Wc.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Gc.meshphysical_vert,fragmentShader:Gc.meshphysical_frag},q.prototype={constructor:q,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new n;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new n;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new n;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){var r=t||new n;return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){var r=t||new n;return r.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new n;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},K.prototype={constructor:K,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){e===!0&&this.update(),this._needsUpdate=e},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):"overdraw"===t?this[t]=Number(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){function t(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var n=void 0===e;n&&(e={textures:{},images:{}});var r={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Di&&(r.blending=this.blending),this.shading!==Li&&(r.shading=this.shading),this.side!==Si&&(r.side=this.side),this.vertexColors!==Pi&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),r.skinning=this.skinning,r.morphTargets=this.morphTargets,n){var i=t(e.textures),o=t(e.images);i.length>0&&(r.textures=i),o.length>0&&(r.images=o)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.shading=e.shading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(K.prototype,t.prototype);var Xc=0;Q.prototype=Object.create(K.prototype),Q.prototype.constructor=Q,Q.prototype.isShaderMaterial=!0,Q.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ha.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Q.prototype.toJSON=function(e){var t=K.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},$.prototype=Object.create(K.prototype),$.prototype.constructor=$,$.prototype.isMeshDepthMaterial=!0,$.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},ee.prototype={constructor:ee,isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=+(1/0),n=+(1/0),r=+(1/0),i=-(1/0),o=-(1/0),a=-(1/0),s=0,c=e.length;s<c;s+=3){var u=e[s],l=e[s+1],h=e[s+2];u<t&&(t=u),l<n&&(n=l),h<r&&(r=h),u>i&&(i=u),l>o&&(o=l),h>a&&(a=h)}this.min.set(t,n,r),this.max.set(i,o,a)},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new u;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(){var e=new u;return function(t){var n=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var r=t.geometry;if(void 0!==r)if(r&&r.isGeometry)for(var i=r.vertices,o=0,a=i.length;o<a;o++)e.copy(i[o]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e);else if(r&&r.isBufferGeometry){var s=r.attributes.position;if(void 0!==s){var c,u,l;s&&s.isInterleavedBufferAttribute?(c=s.data.array,u=s.offset,l=s.data.stride):(c=s.array,u=0,l=3);for(var o=u,a=c.length;o<a;o+=l)e.fromArray(c,o),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e)}}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new u;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new u;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){var n=t||new u;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e;return function(t){return void 0===e&&(e=new u),this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},clampPoint:function(e,t){var n=t||new u;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new u;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),getBoundingSphere:function(){var e=new u;return function(t){var n=t||new te;return this.getCenter(n.center),n.radius=.5*this.getSize(e).length(),n}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new u,new u,new u,new u,new u,new u,new u,new u];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},te.prototype={constructor:te,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new ee;return function(t,n){var r=this.center;void 0!==n?r.copy(n):e.setFromPoints(t).getCenter(r);for(var i=0,o=0,a=t.length;o<a;o++)i=Math.max(i,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),r=t||new u;return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){var t=e||new ee;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},ne.prototype={constructor:ne,isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,c){var u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=o,u[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToVector3Array:function(){var e;return function(t,n,r){void 0===e&&(e=new u),void 0===n&&(n=0),void 0===r&&(r=t.length);for(var i=0,o=n;i<r;i+=3,o+=3)e.fromArray(t,o),e.applyMatrix3(this),e.toArray(t,o);return t}}(),applyToBuffer:function(){var e;return function(t,n,r){void 0===e&&(e=new u),void 0===n&&(n=0),void 0===r&&(r=t.length/t.itemSize);for(var i=0,o=n;i<r;i++,o++)e.x=t.getX(o),e.y=t.getY(o),e.z=t.getZ(o),e.applyMatrix3(this),t.setXYZ(o,e.x,e.y,e.z);return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-n*i*u+n*a*s+r*i*c-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],c=n[4],u=n[5],l=n[6],h=n[7],p=n[8],d=p*c-u*h,f=u*l-p*s,m=h*s-c*l,v=i*d+o*f+a*m;if(0===v){var g="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t===!0)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=d*y,r[1]=(a*h-p*o)*y,r[2]=(u*o-a*c)*y,r[3]=f*y,r[4]=(p*i-a*l)*y,r[5]=(a*s-u*i)*y,r[6]=m*y,r[7]=(o*l-h*i)*y,r[8]=(c*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(e,t)},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},re.prototype={constructor:re,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new u,t=new u;return function(n,r,i){var o=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e),r=t||new u;return r.copy(this.normal).multiplyScalar(n)},intersectLine:function(){var e=new u;return function(t,n){var r=n||new u,i=t.delta(e),o=this.normal.dot(i);if(0!==o){var a=-(t.start.dot(this.normal)+this.constant)/o;if(!(a<0||a>1))return r.copy(i).multiplyScalar(a).add(t.start)}else if(0===this.distanceToPoint(t.start))return r.copy(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){var t=e||new u;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new u,t=new ne;return function(n,r){var i=this.coplanarPoint(e).applyMatrix4(n),o=r||t.getNormalMatrix(n),a=this.normal.applyMatrix3(o).normalize();return this.constant=-i.dot(a),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},ie.prototype={constructor:ie,set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this;
},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],u=n[6],l=n[7],h=n[8],p=n[9],d=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,l-s,f-h,y-m).normalize(),t[1].setComponents(a+r,l+s,f+h,y+m).normalize(),t[2].setComponents(a+i,l+c,f+p,y+v).normalize(),t[3].setComponents(a-i,l-c,f-p,y-v).normalize(),t[4].setComponents(a-o,l-u,f-d,y-g).normalize(),t[5].setComponents(a+o,l+u,f+d,y+g).normalize(),this},intersectsObject:function(){var e=new te;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new te;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){var o=t[i].distanceToPoint(n);if(o<r)return!1}return!0},intersectsBox:function(){var e=new u,t=new u;return function(n){for(var r=this.planes,i=0;i<6;i++){var o=r[i];e.x=o.normal.x>0?n.min.x:n.max.x,t.x=o.normal.x>0?n.max.x:n.min.x,e.y=o.normal.y>0?n.min.y:n.max.y,t.y=o.normal.y>0?n.max.y:n.min.y,e.z=o.normal.z>0?n.min.z:n.max.z,t.z=o.normal.z>0?n.max.z:n.min.z;var a=o.distanceToPoint(e),s=o.distanceToPoint(t);if(a<0&&s<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},ae.prototype={constructor:ae,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var n=t||new u;return n.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new u;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new u;n.subVectors(e,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new u;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new u,t=new u,n=new u;return function(r,i,o,a){e.copy(r).add(i).multiplyScalar(.5),t.copy(i).sub(r).normalize(),n.copy(this.origin).sub(e);var s,c,u,l,h=.5*r.distanceTo(i),p=-this.direction.dot(t),d=n.dot(this.direction),f=-n.dot(t),m=n.lengthSq(),v=Math.abs(1-p*p);if(v>0)if(s=p*f-d,c=p*d-f,l=h*v,s>=0)if(c>=-l)if(c<=l){var g=1/v;s*=g,c*=g,u=s*(s+p*c+2*d)+c*(p*s+c+2*f)+m}else c=h,s=Math.max(0,-(p*c+d)),u=-s*s+c*(c+2*f)+m;else c=-h,s=Math.max(0,-(p*c+d)),u=-s*s+c*(c+2*f)+m;else c<=-l?(s=Math.max(0,-(-p*h+d)),c=s>0?-h:Math.min(Math.max(-h,-f),h),u=-s*s+c*(c+2*f)+m):c<=l?(s=0,c=Math.min(Math.max(-h,-f),h),u=c*(c+2*f)+m):(s=Math.max(0,-(p*h+d)),c=s>0?h:Math.min(Math.max(-h,-f),h),u=-s*s+c*(c+2*f)+m);else c=p>0?-h:h,s=Math.max(0,-(p*c+d)),u=-s*s+c*(c+2*f)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(c).add(e),u}}(),intersectSphere:function(){var e=new u;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,c=r+a;return s<0&&c<0?null:s<0?this.at(c,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var n=e.normal.dot(this.direction);return n*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,c=1/this.direction.x,u=1/this.direction.y,l=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(i=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),l>=0?(a=(e.min.z-h.z)*l,s=(e.max.z-h.z)*l):(a=(e.max.z-h.z)*l,s=(e.min.z-h.z)*l),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(){var e=new u;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new u,t=new u,n=new u,r=new u;return function(i,o,a,s,c){t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n);var u,l=this.direction.dot(r);if(l>0){if(s)return null;u=1}else{if(!(l<0))return null;u=-1,l=-l}e.subVectors(this.origin,i);var h=u*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var p=u*this.direction.dot(t.cross(e));if(p<0)return null;if(h+p>l)return null;var d=-u*e.dot(r);return d<0?null:this.at(d/l,c)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},se.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],se.DefaultOrder="XYZ",se.prototype={constructor:se,isEuler:!0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Ua.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],c=i[1],u=i[5],l=i[9],h=i[2],p=i[6],d=i[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(p,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o))):"ZYX"===t?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(p,d),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u))):"YZX"===t?(this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(p,u),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-l,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,n!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,n,r){return void 0===e&&(e=new l),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new c;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new u(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},ce.prototype={constructor:ce,set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)},test:function(e){return 0!==(this.mask&e.mask)}},ue.DefaultUp=new u(0,1,0),ue.DefaultMatrixAutoUpdate=!0,Object.assign(ue.prototype,t.prototype,{isObject3D:!0,applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new c;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new u(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new u(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new u(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new u;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new u(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new u(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new u(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new l;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new l;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var n=this.children.indexOf(e);n!==-1&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1))},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],o=i.getObjectByProperty(e,t);if(void 0!==o)return o}},getWorldPosition:function(e){var t=e||new u;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new u,t=new u;return function(n){var r=n||new c;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,r,t),r}}(),getWorldRotation:function(){var e=new c;return function(t){var n=t||new se;return this.getWorldQuaternion(e),n.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new u,t=new c;return function(n){var r=n||new u;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,r),r}}(),getWorldDirection:function(){var e=new c;return function(t){var n=t||new u;return this.getWorldQuaternion(e),n.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&e!==!0||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){function t(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var n=void 0===e||""===e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{}},r.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var i={};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===e.geometries[this.geometry.uuid]&&(e.geometries[this.geometry.uuid]=this.geometry.toJSON(e)),i.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===e.materials[this.material.uuid]&&(e.materials[this.material.uuid]=this.material.toJSON(e)),i.material=this.material.uuid),this.children.length>0){i.children=[];for(var o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(n){var a=t(e.geometries),s=t(e.materials),c=t(e.textures),u=t(e.images);a.length>0&&(r.geometries=a),s.length>0&&(r.materials=s),c.length>0&&(r.textures=c),u.length>0&&(r.images=u)}return r.object=i,r},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}});var qc=0;he.prototype={constructor:he,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){var t=e||new u;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new u;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new u;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new u,t=new u;return function(n,r){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),o=t.dot(e),a=o/i;return r&&(a=Ua.clamp(a,0,1)),a}}(),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t),i=n||new u;return this.delta(i).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},pe.normal=function(){var e=new u;return function(t,n,r,i){var o=i||new u;o.subVectors(r,n),e.subVectors(t,n),o.cross(e);var a=o.lengthSq();return a>0?o.multiplyScalar(1/Math.sqrt(a)):o.set(0,0,0)}}(),pe.barycoordFromPoint=function(){var e=new u,t=new u,n=new u;return function(r,i,o,a,s){e.subVectors(a,i),t.subVectors(o,i),n.subVectors(r,i);var c=e.dot(e),l=e.dot(t),h=e.dot(n),p=t.dot(t),d=t.dot(n),f=c*p-l*l,m=s||new u;if(0===f)return m.set(-2,-1,-1);var v=1/f,g=(p*h-l*d)*v,y=(c*d-l*h)*v;return m.set(1-g-y,y,g)}}(),pe.containsPoint=function(){var e=new u;return function(t,n,r,i){var o=pe.barycoordFromPoint(t,n,r,i,e);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}(),pe.prototype={constructor:pe,set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new u,t=new u;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new u;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return pe.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new re;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return pe.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return pe.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e,t,n,r;return function(i,o){void 0===e&&(e=new re,t=[new he,new he,new he],n=new u,r=new u);var a=o||new u,s=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(i,n),this.containsPoint(n)===!0)a.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var c=0;c<t.length;c++){t[c].closestPointToPoint(n,!0,r);var l=n.distanceToSquared(r);l<s&&(s=l,a.copy(r))}}return a}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},de.prototype={constructor:de,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},fe.prototype=Object.create(K.prototype),fe.prototype.constructor=fe,fe.prototype.isMeshBasicMaterial=!0,fe.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},me.prototype={constructor:me,isBufferAttribute:!0,set needsUpdate(e){e===!0&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new X),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyIndicesArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];t[n++]=o.a,t[n++]=o.b,t[n++]=o.c}return this},copyVector2sArray:function(e){for(var t=this.array,r=0,i=0,o=e.length;i<o;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new n),t[r++]=a.x,t[r++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new u),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new o),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},clone:function(){return(new this.constructor).copy(this)}},Object.assign(Se.prototype,t.prototype,{isGeometry:!0,applyMatrix:function(e){for(var t=(new ne).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){var i=this.vertices[n];i.applyMatrix4(e)}for(var n=0,r=this.faces.length;n<r;n++){var o=this.faces[n];o.normal.applyMatrix3(t).normalize();for(var a=0,s=o.vertexNormals.length;a<s;a++)o.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new l),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new l),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new l),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,n,r){return void 0===e&&(e=new l),e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,n,r){return void 0===e&&(e=new l),e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new ue),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,n,i){var o=void 0!==s?[p[e].clone(),p[t].clone(),p[n].clone()]:[],a=void 0!==c?[r.colors[e].clone(),r.colors[t].clone(),r.colors[n].clone()]:[],u=new de(e,t,n,o,a,i);r.faces.push(u),void 0!==l&&r.faceVertexUvs[0].push([d[e].clone(),d[t].clone(),d[n].clone()]),void 0!==h&&r.faceVertexUvs[1].push([f[e].clone(),f[t].clone(),f[n].clone()])}var r=this,i=null!==e.index?e.index.array:void 0,o=e.attributes,a=o.position.array,s=void 0!==o.normal?o.normal.array:void 0,c=void 0!==o.color?o.color.array:void 0,l=void 0!==o.uv?o.uv.array:void 0,h=void 0!==o.uv2?o.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var p=[],d=[],f=[],m=0,v=0;m<a.length;m+=3,v+=2)r.vertices.push(new u(a[m],a[m+1],a[m+2])),void 0!==s&&p.push(new u(s[m],s[m+1],s[m+2])),void 0!==c&&r.colors.push(new X(c[m],c[m+1],c[m+2])),void 0!==l&&d.push(new n(l[v],l[v+1])),void 0!==h&&f.push(new n(h[v],h[v+1]));if(void 0!==i){var g=e.groups;if(g.length>0)for(var m=0;m<g.length;m++)for(var y=g[m],b=y.start,_=y.count,v=b,w=b+_;v<w;v+=3)t(i[v],i[v+1],i[v+2],y.materialIndex);else for(var m=0;m<i.length;m+=3)t(i[m],i[m+1],i[m+2])}else for(var m=0;m<a.length/3;m+=3)t(m,m+1,m+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new l;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new u,t=new u,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,n,r,i,o,a;for(a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new u;if(e){var s,c,l,h=new u,p=new u;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],c=this.vertices[o.b],l=this.vertices[o.c],h.subVectors(l,c),p.subVectors(s,c),h.cross(p),a[o.a].add(h),a[o.b].add(h),a[o.c].add(h)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)o=this.faces[r],a[o.a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){o=this.faces[r];var d=o.vertexNormals;3===d.length?(d[0].copy(a[o.a]),d[1].copy(a[o.b]),d[2].copy(a[o.c])):(d[0]=a[o.a].clone(),d[1]=a[o.b].clone(),d[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){n=this.faces[e];var r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new Se;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a,s,c=this.morphNormals[e].faceNormals,l=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)a=new u,s={a:new u,b:new u,c:new u},c.push(a),l.push(s)}var h=this.morphNormals[e];o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals();var a,s;for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],a=h.faceNormals[n],s=h.vertexNormals[n],a.copy(i.normal),s.a.copy(i.vertexNormals[0]),s.b.copy(i.vertexNormals[1]),s.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,r=t.length;n<r;n++)n>0&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ee),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new te),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if((e&&e.isGeometry)===!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,c=e.faces,u=this.faceVertexUvs[0],l=e.faceVertexUvs[0],h=this.colors,p=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new ne).getNormalMatrix(t));for(var d=0,f=a.length;d<f;d++){var m=a[d],v=m.clone();void 0!==t&&v.applyMatrix4(t),o.push(v)}for(var d=0,f=p.length;d<f;d++)h.push(p[d].clone());for(d=0,f=c.length;d<f;d++){var g,y,b,_=c[d],w=_.vertexNormals,x=_.vertexColors;g=new de(_.a+i,_.b+i,_.c+i),g.normal.copy(_.normal),void 0!==r&&g.normal.applyMatrix3(r).normalize();for(var T=0,E=w.length;T<E;T++)y=w[T].clone(),void 0!==r&&y.applyMatrix3(r).normalize(),g.vertexNormals.push(y);g.color.copy(_.color);for(var T=0,E=x.length;T<E;T++)b=x[T],g.vertexColors.push(b.clone());g.materialIndex=_.materialIndex+n,s.push(g)}for(d=0,f=l.length;d<f;d++){var M=l[d],S=[];if(void 0!==M){for(var T=0,E=M.length;T<E;T++)S.push(M[T].clone());u.push(S)}}},mergeMesh:function(e){return(e&&e.isMesh)===!1?void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e):(e.matrixAutoUpdate&&e.updateMatrix(),void this.merge(e.geometry,e.matrix))},mergeVertices:function(){var e,t,n,r,i,o,a,s,c={},u=[],l=[],h=4,p=Math.pow(10,h);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],t=Math.round(e.x*p)+"_"+Math.round(e.y*p)+"_"+Math.round(e.z*p),void 0===c[t]?(c[t]=n,u.push(this.vertices[n]),l[n]=u.length-1):l[n]=l[c[t]];var d=[];for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n],i.a=l[i.a],i.b=l[i.b],i.c=l[i.c],o=[i.a,i.b,i.c];for(var f=-1,m=0;m<3;m++)if(o[m]===o[(m+1)%3]){f=m,d.push(n);break}}for(n=d.length-1;n>=0;n--){var v=d[n];for(this.faces.splice(v,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(v,1)}var g=this.vertices.length-u.length;return this.vertices=u,g},sortFacesByMaterialIndex:function(){function e(e,t){return e.materialIndex-t.materialIndex}for(var t=this.faces,n=t.length,r=0;r<n;r++)t[r]._id=r;t.sort(e);var i,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===n&&(i=[]),s&&s.length===n&&(o=[]);for(var r=0;r<n;r++){var c=t[r]._id;i&&i.push(a[c]),o&&o.push(s[c])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function e(e,t,n){return n?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==p[t]?p[t]:(p[t]=h.length/3,h.push(e.x,e.y,e.z),p[t])}function n(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==f[t]?f[t]:(f[t]=d.length,d.push(e.getHex()),f[t])}function r(e){var t=e.x.toString()+e.y.toString();return void 0!==v[t]?v[t]:(v[t]=m.length/2,m.push(e.x,e.y),v[t])}var i={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var a in o)void 0!==o[a]&&(i[a]=o[a]);return i}for(var s=[],c=0;c<this.vertices.length;c++){var u=this.vertices[c];s.push(u.x,u.y,u.z)}for(var l=[],h=[],p={},d=[],f={},m=[],v={},c=0;c<this.faces.length;c++){var g=this.faces[c],y=!0,b=!1,_=void 0!==this.faceVertexUvs[0][c],w=g.normal.length()>0,x=g.vertexNormals.length>0,T=1!==g.color.r||1!==g.color.g||1!==g.color.b,E=g.vertexColors.length>0,M=0;if(M=e(M,0,0),M=e(M,1,y),M=e(M,2,b),M=e(M,3,_),M=e(M,4,w),M=e(M,5,x),M=e(M,6,T),M=e(M,7,E),l.push(M),l.push(g.a,g.b,g.c),l.push(g.materialIndex),_){var S=this.faceVertexUvs[0][c];l.push(r(S[0]),r(S[1]),r(S[2]))}if(w&&l.push(t(g.normal)),x){var R=g.vertexNormals;l.push(t(R[0]),t(R[1]),t(R[2]))}if(T&&l.push(n(g.color)),E){var C=g.vertexColors;l.push(n(C[0]),n(C[1]),n(C[2]))}}return i.data={},i.data.vertices=s,i.data.normals=h,d.length>0&&(i.data.colors=d),m.length>0&&(i.data.uvs=[m]),i.data.faces=l,i},clone:function(){return(new Se).copy(this)},copy:function(e){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.colors=[];for(var t=e.vertices,n=0,r=t.length;n<r;n++)this.vertices.push(t[n].clone());for(var i=e.colors,n=0,r=i.length;n<r;n++)this.colors.push(i[n].clone());
for(var o=e.faces,n=0,r=o.length;n<r;n++)this.faces.push(o[n].clone());for(var n=0,r=e.faceVertexUvs.length;n<r;n++){var a=e.faceVertexUvs[n];void 0===this.faceVertexUvs[n]&&(this.faceVertexUvs[n]=[]);for(var s=0,c=a.length;s<c;s++){for(var u=a[s],l=[],h=0,p=u.length;h<p;h++){var d=u[h];l.push(d.clone())}this.faceVertexUvs[n].push(l)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Yc=0;Object.assign(Ce.prototype,t.prototype,{computeBoundingBox:Se.prototype.computeBoundingBox,computeBoundingSphere:Se.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(e){for(var t,n,r=[],i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==n&&(n=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,r.push(t)),t={start:3*o,materialIndex:n})}void 0!==t&&(t.count=3*o-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t,r=e.faces,i=e.vertices,o=e.faceVertexUvs,a=o[0]&&o[0].length>0,s=o[1]&&o[1].length>0,c=e.morphTargets,u=c.length;if(u>0){t=[];for(var l=0;l<u;l++)t[l]=[];this.morphTargets.position=t}var h,p=e.morphNormals,d=p.length;if(d>0){h=[];for(var l=0;l<d;l++)h[l]=[];this.morphTargets.normal=h}for(var f=e.skinIndices,m=e.skinWeights,v=f.length===i.length,g=m.length===i.length,l=0;l<r.length;l++){var y=r[l];this.vertices.push(i[y.a],i[y.b],i[y.c]);var b=y.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var _=y.normal;this.normals.push(_,_,_)}var w=y.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var x=y.color;this.colors.push(x,x,x)}if(a===!0){var T=o[0][l];void 0!==T?this.uvs.push(T[0],T[1],T[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new n,new n,new n))}if(s===!0){var T=o[1][l];void 0!==T?this.uvs2.push(T[0],T[1],T[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new n,new n,new n))}for(var E=0;E<u;E++){var M=c[E].vertices;t[E].push(M[y.a],M[y.b],M[y.c])}for(var E=0;E<d;E++){var S=p[E].vertexNormals[l];h[E].push(S.a,S.b,S.c)}v&&this.skinIndices.push(f[y.a],f[y.b],f[y.c]),g&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.assign(Ae.prototype,t.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){this.index=e},addAttribute:function(e,t){return(t&&t.isBufferAttribute)===!1&&(t&&t.isInterleavedBufferAttribute)===!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new me(arguments[1],arguments[2]))):"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this)},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new ne).getNormalMatrix(e);r.applyToVector3Array(n.array),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new l),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new l),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new l),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,n,r){return void 0===e&&(e=new l),e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,n,r){return void 0===e&&(e=new l),e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new ue),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e&&e.isPoints||e&&e.isLine){var n=new Te(3*t.vertices.length,3),r=new Te(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Te(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e&&e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t=e.geometry;if(e&&e.isMesh){var n=t.__directGeometry;if(t.elementsNeedUpdate===!0&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}var r;return t.verticesNeedUpdate===!0&&(r=this.attributes.position,void 0!==r&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1),t.normalsNeedUpdate===!0&&(r=this.attributes.normal,void 0!==r&&(r.copyVector3sArray(t.normals),r.needsUpdate=!0),t.normalsNeedUpdate=!1),t.colorsNeedUpdate===!0&&(r=this.attributes.color,void 0!==r&&(r.copyColorsArray(t.colors),r.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(r=this.attributes.uv,void 0!==r&&(r.copyVector2sArray(t.uvs),r.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,void 0!==r&&(r.copyArray(t.lineDistances),r.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Ce).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new me(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new me(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new me(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new me(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new me(o,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var a=e.vertices.length>65535?Uint32Array:Uint16Array,s=new a(3*e.indices.length);this.setIndex(new me(s,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var c in e.morphTargets){for(var u=[],l=e.morphTargets[c],h=0,p=l.length;h<p;h++){var d=l[h],f=new Te(3*d.length,3);u.push(f.copyVector3sArray(d))}this.morphAttributes[c]=u}if(e.skinIndices.length>0){var m=new Te(4*e.skinIndices.length,4);this.addAttribute("skinIndex",m.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var v=new Te(4*e.skinWeights.length,4);this.addAttribute("skinWeight",v.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ee);var e=this.attributes.position.array;void 0!==e?this.boundingBox.setFromArray(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new ee,t=new u;return function(){null===this.boundingSphere&&(this.boundingSphere=new te);var n=this.attributes.position;if(n){var r=n.array,i=this.boundingSphere.center;e.setFromArray(r),e.getCenter(i);for(var o=0,a=0,s=r.length;a<s;a+=3)t.fromArray(r,a),o=Math.max(o,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new me(new Float32Array(r.length),3));else for(var i=t.normal.array,o=0,a=i.length;o<a;o++)i[o]=0;var s,c,l,h=t.normal.array,p=new u,d=new u,f=new u,m=new u,v=new u;if(e){var g=e.array;0===n.length&&this.addGroup(0,g.length);for(var y=0,b=n.length;y<b;++y)for(var _=n[y],w=_.start,x=_.count,o=w,a=w+x;o<a;o+=3)s=3*g[o+0],c=3*g[o+1],l=3*g[o+2],p.fromArray(r,s),d.fromArray(r,c),f.fromArray(r,l),m.subVectors(f,d),v.subVectors(p,d),m.cross(v),h[s]+=m.x,h[s+1]+=m.y,h[s+2]+=m.z,h[c]+=m.x,h[c+1]+=m.y,h[c+2]+=m.z,h[l]+=m.x,h[l+1]+=m.y,h[l+2]+=m.z}else for(var o=0,a=r.length;o<a;o+=9)p.fromArray(r,o),d.fromArray(r,o+3),f.fromArray(r,o+6),m.subVectors(f,d),v.subVectors(p,d),m.cross(v),h[o]=m.x,h[o+1]=m.y,h[o+2]=m.z,h[o+3]=m.x,h[o+4]=m.y,h[o+5]=m.z,h[o+6]=m.x,h[o+7]=m.y,h[o+8]=m.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if((e&&e.isBufferGeometry)===!1)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0);var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r],o=i.array,a=e.attributes[r],s=a.array,c=a.itemSize,u=0,l=c*t;u<s.length;u++,l++)o[l]=s[u];return this},normalizeNormals:function(){for(var e,t,n,r,i=this.attributes.normal.array,o=0,a=i.length;o<a;o+=3)e=i[o],t=i[o+1],n=i[o+2],r=1/Math.sqrt(e*e+t*t+n*n),i[o]*=r,i[o+1]*=r,i[o+2]*=r},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Ae,t=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,a=i.itemSize,s=new o.constructor(t.length*a),c=0,u=0,l=0,h=t.length;l<h;l++){c=t[l]*a;for(var p=0;p<a;p++)s[u++]=o[c++]}e.addAttribute(r,new me(s,a))}return e},toJSON:function(){var e={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n],i=Array.prototype.slice.call(a.array);e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return null!==c&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e},clone:function(){return(new Ae).copy(this)},copy:function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var n=e.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var o=e.groups,a=0,s=o.length;a<s;a++){var c=o[a];this.addGroup(c.start,c.count,c.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ae.MaxIndex=65535,Le.prototype=Object.assign(Object.create(ue.prototype),{constructor:Le,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return ue.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var e=this.geometry.morphTargets;if(void 0!==e&&e.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,n=e.length;t<n;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[e[t].name]=t}},raycast:function(){function e(e,t,n,r,i,o,a){return pe.barycoordFromPoint(e,t,n,r,y),i.multiplyScalar(y.x),o.multiplyScalar(y.y),a.multiplyScalar(y.z),i.add(o).add(a),i.clone()}function t(e,t,n,r,i,o,a){var s,c=e.material;if(s=c.side===Ri?n.intersectTriangle(o,i,r,!0,a):n.intersectTriangle(r,i,o,c.side!==Ci,a),null===s)return null;_.copy(a),_.applyMatrix4(e.matrixWorld);var u=t.ray.origin.distanceTo(_);return u<t.near||u>t.far?null:{distance:u,point:_.clone(),object:e}}function r(n,r,i,o,a,u,l,p){s.fromArray(o,3*u),c.fromArray(o,3*l),h.fromArray(o,3*p);var d=t(n,r,i,s,c,h,b);return d&&(a&&(m.fromArray(a,2*u),v.fromArray(a,2*l),g.fromArray(a,2*p),d.uv=e(b,s,c,h,m,v,g)),d.face=new de(u,l,p,pe.normal(s,c,h)),d.faceIndex=u),d}var i=new l,o=new ae,a=new te,s=new u,c=new u,h=new u,p=new u,d=new u,f=new u,m=new n,v=new n,g=new n,y=new u,b=new u,_=new u;return function(n,u){var l=this.geometry,y=this.material,_=this.matrixWorld;if(void 0!==y&&(null===l.boundingSphere&&l.computeBoundingSphere(),a.copy(l.boundingSphere),a.applyMatrix4(_),n.ray.intersectsSphere(a)!==!1&&(i.getInverse(_),o.copy(n.ray).applyMatrix4(i),null===l.boundingBox||o.intersectsBox(l.boundingBox)!==!1))){var w,x;if(l&&l.isBufferGeometry){var T,E,M,S=l.index,R=l.attributes,C=R.position.array;if(void 0!==R.uv&&(w=R.uv.array),null!==S)for(var A=S.array,L=0,P=A.length;L<P;L+=3)T=A[L],E=A[L+1],M=A[L+2],x=r(this,n,o,C,w,T,E,M),x&&(x.faceIndex=Math.floor(L/3),u.push(x));else for(var L=0,P=C.length;L<P;L+=9)T=L/3,E=T+1,M=T+2,x=r(this,n,o,C,w,T,E,M),x&&(x.index=T,u.push(x))}else if(l&&l.isGeometry){var O,k,I,D=y&&y.isMultiMaterial,N=D===!0?y.materials:null,U=l.vertices,F=l.faces,j=l.faceVertexUvs[0];j.length>0&&(w=j);for(var B=0,z=F.length;B<z;B++){var G=F[B],V=D===!0?N[G.materialIndex]:y;if(void 0!==V){if(O=U[G.a],k=U[G.b],I=U[G.c],V.morphTargets===!0){var H=l.morphTargets,W=this.morphTargetInfluences;s.set(0,0,0),c.set(0,0,0),h.set(0,0,0);for(var X=0,q=H.length;X<q;X++){var Y=W[X];if(0!==Y){var Z=H[X].vertices;s.addScaledVector(p.subVectors(Z[G.a],O),Y),c.addScaledVector(d.subVectors(Z[G.b],k),Y),h.addScaledVector(f.subVectors(Z[G.c],I),Y)}}s.add(O),c.add(k),h.add(I),O=s,k=c,I=h}if(x=t(this,n,o,O,k,I,b)){if(w){var K=w[B];m.copy(K[0]),v.copy(K[1]),g.copy(K[2]),x.uv=e(b,O,k,I,m,v,g)}x.face=G,x.faceIndex=B,u.push(x)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Pe.prototype=Object.create(Ae.prototype),Pe.prototype.constructor=Pe,Oe.prototype=Object.create(Ae.prototype),Oe.prototype.constructor=Oe,ke.prototype=Object.create(ue.prototype),ke.prototype.constructor=ke,ke.prototype.isCamera=!0,ke.prototype.getWorldDirection=function(){var e=new c;return function(t){var n=t||new u;return this.getWorldQuaternion(e),n.set(0,0,-1).applyQuaternion(e)}}(),ke.prototype.lookAt=function(){var e=new l;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),ke.prototype.clone=function(){return(new this.constructor).copy(this)},ke.prototype.copy=function(e){return ue.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},Ie.prototype=Object.assign(Object.create(ke.prototype),{constructor:Ie,isPerspectiveCamera:!0,copy:function(e){return ke.prototype.copy.call(this,e),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Ua.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Ua.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Ua.RAD2DEG*Math.atan(Math.tan(.5*Ua.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:r,width:i,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Ua.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==o){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var c=this.filmOffset;0!==c&&(i+=e*c/this.getFilmWidth()),this.projectionMatrix.makeFrustum(i,i+r,t-n,t,e,this.far)},toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),De.prototype=Object.assign(Object.create(ke.prototype),{constructor:De,isOrthographicCamera:!0,copy:function(e){return ke.prototype.copy.call(this,e),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:r,width:i,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view){var c=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;i+=l*(this.view.offsetX/c),o=i+l*(this.view.width/c),a-=h*(this.view.offsetY/u),s=a-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far)},toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}});var Zc=0;ut.prototype.isFogExp2=!0,ut.prototype.clone=function(){return new ut(this.color.getHex(),this.density)},ut.prototype.toJSON=function(e){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},lt.prototype.isFog=!0,lt.prototype.clone=function(){return new lt(this.color.getHex(),this.near,this.far)},lt.prototype.toJSON=function(e){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},ht.prototype=Object.create(ue.prototype),ht.prototype.constructor=ht,ht.prototype.copy=function(e,t){return ue.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},ht.prototype.toJSON=function(e){var t=ue.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},pt.prototype=Object.assign(Object.create(ue.prototype),{constructor:pt,isLensFlare:!0,copy:function(e){ue.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,n=e.lensFlares.length;t<n;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,n,r,i,o){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===o&&(o=1),void 0===i&&(i=new X(16777215)),void 0===r&&(r=Di),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:o,color:i,blending:r})},updateLensFlares:function(){var e,t,n=this.lensFlares.length,r=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(e=0;e<n;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+r*t.distance,t.y=this.positionScreen.y+i*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)}}),dt.prototype=Object.create(K.prototype),dt.prototype.constructor=dt,dt.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},ft.prototype=Object.assign(Object.create(ue.prototype),{constructor:ft,isSprite:!0,raycast:function(){var e=new u;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.distanceSqToPoint(e),i=this.scale.x*this.scale.y/4;r>i||n.push({distance:Math.sqrt(r),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),mt.prototype=Object.assign(Object.create(ue.prototype),{constructor:mt,copy:function(e){ue.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new u;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),update:function(){var e=new u,t=new u;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),vt.prototype=Object.create(r.prototype),vt.prototype.constructor=vt,vt.prototype.isDataTexture=!0,Object.assign(gt.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new l;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var e,t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(var t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new l;return function(){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix;e.multiplyMatrices(r,this.boneInverses[t]),e.toArray(this.boneMatrices,16*t)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new gt(this.bones,this.boneInverses,this.useVertexTexture)}}),yt.prototype=Object.assign(Object.create(ue.prototype),{constructor:yt,isBone:!0,copy:function(e){return ue.prototype.copy.call(this,e),this.skin=e.skin,this}}),bt.prototype=Object.assign(Object.create(Le.prototype),{constructor:bt,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var e=0;e<this.geometry.skinWeights.length;e++){var t=this.geometry.skinWeights[e],n=1/t.lengthManhattan();n!==1/0?t.multiplyScalar(n):t.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry)for(var r=new o,i=this.geometry.attributes.skinWeight,e=0;e<i.count;e++){r.x=i.getX(e),r.y=i.getY(e),r.z=i.getZ(e),r.w=i.getW(e);var n=1/r.lengthManhattan();n!==1/0?r.multiplyScalar(n):r.set(1,0,0,0),i.setXYZW(e,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){Le.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),_t.prototype=Object.create(K.prototype),_t.prototype.constructor=_t,_t.prototype.isLineBasicMaterial=!0,_t.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},wt.prototype=Object.assign(Object.create(ue.prototype),{constructor:wt,isLine:!0,raycast:function(){var e=new l,t=new ae,n=new te;return function(r,i){var o=r.linePrecision,a=o*o,s=this.geometry,c=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(c),r.ray.intersectsSphere(n)!==!1){e.getInverse(c),t.copy(r.ray).applyMatrix4(e);var l=new u,h=new u,p=new u,d=new u,f=this&&this.isLineSegments?2:1;if(s&&s.isBufferGeometry){var m=s.index,v=s.attributes,g=v.position.array;if(null!==m)for(var y=m.array,b=0,_=y.length-1;b<_;b+=f){var w=y[b],x=y[b+1];l.fromArray(g,3*w),h.fromArray(g,3*x);var T=t.distanceSqToSegment(l,h,d,p);if(!(T>a)){d.applyMatrix4(this.matrixWorld);var E=r.ray.origin.distanceTo(d);E<r.near||E>r.far||i.push({distance:E,point:p.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else for(var b=0,_=g.length/3-1;b<_;b+=f){l.fromArray(g,3*b),h.fromArray(g,3*b+3);var T=t.distanceSqToSegment(l,h,d,p);if(!(T>a)){d.applyMatrix4(this.matrixWorld);var E=r.ray.origin.distanceTo(d);E<r.near||E>r.far||i.push({distance:E,point:p.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}else if(s&&s.isGeometry)for(var M=s.vertices,S=M.length,b=0;b<S-1;b+=f){var T=t.distanceSqToSegment(M[b],M[b+1],d,p);if(!(T>a)){d.applyMatrix4(this.matrixWorld);var E=r.ray.origin.distanceTo(d);E<r.near||E>r.far||i.push({distance:E,point:p.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),xt.prototype=Object.assign(Object.create(wt.prototype),{constructor:xt,isLineSegments:!0}),Tt.prototype=Object.create(K.prototype),Tt.prototype.constructor=Tt,Tt.prototype.isPointsMaterial=!0,Tt.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},Et.prototype=Object.assign(Object.create(ue.prototype),{constructor:Et,isPoints:!0,raycast:function(){var e=new l,t=new ae,n=new te;return function(r,i){function o(e,n){var o=t.distanceSqToPoint(e);if(o<p){var s=t.closestPointToPoint(e);s.applyMatrix4(c);var u=r.ray.origin.distanceTo(s);if(u<r.near||u>r.far)return;i.push({distance:u,distanceToRay:Math.sqrt(o),point:s.clone(),index:n,face:null,object:a})}}var a=this,s=this.geometry,c=this.matrixWorld,l=r.params.Points.threshold;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(c),r.ray.intersectsSphere(n)!==!1){e.getInverse(c),t.copy(r.ray).applyMatrix4(e);var h=l/((this.scale.x+this.scale.y+this.scale.z)/3),p=h*h,d=new u;if(s&&s.isBufferGeometry){var f=s.index,m=s.attributes,v=m.position.array;if(null!==f)for(var g=f.array,y=0,b=g.length;y<b;y++){var _=g[y];d.fromArray(v,3*_),o(d,_)}else for(var y=0,w=v.length/3;y<w;y++)d.fromArray(v,3*y),o(d,y)}else for(var x=s.vertices,y=0,w=x.length;y<w;y++)o(x[y],y)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Mt.prototype=Object.assign(Object.create(ue.prototype),{constructor:Mt}),St.prototype=Object.create(r.prototype),St.prototype.constructor=St,Rt.prototype=Object.create(r.prototype),Rt.prototype.constructor=Rt,Rt.prototype.isCompressedTexture=!0,Ct.prototype=Object.create(r.prototype),Ct.prototype.constructor=Ct,At.prototype=Object.create(r.prototype),At.prototype.constructor=At,At.prototype.isDepthTexture=!0,Lt.prototype=Object.create(Ae.prototype),Lt.prototype.constructor=Lt,Pt.prototype=Object.create(Ae.prototype),Pt.prototype.constructor=Pt,Ot.prototype=Object.create(Se.prototype),Ot.prototype.constructor=Ot,kt.prototype=Object.create(Ae.prototype),kt.prototype.constructor=kt,It.prototype=Object.create(kt.prototype),It.prototype.constructor=It,Dt.prototype=Object.create(Se.prototype),Dt.prototype.constructor=Dt,Nt.prototype=Object.create(kt.prototype),Nt.prototype.constructor=Nt,Ut.prototype=Object.create(Se.prototype),Ut.prototype.constructor=Ut,Ft.prototype=Object.create(kt.prototype),Ft.prototype.constructor=Ft,jt.prototype=Object.create(Se.prototype),jt.prototype.constructor=jt,Bt.prototype=Object.create(kt.prototype),Bt.prototype.constructor=Bt,zt.prototype=Object.create(Se.prototype),zt.prototype.constructor=zt,Gt.prototype=Object.create(Se.prototype),Gt.prototype.constructor=Gt,Vt.prototype=Object.create(Ae.prototype),Vt.prototype.constructor=Vt,Ht.prototype=Object.create(Se.prototype),Ht.prototype.constructor=Ht,Wt.prototype=Object.create(Ae.prototype),Wt.prototype.constructor=Wt,Xt.prototype=Object.create(Se.prototype),Xt.prototype.constructor=Xt,qt.prototype=Object.create(Ae.prototype),qt.prototype.constructor=qt,Yt.prototype=Object.create(Se.prototype),Yt.prototype.constructor=Yt;var Kc={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},triangulate:function(){function e(e,t,n,r,i,o){var a,s,c,u,l,h,p,d,f;if(s=e[o[t]].x,c=e[o[t]].y,u=e[o[n]].x,l=e[o[n]].y,h=e[o[r]].x,p=e[o[r]].y,(u-s)*(p-c)-(l-c)*(h-s)<=0)return!1;var m,v,g,y,b,_,w,x,T,E,M,S,R,C,A;for(m=h-u,v=p-l,g=s-h,y=c-p,b=u-s,_=l-c,a=0;a<i;a++)if(d=e[o[a]].x,f=e[o[a]].y,!(d===s&&f===c||d===u&&f===l||d===h&&f===p)&&(w=d-s,x=f-c,T=d-u,E=f-l,M=d-h,S=f-p,A=m*E-v*T,R=b*x-_*w,C=g*S-y*M,A>=-Number.EPSILON&&C>=-Number.EPSILON&&R>=-Number.EPSILON))return!1;return!0}return function(t,n){var r=t.length;if(r<3)return null;var i,o,a,s=[],c=[],u=[];if(Kc.area(t)>0)for(o=0;o<r;o++)c[o]=o;else for(o=0;o<r;o++)c[o]=r-1-o;var l=r,h=2*l;for(o=l-1;l>2;){if(h--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),n?u:s;if(i=o,l<=i&&(i=0),o=i+1,l<=o&&(o=0),a=o+1,l<=a&&(a=0),e(t,i,o,a,l,c)){var p,d,f,m,v;for(p=c[i],d=c[o],f=c[a],s.push([t[p],t[d],t[f]]),u.push([c[i],c[o],c[a]]),m=o,v=o+1;v<l;m++,v++)c[m]=c[v];l--,h=2*l}}return n?u:s}}(),triangulateShape:function(e,t){function n(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function r(e,t,n){return e.x!==t.x?e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x:e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y}function i(e,t,n,i,o){var a=t.x-e.x,s=t.y-e.y,c=i.x-n.x,u=i.y-n.y,l=e.x-n.x,h=e.y-n.y,p=s*c-a*u,d=s*l-a*h;
if(Math.abs(p)>Number.EPSILON){var f;if(p>0){if(d<0||d>p)return[];if(f=u*l-c*h,f<0||f>p)return[]}else{if(d>0||d<p)return[];if(f=u*l-c*h,f>0||f<p)return[]}if(0===f)return!o||0!==d&&d!==p?[e]:[];if(f===p)return!o||0!==d&&d!==p?[t]:[];if(0===d)return[n];if(d===p)return[i];var m=f/p;return[{x:e.x+m*a,y:e.y+m*s}]}if(0!==d||u*l!==c*h)return[];var v=0===a&&0===s,g=0===c&&0===u;if(v&&g)return e.x!==n.x||e.y!==n.y?[]:[e];if(v)return r(n,i,e)?[e]:[];if(g)return r(e,t,n)?[n]:[];var y,b,_,w,x,T,E,M;return 0!==a?(e.x<t.x?(y=e,_=e.x,b=t,w=t.x):(y=t,_=t.x,b=e,w=e.x),n.x<i.x?(x=n,E=n.x,T=i,M=i.x):(x=i,E=i.x,T=n,M=n.x)):(e.y<t.y?(y=e,_=e.y,b=t,w=t.y):(y=t,_=t.y,b=e,w=e.y),n.y<i.y?(x=n,E=n.y,T=i,M=i.y):(x=i,E=i.y,T=n,M=n.y)),_<=E?w<E?[]:w===E?o?[]:[x]:w<=M?[x,b]:[x,T]:_>M?[]:_===M?o?[]:[y]:w<=M?[y,b]:[y,T]}function o(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,a=n.x-e.x,s=n.y-e.y,c=r.x-e.x,u=r.y-e.y,l=i*s-o*a,h=i*u-o*c;if(Math.abs(l)>Number.EPSILON){var p=c*s-u*a;return l>0?h>=0&&p>=0:h>=0||p>=0}return h>0}function a(e,t){function n(e,t){var n=y.length-1,r=e-1;r<0&&(r=n);var i=e+1;i>n&&(i=0);var a=o(y[e],y[r],y[i],s[t]);if(!a)return!1;var c=s.length-1,u=t-1;u<0&&(u=c);var l=t+1;return l>c&&(l=0),a=o(s[t],s[u],s[l],y[e]),!!a}function r(e,t){var n,r,o;for(n=0;n<y.length;n++)if(r=n+1,r%=y.length,o=i(e,t,y[n],y[r],!0),o.length>0)return!0;return!1}function a(e,n){var r,o,a,s,c;for(r=0;r<b.length;r++)for(o=t[b[r]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,c=i(e,n,o[a],o[s],!0),c.length>0)return!0;return!1}for(var s,c,u,l,h,p,d,f,m,v,g,y=e.concat(),b=[],_=[],w=0,x=t.length;w<x;w++)b.push(w);for(var T=0,E=2*b.length;b.length>0;){if(E--,E<0){console.log("Infinite Loop! Holes left:"+b.length+", Probably Hole outside Shape!");break}for(u=T;u<y.length;u++){l=y[u],c=-1;for(var w=0;w<b.length;w++)if(p=b[w],d=l.x+":"+l.y+":"+p,void 0===_[d]){s=t[p];for(var M=0;M<s.length;M++)if(h=s[M],n(u,M)&&!r(l,h)&&!a(l,h)){c=M,b.splice(w,1),f=y.slice(0,u+1),m=y.slice(u),v=s.slice(c),g=s.slice(0,c+1),y=f.concat(v).concat(g).concat(m),T=u;break}if(c>=0)break;_[d]=!0}if(c>=0)break}}return y}n(e),t.forEach(n);for(var s,c,u,l,h,p,d={},f=e.concat(),m=0,v=t.length;m<v;m++)Array.prototype.push.apply(f,t[m]);for(s=0,c=f.length;s<c;s++)h=f[s].x+":"+f[s].y,void 0!==d[h]&&console.warn("THREE.ShapeUtils: Duplicate point",h,s),d[h]=s;var g=a(e,t),y=Kc.triangulate(g,!1);for(s=0,c=y.length;s<c;s++)for(l=y[s],u=0;u<3;u++)h=l[u].x+":"+l[u].y,p=d[h],void 0!==p&&(l[u]=p);return y.concat()},isClockWise:function(e){return Kc.area(e)<0},b2:function(){function e(e,t){var n=1-e;return n*n*t}function t(e,t){return 2*(1-e)*e*t}function n(e,t){return e*e*t}return function(r,i,o,a){return e(r,i)+t(r,o)+n(r,a)}}(),b3:function(){function e(e,t){var n=1-e;return n*n*n*t}function t(e,t){var n=1-e;return 3*n*n*e*t}function n(e,t){var n=1-e;return 3*n*e*e*t}function r(e,t){return e*e*e*t}return function(i,o,a,s,c){return e(i,o)+t(i,a)+n(i,s)+r(i,c)}}()};Zt.prototype=Object.create(Se.prototype),Zt.prototype.constructor=Zt,Zt.prototype.addShapeList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];this.addShape(i,t)}},Zt.prototype.addShape=function(e,t){function r(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}function i(e,t,r){var i,o,a=1,s=e.x-t.x,c=e.y-t.y,u=r.x-e.x,l=r.y-e.y,h=s*s+c*c,p=s*l-c*u;if(Math.abs(p)>Number.EPSILON){var d=Math.sqrt(h),f=Math.sqrt(u*u+l*l),m=t.x-c/d,v=t.y+s/d,g=r.x-l/f,y=r.y+u/f,b=((g-m)*l-(y-v)*u)/(s*l-c*u);i=m+s*b-e.x,o=v+c*b-e.y;var _=i*i+o*o;if(_<=2)return new n(i,o);a=Math.sqrt(_/2)}else{var w=!1;s>Number.EPSILON?u>Number.EPSILON&&(w=!0):s<-Number.EPSILON?u<-Number.EPSILON&&(w=!0):Math.sign(c)===Math.sign(l)&&(w=!0),w?(i=-c,o=s,a=Math.sqrt(h)):(i=s,o=c,a=Math.sqrt(h/2))}return new n(i/a,o/a)}function o(){if(w){var e=0,t=H*e;for(q=0;q<W;q++)V=N[q],l(V[2]+t,V[1]+t,V[0]+t);for(e=T+2*_,t=H*e,q=0;q<W;q++)V=N[q],l(V[0]+t,V[1]+t,V[2]+t)}else{for(q=0;q<W;q++)V=N[q],l(V[2],V[1],V[0]);for(q=0;q<W;q++)V=N[q],l(V[0]+H*T,V[1]+H*T,V[2]+H*T)}}function a(){var e=0;for(s(U,e),e+=U.length,C=0,A=I.length;C<A;C++)R=I[C],s(R,e),e+=R.length}function s(e,t){var n,r;for(q=e.length;--q>=0;){n=q,r=q-1,r<0&&(r=e.length-1);var i=0,o=T+2*_;for(i=0;i<o;i++){var a=H*i,s=H*(i+1),c=t+n+a,u=t+r+a,l=t+r+s,p=t+n+s;h(c,u,l,p,e,i,o,n,r)}}}function c(e,t,n){L.vertices.push(new u(e,t,n))}function l(e,t,n){e+=P,t+=P,n+=P,L.faces.push(new de(e,t,n,null,null,0));var r=S.generateTopUV(L,e,t,n);L.faceVertexUvs[0].push(r)}function h(e,t,n,r,i,o,a,s,c){e+=P,t+=P,n+=P,r+=P,L.faces.push(new de(e,t,r,null,null,1)),L.faces.push(new de(t,n,r,null,null,1));var u=S.generateSideWallUV(L,e,t,n,r);L.faceVertexUvs[0].push([u[0],u[1],u[3]]),L.faceVertexUvs[0].push([u[1],u[2],u[3]])}var p,d,f,m,v,g=void 0!==t.amount?t.amount:100,y=void 0!==t.bevelThickness?t.bevelThickness:6,b=void 0!==t.bevelSize?t.bevelSize:y-2,_=void 0!==t.bevelSegments?t.bevelSegments:3,w=void 0===t.bevelEnabled||t.bevelEnabled,x=void 0!==t.curveSegments?t.curveSegments:12,T=void 0!==t.steps?t.steps:1,E=t.extrudePath,M=!1,S=void 0!==t.UVGenerator?t.UVGenerator:Zt.WorldUVGenerator;E&&(p=E.getSpacedPoints(T),M=!0,w=!1,d=void 0!==t.frames?t.frames:E.computeFrenetFrames(T,!1),f=new u,m=new u,v=new u),w||(_=0,y=0,b=0);var R,C,A,L=this,P=this.vertices.length,O=e.extractPoints(x),k=O.shape,I=O.holes,D=!Kc.isClockWise(k);if(D){for(k=k.reverse(),C=0,A=I.length;C<A;C++)R=I[C],Kc.isClockWise(R)&&(I[C]=R.reverse());D=!1}var N=Kc.triangulateShape(k,I),U=k;for(C=0,A=I.length;C<A;C++)R=I[C],k=k.concat(R);for(var F,j,B,z,G,V,H=k.length,W=N.length,X=[],q=0,Y=U.length,Z=Y-1,K=q+1;q<Y;q++,Z++,K++)Z===Y&&(Z=0),K===Y&&(K=0),X[q]=i(U[q],U[Z],U[K]);var J,Q=[],$=X.concat();for(C=0,A=I.length;C<A;C++){for(R=I[C],J=[],q=0,Y=R.length,Z=Y-1,K=q+1;q<Y;q++,Z++,K++)Z===Y&&(Z=0),K===Y&&(K=0),J[q]=i(R[q],R[Z],R[K]);Q.push(J),$=$.concat(J)}for(F=0;F<_;F++){for(B=F/_,z=y*Math.cos(B*Math.PI/2),j=b*Math.sin(B*Math.PI/2),q=0,Y=U.length;q<Y;q++)G=r(U[q],X[q],j),c(G.x,G.y,-z);for(C=0,A=I.length;C<A;C++)for(R=I[C],J=Q[C],q=0,Y=R.length;q<Y;q++)G=r(R[q],J[q],j),c(G.x,G.y,-z)}for(j=b,q=0;q<H;q++)G=w?r(k[q],$[q],j):k[q],M?(m.copy(d.normals[0]).multiplyScalar(G.x),f.copy(d.binormals[0]).multiplyScalar(G.y),v.copy(p[0]).add(m).add(f),c(v.x,v.y,v.z)):c(G.x,G.y,0);var ee;for(ee=1;ee<=T;ee++)for(q=0;q<H;q++)G=w?r(k[q],$[q],j):k[q],M?(m.copy(d.normals[ee]).multiplyScalar(G.x),f.copy(d.binormals[ee]).multiplyScalar(G.y),v.copy(p[ee]).add(m).add(f),c(v.x,v.y,v.z)):c(G.x,G.y,g/T*ee);for(F=_-1;F>=0;F--){for(B=F/_,z=y*Math.cos(B*Math.PI/2),j=b*Math.sin(B*Math.PI/2),q=0,Y=U.length;q<Y;q++)G=r(U[q],X[q],j),c(G.x,G.y,g+z);for(C=0,A=I.length;C<A;C++)for(R=I[C],J=Q[C],q=0,Y=R.length;q<Y;q++)G=r(R[q],J[q],j),M?c(G.x,G.y+p[T-1].y,p[T-1].x+z):c(G.x,G.y,g+z)}o(),a()},Zt.WorldUVGenerator={generateTopUV:function(e,t,r,i){var o=e.vertices,a=o[t],s=o[r],c=o[i];return[new n(a.x,a.y),new n(s.x,s.y),new n(c.x,c.y)]},generateSideWallUV:function(e,t,r,i,o){var a=e.vertices,s=a[t],c=a[r],u=a[i],l=a[o];return Math.abs(s.y-c.y)<.01?[new n(s.x,1-s.z),new n(c.x,1-c.z),new n(u.x,1-u.z),new n(l.x,1-l.z)]:[new n(s.y,1-s.z),new n(c.y,1-c.z),new n(u.y,1-u.z),new n(l.y,1-l.z)]}},Kt.prototype=Object.create(Zt.prototype),Kt.prototype.constructor=Kt,Jt.prototype=Object.create(Ae.prototype),Jt.prototype.constructor=Jt,Qt.prototype=Object.create(Se.prototype),Qt.prototype.constructor=Qt,$t.prototype=Object.create(Ae.prototype),$t.prototype.constructor=$t,en.prototype=Object.create(Se.prototype),en.prototype.constructor=en,tn.prototype=Object.create(Se.prototype),tn.prototype.constructor=tn,nn.prototype=Object.create(Ae.prototype),nn.prototype.constructor=nn,rn.prototype=Object.create(Se.prototype),rn.prototype.constructor=rn,on.prototype=Object.create(Se.prototype),on.prototype.constructor=on,on.prototype.addShapeList=function(e,t){for(var n=0,r=e.length;n<r;n++)this.addShape(e[n],t);return this},on.prototype.addShape=function(e,t){void 0===t&&(t={});var n,r,i,o=void 0!==t.curveSegments?t.curveSegments:12,a=t.material,s=void 0===t.UVGenerator?Zt.WorldUVGenerator:t.UVGenerator,c=this.vertices.length,l=e.extractPoints(o),h=l.shape,p=l.holes,d=!Kc.isClockWise(h);if(d){for(h=h.reverse(),n=0,r=p.length;n<r;n++)i=p[n],Kc.isClockWise(i)&&(p[n]=i.reverse());d=!1}var f=Kc.triangulateShape(h,p);for(n=0,r=p.length;n<r;n++)i=p[n],h=h.concat(i);var m,v,g=h.length,y=f.length;for(n=0;n<g;n++)m=h[n],this.vertices.push(new u(m.x,m.y,0));for(n=0;n<y;n++){v=f[n];var b=v[0]+c,_=v[1]+c,w=v[2]+c;this.faces.push(new de(b,_,w,null,null,a)),this.faceVertexUvs[0].push(s.generateTopUV(this,b,_,w))}},an.prototype=Object.create(Ae.prototype),an.prototype.constructor=an,sn.prototype=Object.create(Ae.prototype),sn.prototype.constructor=sn,cn.prototype=Object.create(Se.prototype),cn.prototype.constructor=cn,un.prototype=Object.create(cn.prototype),un.prototype.constructor=un,ln.prototype=Object.create(sn.prototype),ln.prototype.constructor=ln,hn.prototype=Object.create(Ae.prototype),hn.prototype.constructor=hn,pn.prototype=Object.create(Se.prototype),pn.prototype.constructor=pn,dn.prototype=Object.create(Se.prototype),dn.prototype.constructor=dn;var Jc=Object.freeze({WireframeGeometry:Lt,ParametricGeometry:Ot,ParametricBufferGeometry:Pt,TetrahedronGeometry:Dt,TetrahedronBufferGeometry:It,OctahedronGeometry:Ut,OctahedronBufferGeometry:Nt,IcosahedronGeometry:jt,IcosahedronBufferGeometry:Ft,DodecahedronGeometry:zt,DodecahedronBufferGeometry:Bt,PolyhedronGeometry:Gt,PolyhedronBufferGeometry:kt,TubeGeometry:Ht,TubeBufferGeometry:Vt,TorusKnotGeometry:Xt,TorusKnotBufferGeometry:Wt,TorusGeometry:Yt,TorusBufferGeometry:qt,TextGeometry:Kt,SphereBufferGeometry:Jt,SphereGeometry:Qt,RingGeometry:en,RingBufferGeometry:$t,PlaneBufferGeometry:Oe,PlaneGeometry:tn,LatheGeometry:rn,LatheBufferGeometry:nn,ShapeGeometry:on,ExtrudeGeometry:Zt,EdgesGeometry:an,ConeGeometry:un,ConeBufferGeometry:ln,CylinderGeometry:cn,CylinderBufferGeometry:sn,CircleBufferGeometry:hn,CircleGeometry:pn,BoxBufferGeometry:Pe,BoxGeometry:dn});fn.prototype=Object.create(Q.prototype),fn.prototype.constructor=fn,fn.prototype.isShadowMaterial=!0,mn.prototype=Object.create(Q.prototype),mn.prototype.constructor=mn,mn.prototype.isRawShaderMaterial=!0,vn.prototype={constructor:vn,isMultiMaterial:!0,toJSON:function(e){for(var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},n=this.materials,r=0,i=n.length;r<i;r++){var o=n[r].toJSON(e);delete o.metadata,t.materials.push(o)}return t.visible=this.visible,t},clone:function(){for(var e=new this.constructor,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e.visible=this.visible,e}},gn.prototype=Object.create(K.prototype),gn.prototype.constructor=gn,gn.prototype.isMeshStandardMaterial=!0,gn.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},yn.prototype=Object.create(gn.prototype),yn.prototype.constructor=yn,yn.prototype.isMeshPhysicalMaterial=!0,yn.prototype.copy=function(e){return gn.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},bn.prototype=Object.create(K.prototype),bn.prototype.constructor=bn,bn.prototype.isMeshPhongMaterial=!0,bn.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},_n.prototype=Object.create(K.prototype),_n.prototype.constructor=_n,_n.prototype.isMeshNormalMaterial=!0,_n.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},wn.prototype=Object.create(K.prototype),wn.prototype.constructor=wn,wn.prototype.isMeshLambertMaterial=!0,wn.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},xn.prototype=Object.create(K.prototype),xn.prototype.constructor=xn,xn.prototype.isLineDashedMaterial=!0,xn.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Qc=Object.freeze({ShadowMaterial:fn,SpriteMaterial:dt,RawShaderMaterial:mn,ShaderMaterial:Q,PointsMaterial:Tt,MultiMaterial:vn,MeshPhysicalMaterial:yn,MeshStandardMaterial:gn,MeshPhongMaterial:bn,MeshNormalMaterial:_n,MeshLambertMaterial:wn,MeshDepthMaterial:$,MeshBasicMaterial:fe,LineDashedMaterial:xn,LineBasicMaterial:_t,Material:K}),$c={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},eu=new Tn;Object.assign(En.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var i=this,o=$c.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;var a=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(a);if(s){var c=s[1],u=!!s[2],l=s[3];l=window.decodeURIComponent(l),u&&(l=window.atob(l));try{var h,p=(this.responseType||"").toLowerCase();switch(p){case"arraybuffer":case"blob":h=new ArrayBuffer(l.length);for(var d=new Uint8Array(h),f=0;f<l.length;f++)d[f]=l.charCodeAt(f);"blob"===p&&(h=new Blob([h],{type:c}));break;case"document":var m=new DOMParser;h=m.parseFromString(l,c);break;case"json":h=JSON.parse(l);break;default:h=l}window.setTimeout(function(){t&&t(h),i.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){r&&r(t),i.manager.itemError(e)},0)}}else{var v=new XMLHttpRequest;v.open("GET",e,!0),v.addEventListener("load",function(n){var o=n.target.response;$c.add(e,o),200===this.status?(t&&t(o),i.manager.itemEnd(e)):0===this.status?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),t&&t(o),i.manager.itemEnd(e)):(r&&r(n),i.manager.itemError(e))},!1),void 0!==n&&v.addEventListener("progress",function(e){n(e)},!1),v.addEventListener("error",function(t){r&&r(t),i.manager.itemError(e)},!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType("text/plain"),v.send(null)}return i.manager.itemStart(e),v},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this}}),Object.assign(Mn.prototype,{load:function(e,t,n,r){function i(i){c.load(e[i],function(e){var n=o._parser(e,!0);a[i]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},u+=1,6===u&&(1===n.mipmapCount&&(s.minFilter=No),s.format=n.format,s.needsUpdate=!0,t&&t(s))},n,r)}var o=this,a=[],s=new Rt;s.image=a;var c=new En(this.manager);if(c.setPath(this.path),c.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,l=0,h=e.length;l<h;++l)i(l);else c.load(e,function(e){var n=o._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,i=0;i<r;i++){a[i]={mipmaps:[]};for(var c=0;c<n.mipmapCount;c++)a[i].mipmaps.push(n.mipmaps[i*n.mipmapCount+c]),a[i].format=n.format,a[i].width=n.width,a[i].height=n.height}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=No),s.format=n.format,s.needsUpdate=!0,t&&t(s)},n,r);return s},setPath:function(e){return this.path=e,this}});var tu=Sn;Object.assign(Sn.prototype,{load:function(e,t,n,r){var i=this,o=new vt,a=new En(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){var n=i._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Lo,o.wrapT=void 0!==n.wrapT?n.wrapT:Lo,o.magFilter=void 0!==n.magFilter?n.magFilter:No,o.minFilter=void 0!==n.minFilter?n.minFilter:Fo,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=No),o.needsUpdate=!0,t&&t(o,n))},n,r),o}}),Object.assign(Rn.prototype,{load:function(e,t,n,r){var i=this,o=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(o.onload=function(){o.onload=null,URL.revokeObjectURL(o.src),t&&t(o),i.manager.itemEnd(e)},o.onerror=r,0===e.indexOf("data:"))o.src=e;else{var a=new En;a.setPath(this.path),a.setResponseType("blob"),a.setWithCredentials(this.withCredentials),a.load(e,function(e){o.src=URL.createObjectURL(e)},n,r)}return i.manager.itemStart(e),o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Cn.prototype,{load:function(e,t,n,r){function i(n){a.load(e[n],function(e){o.images[n]=e,s++,6===s&&(o.needsUpdate=!0,t&&t(o))},void 0,r)}var o=new h,a=new Rn(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);for(var s=0,c=0;c<e.length;++c)i(c);return o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(An.prototype,{load:function(e,t,n,i){var o=new r,a=new Rn(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setWithCredentials(this.withCredentials),a.setPath(this.path),a.load(e,function(n){var r=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);o.format=r?$o:ea,o.image=n,o.needsUpdate=!0,void 0!==t&&t(o)},n,i),o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this}}),Ln.prototype=Object.assign(Object.create(ue.prototype),{constructor:Ln,isLight:!0,copy:function(e){return ue.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Pn.prototype=Object.assign(Object.create(Ln.prototype),{constructor:Pn,isHemisphereLight:!0,copy:function(e){return Ln.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(On.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),kn.prototype=Object.assign(Object.create(On.prototype),{constructor:kn,isSpotLightShadow:!0,update:function(e){var t=2*Ua.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height,r=e.distance||500,i=this.camera;t===i.fov&&n===i.aspect&&r===i.far||(i.fov=t,i.aspect=n,i.far=r,i.updateProjectionMatrix())}}),In.prototype=Object.assign(Object.create(Ln.prototype),{constructor:In,isSpotLight:!0,copy:function(e){return Ln.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Dn.prototype=Object.assign(Object.create(Ln.prototype),{constructor:Dn,isPointLight:!0,copy:function(e){return Ln.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Nn.prototype=Object.assign(Object.create(On.prototype),{constructor:Nn}),Un.prototype=Object.assign(Object.create(Ln.prototype),{constructor:Un,isDirectionalLight:!0,copy:function(e){return Ln.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Fn.prototype=Object.assign(Object.create(Ln.prototype),{constructor:Fn,isAmbientLight:!0});var nu={arraySlice:function(e,t,n){return nu.isTypedArray(e)?new e.constructor(e.subarray(t,n)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,n){return e[t]-e[n]}for(var n=e.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(t),r},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,c=0;c!==t;++c)i[a++]=e[s+c];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a)){do a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++];while(void 0!==o)}else if(void 0!==a.toArray){do a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++];while(void 0!==o)}else do a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++];while(void 0!==o)}}};jn.prototype={constructor:jn,evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}{if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){var c=n+o>>>1;e<t[c]?o=c:n=c+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(e,t,n,r){throw new Error("call to abstract method")},intervalChanged_:function(e,t,n){}},Object.assign(jn.prototype,{beforeStart_:jn.prototype.copySampleValue_,afterEnd_:jn.prototype.copySampleValue_}),Bn.prototype=Object.assign(Object.create(jn.prototype),{constructor:Bn,DefaultSettings_:{endingStart:wa,endingEnd:wa},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case xa:i=e,a=2*t-n;break;case Ta:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case xa:o=e,s=2*n-t;break;case Ta:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var c=.5*(n-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(s-n),this._offsetPrev=i*u,this._offsetNext=o*u},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,u=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,p=this._weightNext,d=(n-t)/(r-t),f=d*d,m=f*d,v=-h*m+2*h*f-h*d,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*d+1,y=(-1-p)*m+(1.5+p)*f+.5*d,b=p*m-p*f,_=0;_!==a;++_)i[_]=v*o[u+_]+g*o[c+_]+y*o[s+_]+b*o[l+_];return i}}),zn.prototype=Object.assign(Object.create(jn.prototype),{constructor:zn,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,u=(n-t)/(r-t),l=1-u,h=0;h!==a;++h)i[h]=o[c+h]*l+o[s+h]*u;return i}}),Gn.prototype=Object.assign(Object.create(jn.prototype),{constructor:Gn,interpolate_:function(e,t,n,r){return this.copySampleValue_(e-1)}});var ru;ru={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:ba,InterpolantFactoryMethodDiscrete:function(e){return new Gn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new zn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Bn(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case ya:t=this.InterpolantFactoryMethodDiscrete;break;case ba:t=this.InterpolantFactoryMethodLinear;break;case _a:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return void console.warn(n)}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ya;case this.InterpolantFactoryMethodLinear:return ba;case this.InterpolantFactoryMethodSmooth:return _a}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;o!==-1&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);var a=this.getValueSize();this.times=nu.arraySlice(n,i,o),this.values=nu.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("invalid value size in track",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("track is empty",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("time is not a valid number",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("out of order keys",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&nu.isTypedArray(r))for(var a=0,c=r.length;a!==c;++a){var u=r[a];if(isNaN(u)){console.error("value is not a valid number",this,a,u),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===_a,i=1,o=e.length-1,a=1;a<o;++a){var s=!1,c=e[a],u=e[a+1];if(c!==u&&(1!==a||c!==c[0]))if(r)s=!0;else for(var l=a*n,h=l-n,p=l+n,d=0;d!==n;++d){var f=t[l+d];if(f!==t[h+d]||f!==t[p+d]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];for(var m=a*n,v=i*n,d=0;d!==n;++d)t[v+d]=t[m+d]}++i}}if(o>0){e[i]=e[o];for(var m=o*n,v=i*n,d=0;d!==n;++d)t[v+d]=t[m+d];++i}return i!==e.length&&(this.times=nu.arraySlice(e,0,i),this.values=nu.arraySlice(t,0,i*n)),this}},Hn.prototype=Object.assign(Object.create(ru),{constructor:Hn,ValueTypeName:"vector"}),Wn.prototype=Object.assign(Object.create(jn.prototype),{constructor:Wn,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=(n-t)/(r-t),l=s+a;s!==l;s+=4)c.slerpFlat(i,0,o,s-a,o,s,u);return i}}),Xn.prototype=Object.assign(Object.create(ru),{constructor:Xn,ValueTypeName:"quaternion",DefaultInterpolation:ba,InterpolantFactoryMethodLinear:function(e){return new Wn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),qn.prototype=Object.assign(Object.create(ru),{constructor:qn,ValueTypeName:"number"}),Yn.prototype=Object.assign(Object.create(ru),{constructor:Yn,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:ya,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Zn.prototype=Object.assign(Object.create(ru),{constructor:Zn,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:ya,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Kn.prototype=Object.assign(Object.create(ru),{constructor:Kn,ValueTypeName:"color"}),Jn.prototype=ru,ru.constructor=Jn,Object.assign(Jn,{parse:function(e){if(void 0===e.type)throw new Error("track type undefined, can not parse");var t=Jn._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],r=[];nu.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:nu.convertArray(e.times,Array),values:nu.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return qn;case"vector":case"vector2":case"vector3":case"vector4":return Hn;case"color":return Kn;case"quaternion":return Xn;case"bool":case"boolean":return Zn;case"string":return Yn}throw new Error("Unsupported typeName: "+e)}}),Qn.prototype={constructor:Qn,resetDuration:function(){for(var e=this.tracks,t=0,n=0,r=e.length;n!==r;++n){var i=this.tracks[n];t=Math.max(t,i.times[i.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},Object.assign(Qn,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(Jn.parse(n[i]).scale(r));return new Qn(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={
name:e.name,duration:e.duration,tracks:t},i=0,o=n.length;i!==o;++i)t.push(Jn.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],c=[];s.push((a+i-1)%i,a,(a+1)%i),c.push(0,1,0);var u=nu.getKeyframeOrder(s);s=nu.sortedArray(s,1,u),c=nu.sortedArray(c,1,u),r||0!==s[0]||(s.push(i),c.push(c[0])),o.push(new qn(".morphTargetInfluences["+t[a].name+"]",s,c).scale(1/n))}return new Qn(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],c=s.name.match(i);if(c&&c.length>1){var u=c[1],l=r[u];l||(r[u]=l=[]),l.push(s)}}var h=[];for(var u in r)h.push(Qn.CreateFromMorphTargetSequence(u,r[u],t,n));return h},parseAnimation:function(e,t){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];nu.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],c=0;c<s.length;c++){var u=s[c].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var l={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var p=0;p<u[h].morphTargets.length;p++)l[u[h].morphTargets[p]]=-1;for(var d in l){for(var f=[],m=[],p=0;p!==u[h].morphTargets.length;++p){var v=u[h];f.push(v.time),m.push(v.morphTarget===d?1:0)}r.push(new qn(".morphTargetInfluence["+d+"]",f,m))}o=l.length*(a||1)}else{var g=".bones["+t[c].name+"]";n(Hn,g+".position",u,"pos",r),n(Xn,g+".quaternion",u,"rot",r),n(Hn,g+".scale",u,"scl",r)}}if(0===r.length)return null;var y=new Qn(i,o,r);return y}}),Object.assign($n.prototype,{load:function(e,t,n,r){var i=this,o=new En(i.manager);o.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setTextures:function(e){this.textures=e},parse:function(e){function t(e){return void 0===r[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),r[e]}var r=this.textures,i=new Qc[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.uniforms&&(i.uniforms=e.uniforms),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.shading&&(i.shading=e.shading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=t(e.map)),void 0!==e.alphaMap&&(i.alphaMap=t(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=t(e.normalMap)),void 0!==e.normalScale){var o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),i.normalScale=(new n).fromArray(o)}if(void 0!==e.displacementMap&&(i.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=t(e.specularMap)),void 0!==e.envMap&&(i.envMap=t(e.envMap)),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.lightMap&&(i.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.materials)for(var a=0,s=e.materials.length;a<s;a++)i.materials.push(this.parse(e.materials[a]));return i}}),Object.assign(er.prototype,{load:function(e,t,n,r){var i=this,o=new En(i.manager);o.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new Ae,n=e.data.index,r={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==n){var i=new r[n.type](n.array);t.setIndex(new me(i,1))}var o=e.data.attributes;for(var a in o){var s=o[a],i=new r[s.type](s.array);t.addAttribute(a,new me(i,s.itemSize,s.normalized))}var c=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==c)for(var l=0,h=c.length;l!==h;++l){var p=c[l];t.addGroup(p.start,p.count,p.materialIndex)}var d=e.data.boundingSphere;if(void 0!==d){var f=new u;void 0!==d.center&&f.fromArray(d.center),t.boundingSphere=new te(f,d.radius)}return t}}),tr.prototype={constructor:tr,crossOrigin:void 0,extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:function(){var e,t,n;return function(r,i,o){function a(e,n,r,a,c){var u,l=i+e,h=tr.Handlers.get(l);null!==h?u=h.load(l):(t.setCrossOrigin(o),u=t.load(l)),void 0!==n&&(u.repeat.fromArray(n),1!==n[0]&&(u.wrapS=Ao),1!==n[1]&&(u.wrapT=Ao)),void 0!==r&&u.offset.fromArray(r),void 0!==a&&("repeat"===a[0]&&(u.wrapS=Ao),"mirror"===a[0]&&(u.wrapS=Po),"repeat"===a[1]&&(u.wrapT=Ao),"mirror"===a[1]&&(u.wrapT=Po)),void 0!==c&&(u.anisotropy=c);var p=Ua.generateUUID();return s[p]=u,p}void 0===e&&(e=new X),void 0===t&&(t=new An),void 0===n&&(n=new $n);var s={},c={uuid:Ua.generateUUID(),type:"MeshLambertMaterial"};for(var u in r){var l=r[u];switch(u){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=l;break;case"blending":c.blending=Bi[l];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",u,"is no longer supported.");break;case"colorDiffuse":c.color=e.fromArray(l).getHex();break;case"colorSpecular":c.specular=e.fromArray(l).getHex();break;case"colorEmissive":c.emissive=e.fromArray(l).getHex();break;case"specularCoef":c.shininess=l;break;case"shading":"basic"===l.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===l.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===l.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=a(l,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=a(l,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=a(l,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=a(l,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=a(l,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=l;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=a(l,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=[l,l];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=a(l,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=a(l,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=a(l,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=a(l,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=Ri;break;case"doubleSided":c.side=Ci;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=l;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[u]=l;break;case"vertexColors":l===!0&&(c.vertexColors=ki),"face"===l&&(c.vertexColors=Oi);break;default:console.error("THREE.Loader.createMaterial: Unsupported",u,l)}}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,c.opacity<1&&(c.transparent=!0),n.setTextures(s),n.parse(c)}}()},tr.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],o=t[n+1];if(i.test(e))return o}return null}},Object.assign(nr.prototype,{load:function(e,t,n,r){var i=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:tr.prototype.extractUrlBase(e),a=new En(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,function(n){var r=JSON.parse(n),a=r.metadata;if(void 0!==a){var s=a.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}}var c=i.parse(r,o);t(c.geometry,c.materials)},n,r)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){function r(t){function r(e,t){return e&1<<t}var i,o,a,s,l,h,p,d,f,m,v,g,y,b,_,w,x,T,E,M,S,R,C,A,L,P,O,k=e.faces,I=e.vertices,D=e.normals,N=e.colors,U=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&U++;for(i=0;i<U;i++)c.faceVertexUvs[i]=[]}for(s=0,l=I.length;s<l;)T=new u,T.x=I[s++]*t,T.y=I[s++]*t,T.z=I[s++]*t,c.vertices.push(T);for(s=0,l=k.length;s<l;)if(m=k[s++],v=r(m,0),g=r(m,1),y=r(m,3),b=r(m,4),_=r(m,5),w=r(m,6),x=r(m,7),v){if(M=new de,M.a=k[s],M.b=k[s+1],M.c=k[s+3],S=new de,S.a=k[s+1],S.b=k[s+2],S.c=k[s+3],s+=4,g&&(f=k[s++],M.materialIndex=f,S.materialIndex=f),a=c.faces.length,y)for(i=0;i<U;i++)for(A=e.uvs[i],c.faceVertexUvs[i][a]=[],c.faceVertexUvs[i][a+1]=[],o=0;o<4;o++)d=k[s++],P=A[2*d],O=A[2*d+1],L=new n(P,O),2!==o&&c.faceVertexUvs[i][a].push(L),0!==o&&c.faceVertexUvs[i][a+1].push(L);if(b&&(p=3*k[s++],M.normal.set(D[p++],D[p++],D[p]),S.normal.copy(M.normal)),_)for(i=0;i<4;i++)p=3*k[s++],C=new u(D[p++],D[p++],D[p]),2!==i&&M.vertexNormals.push(C),0!==i&&S.vertexNormals.push(C);if(w&&(h=k[s++],R=N[h],M.color.setHex(R),S.color.setHex(R)),x)for(i=0;i<4;i++)h=k[s++],R=N[h],2!==i&&M.vertexColors.push(new X(R)),0!==i&&S.vertexColors.push(new X(R));c.faces.push(M),c.faces.push(S)}else{if(E=new de,E.a=k[s++],E.b=k[s++],E.c=k[s++],g&&(f=k[s++],E.materialIndex=f),a=c.faces.length,y)for(i=0;i<U;i++)for(A=e.uvs[i],c.faceVertexUvs[i][a]=[],o=0;o<3;o++)d=k[s++],P=A[2*d],O=A[2*d+1],L=new n(P,O),c.faceVertexUvs[i][a].push(L);if(b&&(p=3*k[s++],E.normal.set(D[p++],D[p++],D[p])),_)for(i=0;i<3;i++)p=3*k[s++],C=new u(D[p++],D[p++],D[p]),E.vertexNormals.push(C);if(w&&(h=k[s++],E.color.setHex(N[h])),x)for(i=0;i<3;i++)h=k[s++],E.vertexColors.push(new X(N[h]));c.faces.push(E)}}function i(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var n=0,r=e.skinWeights.length;n<r;n+=t){var i=e.skinWeights[n],a=t>1?e.skinWeights[n+1]:0,s=t>2?e.skinWeights[n+2]:0,u=t>3?e.skinWeights[n+3]:0;c.skinWeights.push(new o(i,a,s,u))}if(e.skinIndices)for(var n=0,r=e.skinIndices.length;n<r;n+=t){var l=e.skinIndices[n],h=t>1?e.skinIndices[n+1]:0,p=t>2?e.skinIndices[n+2]:0,d=t>3?e.skinIndices[n+3]:0;c.skinIndices.push(new o(l,h,p,d))}c.bones=e.bones,c.bones&&c.bones.length>0&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When skinning, number of vertices ("+c.vertices.length+"), skinIndices ("+c.skinIndices.length+"), and skinWeights ("+c.skinWeights.length+") should match.")}function a(t){if(void 0!==e.morphTargets)for(var n=0,r=e.morphTargets.length;n<r;n++){c.morphTargets[n]={},c.morphTargets[n].name=e.morphTargets[n].name,c.morphTargets[n].vertices=[];for(var i=c.morphTargets[n].vertices,o=e.morphTargets[n].vertices,a=0,s=o.length;a<s;a+=3){var l=new u;l.x=o[a]*t,l.y=o[a+1]*t,l.z=o[a+2]*t,i.push(l)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=c.faces,p=e.morphColors[0].colors,n=0,r=h.length;n<r;n++)h[n].color.fromArray(p,3*n)}}function s(){var t=[],n=[];void 0!==e.animation&&n.push(e.animation),void 0!==e.animations&&(e.animations.length?n=n.concat(e.animations):n.push(e.animations));for(var r=0;r<n.length;r++){var i=Qn.parseAnimation(n[r],c.bones);i&&t.push(i)}if(c.morphTargets){var o=Qn.CreateClipsFromMorphTargetSequences(c.morphTargets,10);t=t.concat(o)}t.length>0&&(c.animations=t)}var c=new Se,l=void 0!==e.scale?1/e.scale:1;if(r(l),i(),a(l),s(),c.computeFaceNormals(),c.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:c};var h=tr.prototype.initMaterials(e.materials,t,this.crossOrigin);return{geometry:c,materials:h}}}),Object.assign(rr.prototype,{load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this,o=new En(i.manager);o.load(e,function(e){i.parse(JSON.parse(e),t)},n,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseGeometries(e.geometries),r=this.parseImages(e.images,function(){void 0!==t&&t(a)}),i=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,i),a=this.parseObject(e.object,n,o);return e.animations&&(a.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(a),a},parseGeometries:function(e){var t={};if(void 0!==e)for(var n=new nr,r=new er,i=0,o=e.length;i<o;i++){var a,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Jc[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Jc[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Jc[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Jc[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Jc[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Jc[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":a=new Jc[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Jc[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Jc[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Jc[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Jc[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":a=r.parse(s);break;case"Geometry":a=n.parse(s.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),t[s.uuid]=a}return t},parseMaterials:function(e,t){var n={};if(void 0!==e){var r=new $n;r.setTextures(t);for(var i=0,o=e.length;i<o;i++){var a=r.parse(e[i]);n[a.uuid]=a}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=Qn.parse(e[n]);t.push(r)}return t},parseImages:function(e,t){function n(e){return r.manager.itemStart(e),a.load(e,function(){r.manager.itemEnd(e)},void 0,function(){r.manager.itemError(e)})}var r=this,i={};if(void 0!==e&&e.length>0){var o=new Tn(t),a=new Rn(o);a.setCrossOrigin(this.crossOrigin);for(var s=0,c=e.length;s<c;s++){var u=e[s],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:r.texturePath+u.url;i[u.uuid]=n(l)}}return i},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var o=0,a=e.length;o<a;o++){var s=e[o];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var c=new r(t[s.image]);c.needsUpdate=!0,c.uuid=s.uuid,void 0!==s.name&&(c.name=s.name),void 0!==s.mapping&&(c.mapping=n(s.mapping,Co)),void 0!==s.offset&&c.offset.fromArray(s.offset),void 0!==s.repeat&&c.repeat.fromArray(s.repeat),void 0!==s.wrap&&(c.wrapS=n(s.wrap[0],Oo),c.wrapT=n(s.wrap[1],Oo)),void 0!==s.minFilter&&(c.minFilter=n(s.minFilter,jo)),void 0!==s.magFilter&&(c.magFilter=n(s.magFilter,jo)),void 0!==s.anisotropy&&(c.anisotropy=s.anisotropy),void 0!==s.flipY&&(c.flipY=s.flipY),i[s.uuid]=c}return i},parseObject:function(){var e=new l;return function(t,n,r){function i(e){return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),n[e]}function o(e){if(void 0!==e)return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),r[e]}var a;switch(t.type){case"Scene":a=new ht,void 0!==t.background&&Number.isInteger(t.background)&&(a.background=new X(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?a.fog=new lt(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(a.fog=new ut(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":a=new Ie(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(a.focus=t.focus),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new De(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":a=new Fn(t.color,t.intensity);break;case"DirectionalLight":a=new Un(t.color,t.intensity);break;case"PointLight":a=new Dn(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":a=new In(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new Pn(t.color,t.groundColor,t.intensity);break;case"Mesh":var s=i(t.geometry),c=o(t.material);a=s.bones&&s.bones.length>0?new bt(s,c):new Le(s,c);break;case"LOD":a=new mt;break;case"Line":a=new wt(i(t.geometry),o(t.material),t.mode);break;case"LineSegments":a=new xt(i(t.geometry),o(t.material));break;case"PointCloud":case"Points":a=new Et(i(t.geometry),o(t.material));break;case"Sprite":a=new ft(o(t.material));break;case"Group":a=new Mt;break;default:a=new ue}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.children)for(var u in t.children)a.add(this.parseObject(t.children[u],n,r));if("LOD"===t.type)for(var l=t.levels,h=0;h<l.length;h++){var p=l[h],u=a.getObjectByProperty("uuid",p.object);void 0!==u&&a.addLevel(u,p.distance)}return a}}()}),ir.prototype={constructor:ir,getPoint:function(e){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){e||(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){e||(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)t=this.getPoint(n/e),o+=t.distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t?t:e*r[o-1];for(var a,s=0,c=o-1;s<=c;)if(i=Math.floor(s+(c-s)/2),a=r[i]-n,a<0)s=i+1;else{if(!(a>0)){c=i;break}c=i-1}if(i=c,r[i]===n){var u=i/(o-1);return u}var l=r[i],h=r[i+1],p=h-l,d=(n-l)/p,u=(i+d)/(o-1);return u},getTangent:function(e){var t=1e-4,n=e-t,r=e+t;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),o=this.getPoint(r),a=o.clone().sub(i);return a.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,o=new u,a=[],s=[],c=[],h=new u,p=new l;for(n=0;n<=e;n++)r=n/e,a[n]=this.getTangentAt(r),a[n].normalize();s[0]=new u,c[0]=new u;var d=Number.MAX_VALUE,f=Math.abs(a[0].x),m=Math.abs(a[0].y),v=Math.abs(a[0].z);for(f<=d&&(d=f,o.set(1,0,0)),m<=d&&(d=m,o.set(0,1,0)),v<=d&&o.set(0,0,1),h.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],h),c[0].crossVectors(a[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),c[n]=c[n-1].clone(),h.crossVectors(a[n-1],a[n]),h.length()>Number.EPSILON&&(h.normalize(),i=Math.acos(Ua.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(p.makeRotationAxis(h,i))),c[n].crossVectors(a[n],s[n]);if(t===!0)for(i=Math.acos(Ua.clamp(s[0].dot(s[e]),-1,1)),i/=e,a[0].dot(h.crossVectors(s[0],s[e]))>0&&(i=-i),n=1;n<=e;n++)s[n].applyMatrix4(p.makeRotationAxis(a[n],i*n)),c[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:c}}},ir.create=function(e,t){return e.prototype=Object.create(ir.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},or.prototype=Object.create(ir.prototype),or.prototype.constructor=or,or.prototype.isLineCurve=!0,or.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},or.prototype.getPointAt=function(e){return this.getPoint(e)},or.prototype.getTangent=function(e){var t=this.v2.clone().sub(this.v1);return t.normalize()},ar.prototype=Object.assign(Object.create(ir.prototype),{constructor:ar,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new or(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){e||(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&o.isLineCurve?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),c=0;c<s.length;c++){var u=s[c];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new Se,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new u(i.x,i.y,i.z||0))}return t}}),sr.prototype=Object.create(ir.prototype),sr.prototype.constructor=sr,sr.prototype.isEllipseCurve=!0,sr.prototype.getPoint=function(e){for(var t=2*Math.PI,r=this.aEndAngle-this.aStartAngle,i=Math.abs(r)<Number.EPSILON;r<0;)r+=t;for(;r>t;)r-=t;r<Number.EPSILON&&(r=i?0:t),this.aClockwise!==!0||i||(r===t?r=-t:r-=t);var o=this.aStartAngle+e*r,a=this.aX+this.xRadius*Math.cos(o),s=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),l=a-this.aX,h=s-this.aY;a=l*c-h*u+this.aX,s=l*u+h*c+this.aY}return new n(a,s)};var iu={tangentQuadraticBezier:function(e,t,n,r){return 2*(1-e)*(n-t)+2*e*(r-n)},tangentCubicBezier:function(e,t,n,r,i){return-3*t*(1-e)*(1-e)+3*n*(1-e)*(1-e)-6*e*n*(1-e)+6*e*r*(1-e)-3*e*e*r+3*e*e*i},tangentSpline:function(e,t,n,r,i){var o=6*e*e-6*e,a=3*e*e-4*e+1,s=-6*e*e+6*e,c=3*e*e-2*e;return o+a+s+c},interpolate:function(e,t,n,r,i){var o=.5*(n-e),a=.5*(r-t),s=i*i,c=i*s;return(2*t-2*n+o+a)*c+(-3*t+3*n-2*o-a)*s+o*i+t}};cr.prototype=Object.create(ir.prototype),cr.prototype.constructor=cr,cr.prototype.isSplineCurve=!0,cr.prototype.getPoint=function(e){var t=this.points,r=(t.length-1)*e,i=Math.floor(r),o=r-i,a=t[0===i?i:i-1],s=t[i],c=t[i>t.length-2?t.length-1:i+1],u=t[i>t.length-3?t.length-1:i+2],l=iu.interpolate;return new n(l(a.x,s.x,c.x,u.x,o),l(a.y,s.y,c.y,u.y,o))},ur.prototype=Object.create(ir.prototype),ur.prototype.constructor=ur,ur.prototype.getPoint=function(e){var t=Kc.b3;return new n(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},ur.prototype.getTangent=function(e){var t=iu.tangentCubicBezier;return new n(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},lr.prototype=Object.create(ir.prototype),lr.prototype.constructor=lr,lr.prototype.getPoint=function(e){var t=Kc.b2;return new n(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y))},lr.prototype.getTangent=function(e){var t=iu.tangentQuadraticBezier;return new n(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y)).normalize()};var ou=Object.assign(Object.create(ar.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var r=new or(this.currentPoint.clone(),new n(e,t));this.curves.push(r),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,r,i){var o=new lr(this.currentPoint.clone(),new n(e,t),new n(r,i));this.curves.push(o),this.currentPoint.set(r,i)},bezierCurveTo:function(e,t,r,i,o,a){var s=new ur(this.currentPoint.clone(),new n(e,t),new n(r,i),new n(o,a));this.curves.push(s),this.currentPoint.set(o,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),n=new cr(t);this.curves.push(n),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){var c=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+c,t+u,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,o,a,s){var c=new sr(e,t,n,r,i,o,a,s);if(this.curves.length>0){var u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);var l=c.getPoint(1);this.currentPoint.copy(l)}});hr.prototype=Object.assign(Object.create(ou),{constructor:hr,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}}),pr.prototype=ou,ou.constructor=pr,dr.prototype={moveTo:function(e,t){this.currentPath=new pr,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new hr;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],c=s.x-a.x,u=s.y-a.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(a=t[o],c=-c,s=t[i],u=-u),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var l=u*(e.x-a.x)-c*(e.y-a.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=Kc.isClockWise,o=this.subPaths;if(0===o.length)return[];if(t===!0)return n(o);var a,s,c,u=[];if(1===o.length)return s=o[0],c=new hr,c.curves=s.curves,u.push(c),u;var l=!i(o[0].getPoints());l=e?!l:l;var h,p=[],d=[],f=[],m=0;d[m]=void 0,f[m]=[];for(var v=0,g=o.length;v<g;v++)s=o[v],h=s.getPoints(),a=i(h),a=e?!a:a,a?(!l&&d[m]&&m++,d[m]={s:new hr,p:h},d[m].s.curves=s.curves,l&&m++,f[m]=[]):f[m].push({h:s,p:h[0]});if(!d[0])return n(o);if(d.length>1){for(var y=!1,b=[],_=0,w=d.length;_<w;_++)p[_]=[];for(var _=0,w=d.length;_<w;_++)for(var x=f[_],T=0;T<x.length;T++){for(var E=x[T],M=!0,S=0;S<d.length;S++)r(E.p,d[S].p)&&(_!==S&&b.push({froms:_,tos:S,hole:T}),M?(M=!1,p[S].push(E)):y=!0);M&&p[_].push(E)}b.length>0&&(y||(f=p))}for(var R,v=0,C=d.length;v<C;v++){c=d[v].s,u.push(c),R=f[v];for(var A=0,L=R.length;A<L;A++)c.holes.push(R[A].h)}return u}},Object.assign(fr.prototype,{isFont:!0,generateShapes:function(e,t,n){function r(e){for(var n=String(e).split(""),r=t/o.resolution,a=0,s=[],c=0;c<n.length;c++){
var u=i(n[c],r,a);a+=u.offset,s.push(u.path)}return s}function i(e,t,r){var i=o.glyphs[e]||o.glyphs["?"];if(i){var a,s,c,u,l,h,p,d,f,m,v,g=new dr,y=[],b=Kc.b2,_=Kc.b3;if(i.o)for(var w=i._cachedOutline||(i._cachedOutline=i.o.split(" ")),x=0,T=w.length;x<T;){var E=w[x++];switch(E){case"m":a=w[x++]*t+r,s=w[x++]*t,g.moveTo(a,s);break;case"l":a=w[x++]*t+r,s=w[x++]*t,g.lineTo(a,s);break;case"q":if(c=w[x++]*t+r,u=w[x++]*t,p=w[x++]*t+r,d=w[x++]*t,g.quadraticCurveTo(p,d,c,u),v=y[y.length-1]){l=v.x,h=v.y;for(var M=1;M<=n;M++){var S=M/n;b(S,l,p,c),b(S,h,d,u)}}break;case"b":if(c=w[x++]*t+r,u=w[x++]*t,p=w[x++]*t+r,d=w[x++]*t,f=w[x++]*t+r,m=w[x++]*t,g.bezierCurveTo(p,d,f,m,c,u),v=y[y.length-1]){l=v.x,h=v.y;for(var M=1;M<=n;M++){var S=M/n;_(S,l,p,f,c),_(S,h,d,m,u)}}}}return{offset:i.ha*t,path:g}}}void 0===t&&(t=100),void 0===n&&(n=4);for(var o=this.data,a=r(e),s=[],c=0,u=a.length;c<u;c++)Array.prototype.push.apply(s,a[c].toShapes());return s}}),Object.assign(mr.prototype,{load:function(e,t,n,r){var i=this,o=new En(this.manager);o.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)},n,r)},parse:function(e){return new fr(e)}});var au;Object.assign(gr.prototype,{load:function(e,t,n,r){var i=new En(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(e){var n=vr();n.decodeAudioData(e,function(e){t(e)})},n,r)}}),Object.assign(yr.prototype,{update:function(){var e,t,n,r,i,o,a,s=new l,c=new l;return function(u){var l=e!==this||t!==u.focus||n!==u.fov||r!==u.aspect*this.aspect||i!==u.near||o!==u.far||a!==u.zoom;if(l){e=this,t=u.focus,n=u.fov,r=u.aspect*this.aspect,i=u.near,o=u.far,a=u.zoom;var h,p,d=u.projectionMatrix.clone(),f=this.eyeSep/2,m=f*i/t,v=i*Math.tan(Ua.DEG2RAD*n*.5)/a;c.elements[12]=-f,s.elements[12]=f,h=-v*r+m,p=v*r+m,d.elements[0]=2*i/(p-h),d.elements[8]=(p+h)/(p-h),this.cameraL.projectionMatrix.copy(d),h=-v*r-m,p=v*r-m,d.elements[0]=2*i/(p-h),d.elements[8]=(p+h)/(p-h),this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(u.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy(u.matrixWorld).multiply(s)}}()}),br.prototype=Object.create(ue.prototype),br.prototype.constructor=br,_r.prototype=Object.assign(Object.create(ue.prototype),{constructor:_r,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new u,t=new c,n=new u,r=new u;return function(i){ue.prototype.updateMatrixWorld.call(this,i);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,a.x,a.y,a.z)}}()}),wr.prototype=Object.assign(Object.create(ue.prototype),{constructor:wr,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.source.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");var e=this.context.createBufferSource();return e.buffer=this.source.buffer,e.loop=this.source.loop,e.onended=this.source.onended,e.start(0,this.startTime),e.playbackRate.value=this.playbackRate,this.isPlaying=!0,this.source=e,this.connect()},pause:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),this.isPlaying===!0?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=e,this.isPlaying===!0&&(this.source.playbackRate.value=this.playbackRate),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.source.loop},setLoop:function(e){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):void(this.source.loop=e)},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),xr.prototype=Object.assign(Object.create(wr.prototype),{constructor:xr,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new u;return function(t){ue.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(Tr.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Er.prototype={constructor:Er,accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{o+=t;var s=t/o;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(n,r,a,1-i,t)}for(var s=t,c=t+t;s!==c;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r,i){c.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}},Mr.prototype={constructor:Mr,getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Mr.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("  trying to update node for track: "+this.path+" but it wasn't found.");if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("  can not bind to material as node does not have a material",this);if(!e.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("  can not bind to objectName of node, undefined",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);e=e[o]}}var s=e[r];if(void 0===s){var c=t.nodeName;return void console.error("  trying to update property for track: "+c+"."+r+" but it wasn't found.",e)}var u=this.Versioning.None;void 0!==e.needsUpdate?(u=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!e.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):void 0!==s.length?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][u]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(Mr.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:Mr.prototype.getValue,_setValue_unbound:Mr.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.node[this.propertyName]=e[t]},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),Mr.Composite=function(e,t,n){var r=n||Mr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)},Mr.Composite.prototype={constructor:Mr.Composite,getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Mr.create=function(e,t,n){return e&&e.isAnimationObjectGroup?new Mr.Composite(e,t,n):new Mr(e,t,n)},Mr.parseTrackName=function(e){var t=/^((?:\w+[\/:])*)(\w+)?(?:\.(\w+)(?:\[(.+)\])?)?\.(\w+)(?:\[(.+)\])?$/,n=t.exec(e);if(!n)throw new Error("cannot parse trackName at all: "+e);var r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]};if(null===r.propertyName||0===r.propertyName.length)throw new Error("can not parse propertyName from trackName: "+e);return r},Mr.findNode=function(e,t){if(!t||""===t||"root"===t||"."===t||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=function(e){for(var n=0;n<e.bones.length;n++){var r=e.bones[n];if(r.name===t)return r}return null},r=n(e.skeleton);if(r)return r}if(e.children){var i=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r.name===t||r.uuid===t)return r;var o=i(r.children);if(o)return o}return null},o=i(e.children);if(o)return o}return null},Sr.prototype={constructor:Sr,isAnimationObjectGroup:!0,add:function(e){for(var t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._paths,a=this._parsedPaths,s=this._bindings,c=s.length,u=0,l=arguments.length;u!==l;++u){var h=arguments[u],p=h.uuid,d=i[p];if(void 0===d){d=n++,i[p]=d,t.push(h);for(var f=0,m=c;f!==m;++f)s[f].push(new Mr(h,o[f],a[f]))}else if(d<r){var v=t[d],g=--r,y=t[g];i[y.uuid]=d,t[d]=y,i[p]=g,t[g]=h;for(var f=0,m=c;f!==m;++f){var b=s[f],_=b[g],w=b[d];b[d]=_,void 0===w&&(w=new Mr(h,o[f],a[f])),b[g]=w}}else t[d]!==v&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=r},remove:function(e){for(var t=this._objects,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var c=arguments[a],u=c.uuid,l=r[u];if(void 0!==l&&l>=n){var h=n++,p=t[h];r[p.uuid]=l,t[l]=p,r[u]=h,t[h]=c;for(var d=0,f=o;d!==f;++d){var m=i[d],v=m[h],g=m[l];m[l]=v,m[h]=g}}}this.nCachedObjects_=n},uncache:function(e){for(var t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._bindings,a=o.length,s=0,c=arguments.length;s!==c;++s){var u=arguments[s],l=u.uuid,h=i[l];if(void 0!==h)if(delete i[l],h<r){var p=--r,d=t[p],f=--n,m=t[f];i[d.uuid]=h,t[h]=d,i[m.uuid]=p,t[p]=m,t.pop();for(var v=0,g=a;v!==g;++v){var y=o[v],b=y[p],_=y[f];y[h]=b,y[p]=_,y.pop()}}else{var f=--n,m=t[f];i[m.uuid]=h,t[h]=m,t.pop();for(var v=0,g=a;v!==g;++v){var y=o[v];y[h]=y[f],y.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,c=s.length,u=this.nCachedObjects_,l=new Array(c);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(l);for(var h=u,p=s.length;h!==p;++h){var d=s[h];l[h]=new Mr(d,e,t)}return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a],c=e[a];t[c]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}},Rr.prototype={constructor:Rr,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,c=o.sampleValues;return s[0]=i,s[1]=i+n,c[0]=e/a,c[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var c=this._interpolants,u=this._propertyBindings,l=0,h=c.length;l!==h;++l)c[l].evaluate(a),u[l].accumulate(r,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,r=this.loop,i=this._loopCount;if(r===ma){i===-1&&(this.loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var o=r===ga;if(i===-1&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(0===s){var c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1===(1&i))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=xa,r.endingEnd=xa):(e?r.endingStart=this.zeroSlopeAtStart?xa:wa:r.endingStart=Ta,t?r.endingEnd=this.zeroSlopeAtEnd?xa:wa:r.endingEnd=Ta)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}},Object.assign(Cr.prototype,t.prototype,{clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Qn.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var c=a.actionByRoot[r];if(void 0!==c)return c;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var u=new Rr(this,i,t);return this._bindAction(u,s),this._addInactiveAction(u,o,r),u},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Qn.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a?a.actionByRoot[r]||null:null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(var i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){var s=t[a];s.enabled&&s._update(r,e,i,o)}for(var c=this._bindings,u=this._nActiveBindings,a=0;a!==u;++a)c[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var c=o[a];this._deactivateAction(c);var u=c._cacheIndex,l=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,l._cacheIndex=u,t[u]=l,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,o=i[t];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,s=a[t];if(void 0!==s)for(var c in s){var u=s[c];u.restoreOriginalState(),this._removeInactiveBinding(u)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Object.assign(Cr.prototype,{_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,c=this._bindingsByRootAndName,u=c[s];void 0===u&&(u={},c[s]=u);for(var l=0;l!==i;++l){var h=r[l],p=h.name,d=u[p];if(void 0!==d)o[l]=d;else{if(d=o[l],void 0!==d){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,p));continue}var f=t&&t._propertyBindings[l].binding.parsedPath;d=new Er(Mr.create(n,p,f),h.ValueTypeName,h.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,s,p),o[l]=d}a[l].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,c=s[s.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,s[u]=c,s.pop(),e._byClipCacheIndex=null;var l=a.actionByRoot,h=(t._localRoot||this._root).uuid;delete l[h],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete a[i];e:{for(var u in a)break e;delete o[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new zn(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1)}),Lr.prototype=Object.create(Ae.prototype),Lr.prototype.constructor=Lr,Lr.prototype.isInstancedBufferGeometry=!0,Lr.prototype.addGroup=function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n})},Lr.prototype.copy=function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var n=e.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var o=e.groups,a=0,s=o.length;a<s;a++){var c=o[a];this.addGroup(c.start,c.count,c.materialIndex)}return this},Pr.prototype={constructor:Pr,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},Or.prototype={constructor:Or,isInterleavedBuffer:!0,set needsUpdate(e){e===!0&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)}},kr.prototype=Object.create(Or.prototype),kr.prototype.constructor=kr,kr.prototype.isInstancedInterleavedBuffer=!0,kr.prototype.copy=function(e){return Or.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},Ir.prototype=Object.create(me.prototype),Ir.prototype.constructor=Ir,Ir.prototype.isInstancedBufferAttribute=!0,Ir.prototype.copy=function(e){return me.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},Dr.prototype={constructor:Dr,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var n=[];return Ur(e,this,n,t),n.sort(Nr),n},intersectObjects:function(e,t){var n=[];if(Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var r=0,i=e.length;r<i;r++)Ur(e[r],this,n,t);return n.sort(Nr),n}},Fr.prototype={constructor:Fr,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=(performance||Date).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}},Br.prototype={constructor:Br,set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(Ua.clamp(e.y/this.radius,-1,1))),this}},zr.prototype=Object.create(Le.prototype),zr.prototype.constructor=zr,zr.prototype.createAnimation=function(e,t,n,r){var i={start:t,end:n,length:n-t+1,fps:r,duration:(n-t)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=i,this.animationsList.push(i)},zr.prototype.autoCreateAnimations=function(e){for(var t,n=/([a-z]+)_?(\d+)/i,r={},i=this.geometry,o=0,a=i.morphTargets.length;o<a;o++){var s=i.morphTargets[o],c=s.name.match(n);if(c&&c.length>1){var u=c[1];r[u]||(r[u]={start:1/0,end:-(1/0)});var l=r[u];o<l.start&&(l.start=o),o>l.end&&(l.end=o),t||(t=u)}}for(var u in r){var l=r[u];this.createAnimation(u,l.start,l.end,e);
}this.firstAnimation=t},zr.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},zr.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},zr.prototype.setAnimationFPS=function(e,t){var n=this.animationsMap[e];n&&(n.fps=t,n.duration=(n.end-n.start)/n.fps)},zr.prototype.setAnimationDuration=function(e,t){var n=this.animationsMap[e];n&&(n.duration=t,n.fps=(n.end-n.start)/n.duration)},zr.prototype.setAnimationWeight=function(e,t){var n=this.animationsMap[e];n&&(n.weight=t)},zr.prototype.setAnimationTime=function(e,t){var n=this.animationsMap[e];n&&(n.time=t)},zr.prototype.getAnimationTime=function(e){var t=0,n=this.animationsMap[e];return n&&(t=n.time),t},zr.prototype.getAnimationDuration=function(e){var t=-1,n=this.animationsMap[e];return n&&(t=n.duration),t},zr.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},zr.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},zr.prototype.update=function(e){for(var t=0,n=this.animationsList.length;t<n;t++){var r=this.animationsList[t];if(r.active){var i=r.duration/r.length;r.time+=r.direction*e,r.mirroredLoop?(r.time>r.duration||r.time<0)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),r.time<0&&(r.time=0,r.directionBackwards=!1)):(r.time=r.time%r.duration,r.time<0&&(r.time+=r.duration));var o=r.start+Ua.clamp(Math.floor(r.time/i),0,r.length-1),a=r.weight;o!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*a,this.morphTargetInfluences[o]=0,r.lastFrame=r.currentFrame,r.currentFrame=o);var s=r.time%i/i;r.directionBackwards&&(s=1-s),r.currentFrame!==r.lastFrame?(this.morphTargetInfluences[r.currentFrame]=s*a,this.morphTargetInfluences[r.lastFrame]=(1-s)*a):this.morphTargetInfluences[r.currentFrame]=a}}},Gr.prototype=Object.create(ue.prototype),Gr.prototype.constructor=Gr,Gr.prototype.isImmediateRenderObject=!0,Vr.prototype=Object.create(xt.prototype),Vr.prototype.constructor=Vr,Vr.prototype.update=function(){var e=new u,t=new u,n=new ne;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,c=a.faces,u=0,l=0,h=c.length;l<h;l++)for(var p=c[l],d=0,f=p.vertexNormals.length;d<f;d++){var m=s[p[r[d]]],v=p.vertexNormals[d];e.copy(m).applyMatrix4(i),t.copy(v).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u+=1,o.setXYZ(u,t.x,t.y,t.z),u+=1}else if(a&&a.isBufferGeometry)for(var g=a.attributes.position,y=a.attributes.normal,u=0,d=0,f=g.count;d<f;d++)e.set(g.getX(d),g.getY(d),g.getZ(d)).applyMatrix4(i),t.set(y.getX(d),y.getY(d),y.getZ(d)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u+=1,o.setXYZ(u,t.x,t.y,t.z),u+=1;return o.needsUpdate=!0,this}}(),Hr.prototype=Object.create(ue.prototype),Hr.prototype.constructor=Hr,Hr.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Hr.prototype.update=function(){var e=new u,t=new u;return function(){var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),Wr.prototype=Object.create(xt.prototype),Wr.prototype.constructor=Wr,Wr.prototype.getBoneList=function(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,this.getBoneList(e.children[n]));return t},Wr.prototype.update=function(){for(var e=this.geometry,t=(new l).getInverse(this.root.matrixWorld),n=new l,r=0,i=0;i<this.bones.length;i++){var o=this.bones[i];o.parent&&o.parent.isBone&&(n.multiplyMatrices(t,o.matrixWorld),e.vertices[r].setFromMatrixPosition(n),n.multiplyMatrices(t,o.parent.matrixWorld),e.vertices[r+1].setFromMatrixPosition(n),r+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},Xr.prototype=Object.create(Le.prototype),Xr.prototype.constructor=Xr,Xr.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Xr.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},qr.prototype=Object.create(ue.prototype),qr.prototype.constructor=qr,qr.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},qr.prototype.update=function(){var e=new u;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),Yr.prototype=Object.create(xt.prototype),Yr.prototype.constructor=Yr,Yr.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Zr.prototype=Object.create(xt.prototype),Zr.prototype.constructor=Zr,Zr.prototype.update=function(){var e=new u,t=new u,n=new ne;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,c=0,u=0,l=s.length;u<l;u++){var h=s[u],p=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),t.copy(p).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(c,e.x,e.y,e.z),c+=1,i.setXYZ(c,t.x,t.y,t.z),c+=1}return i.needsUpdate=!0,this}}(),Kr.prototype=Object.create(ue.prototype),Kr.prototype.constructor=Kr,Kr.prototype.dispose=function(){var e=this.children[0],t=this.children[1];e.geometry.dispose(),e.material.dispose(),t.geometry.dispose(),t.material.dispose()},Kr.prototype.update=function(){var e=new u,t=new u,n=new u;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e);var r=this.children[0],i=this.children[1];r.lookAt(n),r.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.lookAt(n),i.scale.z=n.length()}}(),Jr.prototype=Object.create(xt.prototype),Jr.prototype.constructor=Jr,Jr.prototype.update=function(){function e(e,o,a,s){r.set(o,a,s).unproject(i);var c=n[e];if(void 0!==c)for(var u=0,l=c.length;u<l;u++)t.vertices[c[u]].copy(r)}var t,n,r=new u,i=new ke;return function(){t=this.geometry,n=this.pointMap;var r=1,o=1;i.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-r,-o,-1),e("n2",r,-o,-1),e("n3",-r,o,-1),e("n4",r,o,-1),e("f1",-r,-o,1),e("f2",r,-o,1),e("f3",-r,o,1),e("f4",r,o,1),e("u1",.7*r,1.1*o,-1),e("u2",.7*-r,1.1*o,-1),e("u3",0,2*o,-1),e("cf1",-r,0,1),e("cf2",r,0,1),e("cf3",0,-o,1),e("cf4",0,o,1),e("cn1",-r,0,-1),e("cn2",r,0,-1),e("cn3",0,-o,-1),e("cn4",0,o,-1),t.verticesNeedUpdate=!0}}(),Qr.prototype=Object.create(Le.prototype),Qr.prototype.constructor=Qr,Qr.prototype.update=function(){this.box.setFromObject(this.object),this.box.getSize(this.scale),this.box.getCenter(this.position)},$r.prototype=Object.create(xt.prototype),$r.prototype.constructor=$r,$r.prototype.update=function(){var e=new ee;return function(t){if(t&&t.isBox3?e.copy(t):e.setFromObject(t),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var su=new Ae;su.addAttribute("position",new Te([0,0,0,0,1,0],3));var cu=new sn(0,.5,1,5,1);cu.translate(0,-.5,0),ei.prototype=Object.create(ue.prototype),ei.prototype.constructor=ei,ei.prototype.setDirection=function(){var e,t=new u;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),ei.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},ei.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},ti.prototype=Object.create(xt.prototype),ti.prototype.constructor=ti;var uu=function(){function e(){}var t=new u,n=new e,r=new e,i=new e;return e.prototype.init=function(e,t,n,r){this.c0=e,this.c1=n,this.c2=-3*e+3*t-2*n-r,this.c3=2*e-2*t+n+r},e.prototype.initNonuniformCatmullRom=function(e,t,n,r,i,o,a){var s=(t-e)/i-(n-e)/(i+o)+(n-t)/o,c=(n-t)/o-(r-t)/(o+a)+(r-n)/a;s*=o,c*=o,this.init(t,n,s,c)},e.prototype.initCatmullRom=function(e,t,n,r,i){this.init(t,n,i*(n-e),i*(r-t))},e.prototype.calc=function(e){var t=e*e,n=t*e;return this.c0+this.c1*e+this.c2*t+this.c3*n},ir.create(function(e){this.points=e||[],this.closed=!1},function(e){var o,a,s,c,l=this.points;c=l.length,c<2&&console.log("duh, you need at least 2 points"),o=(c-(this.closed?0:1))*e,a=Math.floor(o),s=o-a,this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/l.length)+1)*l.length:0===s&&a===c-1&&(a=c-2,s=1);var h,p,d,f;if(this.closed||a>0?h=l[(a-1)%c]:(t.subVectors(l[0],l[1]).add(l[0]),h=t),p=l[a%c],d=l[(a+1)%c],this.closed||a+2<c?f=l[(a+2)%c]:(t.subVectors(l[c-1],l[c-2]).add(l[c-1]),f=t),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var m="chordal"===this.type?.5:.25,v=Math.pow(h.distanceToSquared(p),m),g=Math.pow(p.distanceToSquared(d),m),y=Math.pow(d.distanceToSquared(f),m);g<1e-4&&(g=1),v<1e-4&&(v=g),y<1e-4&&(y=g),n.initNonuniformCatmullRom(h.x,p.x,d.x,f.x,v,g,y),r.initNonuniformCatmullRom(h.y,p.y,d.y,f.y,v,g,y),i.initNonuniformCatmullRom(h.z,p.z,d.z,f.z,v,g,y)}else if("catmullrom"===this.type){var b=void 0!==this.tension?this.tension:.5;n.initCatmullRom(h.x,p.x,d.x,f.x,b),r.initCatmullRom(h.y,p.y,d.y,f.y,b),i.initCatmullRom(h.z,p.z,d.z,f.z,b)}var _=new u(n.calc(s),r.calc(s),i.calc(s));return _})}();ni.prototype=Object.create(uu.prototype);var lu=ir.create(function(e){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0===e?[]:e},function(e){var t=this.points,n=(t.length-1)*e,r=Math.floor(n),i=n-r,o=t[0==r?r:r-1],a=t[r],s=t[r>t.length-2?t.length-1:r+1],c=t[r>t.length-3?t.length-1:r+2],l=iu.interpolate;return new u(l(o.x,a.x,s.x,c.x,i),l(o.y,a.y,s.y,c.y,i),l(o.z,a.z,s.z,c.z,i))}),hu=ir.create(function(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r},function(e){var t=Kc.b3;return new u(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),pu=ir.create(function(e,t,n){this.v0=e,this.v1=t,this.v2=n},function(e){var t=Kc.b2;return new u(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y),t(e,this.v0.z,this.v1.z,this.v2.z))}),du=ir.create(function(e,t){this.v1=e,this.v2=t},function(e){if(1===e)return this.v2.clone();var t=new u;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t});ri.prototype=Object.create(sr.prototype),ri.prototype.constructor=ri;var fu={createMultiMaterialObject:function(e,t){for(var n=new Mt,r=0,i=t.length;r<i;r++)n.add(new Le(e,t[r]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){var r=new l;r.getInverse(n.matrixWorld),e.applyMatrix(r),t.remove(e),n.add(e)}},mu=0,vu=1;Object.assign(q.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(ee.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(he.prototype,{center:function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)}}),Object.assign(ne.prototype,{multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)}}),Object.assign(l.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(e){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(e){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(e){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(e){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(e,t){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")}}),Object.assign(re.prototype,{isIntersectionLine:function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)}}),Object.assign(c.prototype,{multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)}}),Object.assign(ae.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(hr.prototype,{extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Zt(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new on(this,e)}}),Object.assign(u.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)}}),Object.assign(ue.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(e){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),Object.defineProperties(ue.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(e){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(mt.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Ie.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Ln.prototype,{onlyShadow:{set:function(e){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(e){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(e){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(me.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length}}}),Object.assign(Ae.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Ae.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(K.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(e){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new X}}}),Object.defineProperties(bn.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(e){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Q.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),t.prototype=Object.assign(Object.create({constructor:t,apply:function(e){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(e,this)}}),t.prototype),Object.defineProperties(Ar.prototype,{dynamic:{set:function(e){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.assign(ct.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(ct.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),Object.defineProperties(oe.prototype,{cullFace:{get:function(){return this.renderReverseSided?bi:yi},set:function(e){var t=e!==yi;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),Object.defineProperties(a.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.assign(wr.prototype,{load:function(e){console.warn("THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.");var t=this,n=new gr;return n.load(e,function(e){t.setBuffer(e)}),this}}),Object.assign(Tr.prototype,{getData:function(e){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()}});var gu={merge:function(e,t,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},yu={crossOrigin:void 0,loadTexture:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new An;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},loadTextureCube:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Cn;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};e.WebGLRenderTargetCube=s,e.WebGLRenderTarget=a,e.WebGLRenderer=ct,e.ShaderLib=Wc,e.UniformsLib=Hc,e.UniformsUtils=Ha,e.ShaderChunk=Gc,e.FogExp2=ut,e.Fog=lt,e.Scene=ht,e.LensFlare=pt,e.Sprite=ft,e.LOD=mt,e.SkinnedMesh=bt,e.Skeleton=gt,e.Bone=yt,e.Mesh=Le,e.LineSegments=xt,e.Line=wt,e.Points=Et,e.Group=Mt,e.VideoTexture=St,e.DataTexture=vt,e.CompressedTexture=Rt,e.CubeTexture=h,e.CanvasTexture=Ct,e.DepthTexture=At,e.TextureIdCount=i,e.Texture=r,e.MaterialIdCount=J,e.CompressedTextureLoader=Mn,e.BinaryTextureLoader=Sn,e.DataTextureLoader=tu,e.CubeTextureLoader=Cn,e.TextureLoader=An,e.ObjectLoader=rr,e.MaterialLoader=$n,e.BufferGeometryLoader=er,e.DefaultLoadingManager=eu,e.LoadingManager=Tn,e.JSONLoader=nr,e.ImageLoader=Rn,e.FontLoader=mr,e.XHRLoader=En,e.Loader=tr,e.Cache=$c,e.AudioLoader=gr,e.SpotLightShadow=kn,e.SpotLight=In,e.PointLight=Dn,e.HemisphereLight=Pn,e.DirectionalLightShadow=Nn,e.DirectionalLight=Un,e.AmbientLight=Fn,e.LightShadow=On,e.Light=Ln,e.StereoCamera=yr,e.PerspectiveCamera=Ie,e.OrthographicCamera=De,e.CubeCamera=br,e.Camera=ke,e.AudioListener=_r,e.PositionalAudio=xr,e.getAudioContext=vr,e.AudioAnalyser=Tr,e.Audio=wr,e.VectorKeyframeTrack=Hn,e.StringKeyframeTrack=Yn,e.QuaternionKeyframeTrack=Xn,e.NumberKeyframeTrack=qn,e.ColorKeyframeTrack=Kn,e.BooleanKeyframeTrack=Zn,e.PropertyMixer=Er,e.PropertyBinding=Mr,e.KeyframeTrack=Jn,e.AnimationUtils=nu,e.AnimationObjectGroup=Sr,e.AnimationMixer=Cr,e.AnimationClip=Qn,e.Uniform=Ar,e.InstancedBufferGeometry=Lr,e.BufferGeometry=Ae,e.GeometryIdCount=Re,e.Geometry=Se,e.InterleavedBufferAttribute=Pr,e.InstancedInterleavedBuffer=kr,e.InterleavedBuffer=Or,e.InstancedBufferAttribute=Ir,e.DynamicBufferAttribute=Me,e.Float64Attribute=Ee,e.Float32Attribute=Te,e.Uint32Attribute=xe,e.Int32Attribute=we,e.Uint16Attribute=_e,
e.Int16Attribute=be,e.Uint8ClampedAttribute=ye,e.Uint8Attribute=ge,e.Int8Attribute=ve,e.BufferAttribute=me,e.Face3=de,e.Object3DIdCount=le,e.Object3D=ue,e.Raycaster=Dr,e.Layers=ce,e.EventDispatcher=t,e.Clock=Fr,e.QuaternionLinearInterpolant=Wn,e.LinearInterpolant=zn,e.DiscreteInterpolant=Gn,e.CubicInterpolant=Bn,e.Interpolant=jn,e.Triangle=pe,e.Spline=jr,e.Math=Ua,e.Spherical=Br,e.Plane=re,e.Frustum=ie,e.Sphere=te,e.Ray=ae,e.Matrix4=l,e.Matrix3=ne,e.Box3=ee,e.Box2=q,e.Line3=he,e.Euler=se,e.Vector4=o,e.Vector3=u,e.Vector2=n,e.Quaternion=c,e.ColorKeywords=Vc,e.Color=X,e.MorphBlendMesh=zr,e.ImmediateRenderObject=Gr,e.VertexNormalsHelper=Vr,e.SpotLightHelper=Hr,e.SkeletonHelper=Wr,e.PointLightHelper=Xr,e.HemisphereLightHelper=qr,e.GridHelper=Yr,e.FaceNormalsHelper=Zr,e.DirectionalLightHelper=Kr,e.CameraHelper=Jr,e.BoundingBoxHelper=Qr,e.BoxHelper=$r,e.ArrowHelper=ei,e.AxisHelper=ti,e.ClosedSplineCurve3=ni,e.CatmullRomCurve3=uu,e.SplineCurve3=lu,e.CubicBezierCurve3=hu,e.QuadraticBezierCurve3=pu,e.LineCurve3=du,e.ArcCurve=ri,e.EllipseCurve=sr,e.SplineCurve=cr,e.CubicBezierCurve=ur,e.QuadraticBezierCurve=lr,e.LineCurve=or,e.Shape=hr,e.ShapePath=dr,e.Path=pr,e.Font=fr,e.CurvePath=ar,e.Curve=ir,e.ShapeUtils=Kc,e.SceneUtils=fu,e.CurveUtils=iu,e.WireframeGeometry=Lt,e.ParametricGeometry=Ot,e.ParametricBufferGeometry=Pt,e.TetrahedronGeometry=Dt,e.TetrahedronBufferGeometry=It,e.OctahedronGeometry=Ut,e.OctahedronBufferGeometry=Nt,e.IcosahedronGeometry=jt,e.IcosahedronBufferGeometry=Ft,e.DodecahedronGeometry=zt,e.DodecahedronBufferGeometry=Bt,e.PolyhedronGeometry=Gt,e.PolyhedronBufferGeometry=kt,e.TubeGeometry=Ht,e.TubeBufferGeometry=Vt,e.TorusKnotGeometry=Xt,e.TorusKnotBufferGeometry=Wt,e.TorusGeometry=Yt,e.TorusBufferGeometry=qt,e.TextGeometry=Kt,e.SphereBufferGeometry=Jt,e.SphereGeometry=Qt,e.RingGeometry=en,e.RingBufferGeometry=$t,e.PlaneBufferGeometry=Oe,e.PlaneGeometry=tn,e.LatheGeometry=rn,e.LatheBufferGeometry=nn,e.ShapeGeometry=on,e.ExtrudeGeometry=Zt,e.EdgesGeometry=an,e.ConeGeometry=un,e.ConeBufferGeometry=ln;e.CylinderGeometry=cn;e.CylinderBufferGeometry=sn,e.CircleBufferGeometry=hn,e.CircleGeometry=pn,e.BoxBufferGeometry=Pe,e.BoxGeometry=dn,e.ShadowMaterial=fn,e.SpriteMaterial=dt,e.RawShaderMaterial=mn,e.ShaderMaterial=Q,e.PointsMaterial=Tt,e.MultiMaterial=vn,e.MeshPhysicalMaterial=yn,e.MeshStandardMaterial=gn,e.MeshPhongMaterial=bn,e.MeshNormalMaterial=_n,e.MeshLambertMaterial=wn,e.MeshDepthMaterial=$,e.MeshBasicMaterial=fe,e.LineDashedMaterial=xn,e.LineBasicMaterial=_t,e.Material=K,e.REVISION=mi,e.MOUSE=vi,e.CullFaceNone=gi,e.CullFaceBack=yi,e.CullFaceFront=bi,e.CullFaceFrontBack=_i,e.FrontFaceDirectionCW=wi,e.FrontFaceDirectionCCW=xi,e.BasicShadowMap=Ti,e.PCFShadowMap=Ei,e.PCFSoftShadowMap=Mi,e.FrontSide=Si,e.BackSide=Ri,e.DoubleSide=Ci,e.FlatShading=Ai,e.SmoothShading=Li,e.NoColors=Pi,e.FaceColors=Oi,e.VertexColors=ki,e.NoBlending=Ii,e.NormalBlending=Di,e.AdditiveBlending=Ni,e.SubtractiveBlending=Ui,e.MultiplyBlending=Fi,e.CustomBlending=ji,e.BlendingMode=Bi,e.AddEquation=zi,e.SubtractEquation=Gi,e.ReverseSubtractEquation=Vi,e.MinEquation=Hi,e.MaxEquation=Wi,e.ZeroFactor=Xi,e.OneFactor=qi,e.SrcColorFactor=Yi,e.OneMinusSrcColorFactor=Zi,e.SrcAlphaFactor=Ki,e.OneMinusSrcAlphaFactor=Ji,e.DstAlphaFactor=Qi,e.OneMinusDstAlphaFactor=$i,e.DstColorFactor=eo,e.OneMinusDstColorFactor=to,e.SrcAlphaSaturateFactor=no,e.NeverDepth=ro,e.AlwaysDepth=io,e.LessDepth=oo,e.LessEqualDepth=ao,e.EqualDepth=so,e.GreaterEqualDepth=co,e.GreaterDepth=uo,e.NotEqualDepth=lo,e.MultiplyOperation=ho,e.MixOperation=po,e.AddOperation=fo,e.NoToneMapping=mo,e.LinearToneMapping=vo,e.ReinhardToneMapping=go,e.Uncharted2ToneMapping=yo,e.CineonToneMapping=bo,e.UVMapping=_o,e.CubeReflectionMapping=wo,e.CubeRefractionMapping=xo,e.EquirectangularReflectionMapping=To,e.EquirectangularRefractionMapping=Eo,e.SphericalReflectionMapping=Mo,e.CubeUVReflectionMapping=So,e.CubeUVRefractionMapping=Ro,e.TextureMapping=Co,e.RepeatWrapping=Ao,e.ClampToEdgeWrapping=Lo,e.MirroredRepeatWrapping=Po,e.TextureWrapping=Oo,e.NearestFilter=ko,e.NearestMipMapNearestFilter=Io,e.NearestMipMapLinearFilter=Do,e.LinearFilter=No,e.LinearMipMapNearestFilter=Uo,e.LinearMipMapLinearFilter=Fo,e.TextureFilter=jo,e.UnsignedByteType=Bo,e.ByteType=zo,e.ShortType=Go,e.UnsignedShortType=Vo,e.IntType=Ho,e.UnsignedIntType=Wo,e.FloatType=Xo,e.HalfFloatType=qo,e.UnsignedShort4444Type=Yo,e.UnsignedShort5551Type=Zo,e.UnsignedShort565Type=Ko,e.UnsignedInt248Type=Jo,e.AlphaFormat=Qo,e.RGBFormat=$o,e.RGBAFormat=ea,e.LuminanceFormat=ta,e.LuminanceAlphaFormat=na,e.RGBEFormat=ra,e.DepthFormat=ia,e.DepthStencilFormat=oa,e.RGB_S3TC_DXT1_Format=aa,e.RGBA_S3TC_DXT1_Format=sa,e.RGBA_S3TC_DXT3_Format=ca,e.RGBA_S3TC_DXT5_Format=ua,e.RGB_PVRTC_4BPPV1_Format=la,e.RGB_PVRTC_2BPPV1_Format=ha,e.RGBA_PVRTC_4BPPV1_Format=pa,e.RGBA_PVRTC_2BPPV1_Format=da,e.RGB_ETC1_Format=fa,e.LoopOnce=ma,e.LoopRepeat=va,e.LoopPingPong=ga,e.InterpolateDiscrete=ya,e.InterpolateLinear=ba,e.InterpolateSmooth=_a,e.ZeroCurvatureEnding=wa,e.ZeroSlopeEnding=xa,e.WrapAroundEnding=Ta,e.TrianglesDrawMode=Ea,e.TriangleStripDrawMode=Ma,e.TriangleFanDrawMode=Sa,e.LinearEncoding=Ra,e.sRGBEncoding=Ca,e.GammaEncoding=Aa,e.RGBEEncoding=La,e.LogLuvEncoding=Pa,e.RGBM7Encoding=Oa,e.RGBM16Encoding=ka,e.RGBDEncoding=Ia,e.BasicDepthPacking=Da,e.RGBADepthPacking=Na,e.CubeGeometry=dn,e.Face4=ii,e.LineStrip=mu,e.LinePieces=vu,e.MeshFaceMaterial=vn,e.PointCloud=oi,e.Particle=ft,e.ParticleSystem=ai,e.PointCloudMaterial=si,e.ParticleBasicMaterial=ci,e.ParticleSystemMaterial=ui,e.Vertex=li,e.EdgesHelper=hi,e.WireframeHelper=pi,e.GeometryUtils=gu,e.ImageUtils=yu,e.Projector=di,e.CanvasRenderer=fi,Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AudioContext",{get:function(){return e.getAudioContext()}})})},function(e,t){(function(n){"use strict";function r(e,t,n,r){return 1===arguments.length&&"function"==typeof e?j(e.name||"<unnamed action>",e):2===arguments.length&&"function"==typeof t?j(e,t):1===arguments.length&&"string"==typeof e?i(e):i(t).apply(null,arguments)}function i(e){return function(t,n,r){return r&&"function"==typeof r.value?(r.value=j(e,r.value),r.enumerable=!1,r.configurable=!0,r):jt(e).apply(this,arguments)}}function o(e,t,n){var r="string"==typeof e?e:e.name||"<unnamed action>",i="function"==typeof e?e:t,o="function"==typeof e?t:n;return bt("function"==typeof i,"`runInAction` expects a function"),bt(0===i.length,"`runInAction` expects a function without arguments"),bt("string"==typeof r&&r.length>0,"actions should have valid names, got: '"+r+"'"),B(r,i,o,void 0)}function a(e){return"function"==typeof e&&e.isMobxAction===!0}function s(e,t,n){function r(){o(c)}var i,o,s;"string"==typeof e?(i=e,o=t,s=n):"function"==typeof e&&(i=e.name||"Autorun@"+yt(),o=e,s=t),He(o,"autorun methods cannot have modifiers"),bt("function"==typeof o,"autorun expects a function"),bt(a(o)===!1,"Warning: attempted to pass an action to autorun. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action."),s&&(o=o.bind(s));var c=new Qt(i,function(){this.track(r)});return c.schedule(),c.getDisposer()}function c(e,t,n,r){var i,o,a,c;"string"==typeof e?(i=e,o=t,a=n,c=r):"function"==typeof e&&(i="When@"+yt(),o=e,a=t,c=n);var u=s(i,function(e){if(o.call(c)){e.dispose();var t=ee();a.call(c),te(t)}});return u}function u(e,t,n){return _t("`autorunUntil` is deprecated, please use `when`."),c.apply(null,arguments)}function l(e,t,n,r){function i(){s(h)}var o,s,c,u;"string"==typeof e?(o=e,s=t,c=n,u=r):"function"==typeof e&&(o=e.name||"AutorunAsync@"+yt(),s=e,c=t,u=n),bt(a(s)===!1,"Warning: attempted to pass an action to autorunAsync. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action."),void 0===c&&(c=1),u&&(s=s.bind(u));var l=!1,h=new Qt(o,function(){l||(l=!0,setTimeout(function(){l=!1,h.isDisposed||h.track(i)},c))});return h.schedule(),h.getDisposer()}function h(e,t,n,i,o,a){function s(){if(!w.isDisposed){var e=!1;w.track(function(){var t=v(w);e=Rt(g,_,t),_=t}),y&&h&&l(_,w),y||e!==!0||l(_,w),y&&(y=!1)}}var c,u,l,h,p,d;"string"==typeof e?(c=e,u=t,l=n,h=i,p=o,d=a):(c=e.name||t.name||"Reaction@"+yt(),u=e,l=t,h=n,p=i,d=o),void 0===h&&(h=!1),void 0===p&&(p=0);var f=Be(u,rn.Reference),m=f[0],v=f[1],g=m===rn.Structure;d&&(v=v.bind(d),l=r(c,l.bind(d)));var y=!0,b=!1,_=void 0,w=new Qt(c,function(){p<1?s():b||(b=!0,setTimeout(function(){b=!1,s()},p))});return w.schedule(),w.getDisposer()}function p(e,t,n,r){return("function"==typeof e||Ge(e))&&arguments.length<3?"function"==typeof t?d(e,t,void 0):d(e,void 0,t):Bt.apply(null,arguments)}function d(e,t,n){var r=Be(e,rn.Recursive),i=r[0],o=r[1];return new qt(o,n,i===rn.Structure,o.name,t)}function f(e,t){bt("function"==typeof e&&1===e.length,"createTransformer expects a function that accepts one argument");var n={},r=Jt.resetId,i=function(r){function i(t,n){r.call(this,function(){return e(n)},null,!1,"Transformer-"+e.name+"-"+t,void 0),this.sourceIdentifier=t,this.sourceObject=n}return Ft(i,r),i.prototype.onBecomeUnobserved=function(){var e=this.value;r.prototype.onBecomeUnobserved.call(this),delete n[this.sourceIdentifier],t&&t(e,this.sourceObject)},i}(qt);return function(e){r!==Jt.resetId&&(n={},r=Jt.resetId);var t=m(e),o=n[t];return o?o.get():(o=n[t]=new i(t,e),o.get())}}function m(e){if(null===e||"object"!=typeof e)throw new Error("[mobx] transform expected some kind of object, got: "+e);var t=e.$transformId;return void 0===t&&(t=yt(),Lt(e,"$transformId",t)),t}function v(e,t){return q()||console.warn("[mobx.expr] 'expr' should only be used inside other reactive functions."),p(e,t).get()}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return bt(arguments.length>=2,"extendObservable expected 2 or more arguments"),bt("object"==typeof e,"extendObservable expects an object as first argument"),bt(!fn(e),"extendObservable should not be used on maps, use map.merge instead"),t.forEach(function(t){bt("object"==typeof t,"all arguments of extendObservable should be objects"),bt(!R(t),"extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540"),y(e,t,rn.Recursive,null)}),e}function y(e,t,n,r){var i=$e(e,r,n);for(var o in t)if(Ct(t,o)){if(e===t&&!Ot(e,o))continue;var a=Object.getOwnPropertyDescriptor(t,o);tt(i,o,a)}return e}function b(e,t){return _(ct(e,t))}function _(e){var t={name:e.name};return e.observing&&e.observing.length>0&&(t.dependencies=xt(e.observing).map(_)),t}function w(e,t){return x(ct(e,t))}function x(e){var t={name:e.name};return oe(e)&&(t.observers=ae(e).map(x)),t}function T(e,t,n){return"function"==typeof n?M(e,t,n):E(e,t)}function E(e,t){return Mt(e)&&!st(e)?(_t("Passing plain objects to intercept / observe is deprecated and will be removed in 3.0"),ut(A(e)).intercept(t)):ut(e).intercept(t)}function M(e,t,n){return Mt(e)&&!st(e)?(_t("Passing plain objects to intercept / observe is deprecated and will be removed in 3.0"),g(e,{property:e[t]}),M(e,t,n)):ut(e,t).intercept(n)}function S(e,t){if(null===e||void 0===e)return!1;if(void 0!==t){if(st(e)===!1)return!1;var n=ct(e,t);return Yt(n)}return Yt(e)}function R(e,t){if(null===e||void 0===e)return!1;if(void 0!==t){if(Je(e)||fn(e))throw new Error("[mobx.isObservable] isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.");if(st(e)){var n=e.$mobx;return n.values&&!!n.values[t]}return!1}return st(e)||!!e.$mobx||Xt(e)||tn(e)||Yt(e)}function C(e,t,n){return bt(arguments.length>=2&&arguments.length<=3,"Illegal decorator config",t),kt(e,t),bt(!n||!n.get,"@observable can not be used on getters, use @computed instead"),zt.apply(null,arguments)}function A(e,t){if(void 0===e&&(e=void 0),"string"==typeof arguments[1])return C.apply(null,arguments);if(bt(arguments.length<3,"observable expects zero, one or two arguments"),R(e))return e;var n=Be(e,rn.Recursive),r=n[0],i=n[1],o=r===rn.Reference?Gt.Reference:L(i);switch(o){case Gt.Array:case Gt.PlainObject:return Ve(i,r);case Gt.Reference:case Gt.ComplexObject:return new wn(i,r);case Gt.ComplexFunction:throw new Error("[mobx.observable] To be able to make a function reactive it should not have arguments. If you need an observable reference to a function, use `observable(asReference(f))`");case Gt.ViewFunction:return _t("Use `computed(expr)` instead of `observable(expr)`"),p(e,t)}bt(!1,"Illegal State")}function L(e){return null===e||void 0===e?Gt.Reference:"function"==typeof e?e.length?Gt.ComplexFunction:Gt.ViewFunction:Ut(e)?Gt.Array:"object"==typeof e?Mt(e)?Gt.PlainObject:Gt.ComplexObject:Gt.Reference}function P(e,t,n,r){return"function"==typeof n?k(e,t,n,r):O(e,t,n)}function O(e,t,n){return Mt(e)&&!st(e)?(_t("Passing plain objects to intercept / observe is deprecated and will be removed in 3.0"),ut(A(e)).observe(t,n)):ut(e).observe(t,n)}function k(e,t,n,r){return Mt(e)&&!st(e)?(_t("Passing plain objects to intercept / observe is deprecated and will be removed in 3.0"),g(e,{property:e[t]}),k(e,t,n,r)):ut(e,t).observe(n,r)}function I(e,t,n){function r(r){return t&&n.push([e,r]),r}if(void 0===t&&(t=!0),void 0===n&&(n=null),R(e)){if(t&&null===n&&(n=[]),t&&null!==e&&"object"==typeof e)for(var i=0,o=n.length;i<o;i++)if(n[i][0]===e)return n[i][1];if(Je(e)){var a=r([]),s=e.map(function(e){return I(e,t,n)});a.length=s.length;for(var i=0,o=s.length;i<o;i++)a[i]=s[i];return a}if(st(e)){var a=r({});for(var c in e)a[c]=I(e[c],t,n);return a}if(fn(e)){var u=r({});return e.forEach(function(e,r){return u[r]=I(e,t,n)}),u}if(xn(e))return I(e.get(),t,n)}return e}function D(e,t,n){function r(r){return t&&n.push([e,r]),r}if(void 0===t&&(t=!0),void 0===n&&(n=null),_t("toJSlegacy is deprecated and will be removed in the next major. Use `toJS` instead. See #566"),e instanceof Date||e instanceof RegExp)return e;if(t&&null===n&&(n=[]),t&&null!==e&&"object"==typeof e)for(var i=0,o=n.length;i<o;i++)if(n[i][0]===e)return n[i][1];if(!e)return e;if(Ut(e)){var a=r([]),s=e.map(function(e){return D(e,t,n)});a.length=s.length;for(var i=0,o=s.length;i<o;i++)a[i]=s[i];return a}if(fn(e)){var c=r({});return e.forEach(function(e,r){return c[r]=D(e,t,n)}),c}if(xn(e))return D(e.get(),t,n);if("object"==typeof e){var a=r({});for(var u in e)a[u]=D(e[u],t,n);return a}return e}function N(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=null),_t("toJSON is deprecated. Use toJS instead"),D.apply(null,arguments)}function U(e){return console.log(e),e}function F(e,t){switch(arguments.length){case 0:if(e=Jt.trackingDerivation,!e)return U("whyRun() can only be used if a derivation is active, or by passing an computed value / reaction explicitly. If you invoked whyRun from inside a computation; the computation is currently suspended but re-evaluating because somebody requested it's value.");break;case 2:e=ct(e,t)}return e=ct(e),Yt(e)?U(e.whyRun()):tn(e)?U(e.whyRun()):void bt(!1,"whyRun can only be used on reactions and computed values")}function j(e,t){bt("function"==typeof t,"`action` can only be invoked on functions"),bt("string"==typeof e&&e.length>0,"actions should have valid names, got: '"+e+"'");var n=function(){return B(e,t,this,arguments)};return n.isMobxAction=!0,n}function B(e,t,n,r){bt(!Yt(Jt.trackingDerivation),"Computed values or transformers should not invoke actions or trigger other side effects");var i,o=be();if(o){i=Date.now();var a=r&&r.length||0,s=new Array(a);if(a>0)for(var c=0;c<a;c++)s[c]=r[c];we({type:"action",name:e,fn:t,target:n,arguments:s})}var u=ee();Se(e,n,!1);var l=H(!0);try{return t.apply(n,r)}finally{W(l),Re(!1),te(u),o&&xe({time:Date.now()-i})}}function z(e){return 0===arguments.length?(_t("`useStrict` without arguments is deprecated, use `isStrictModeEnabled()` instead"),Jt.strictMode):(bt(null===Jt.trackingDerivation,"It is not allowed to set `useStrict` when a derivation is running"),Jt.strictMode=e,Jt.allowStateChanges=!e,void 0)}function G(){return Jt.strictMode}function V(e,t){var n=H(e),r=t();return W(n),r}function H(e){var t=Jt.allowStateChanges;return Jt.allowStateChanges=e,t}function W(e){Jt.allowStateChanges=e}function X(e){switch(e.dependenciesState){case Wt.UP_TO_DATE:return!1;case Wt.NOT_TRACKING:case Wt.STALE:return!0;case Wt.POSSIBLY_STALE:var t=!0,n=ee();try{for(var r=e.observing,i=r.length,o=0;o<i;o++){var a=r[o];if(Yt(a)&&(a.get(),e.dependenciesState===Wt.STALE))return t=!1,te(n),!0}return t=!1,ne(e),te(n),!1}finally{t&&ne(e)}}}function q(){return null!==Jt.trackingDerivation}function Y(){Jt.allowStateChanges||bt(!1,Jt.strictMode?"It is not allowed to create or change state outside an `action` when MobX is in strict mode. Wrap the current method in `action` if this state change is intended":"It is not allowed to change the state when a computed value or transformer is being evaluated. Use 'autorun' to create reactive functions with side-effects.")}function Z(e,t){ne(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++Jt.runId;var n=Jt.trackingDerivation;Jt.trackingDerivation=e;var r,i=!0;try{r=t.call(e),i=!1}finally{i?K(e):(Jt.trackingDerivation=n,J(e))}return r}function K(e){var t="[mobx] An uncaught exception occurred while calculating your computed value, autorun or transformer. Or inside the render() method of an observer based React component. These functions should never throw exceptions as MobX will not always be able to recover from them. "+("Please fix the error reported after this message or enable 'Pause on (caught) exceptions' in your debugger to find the root cause. In: '"+e.name+"'. ")+"For more details see https://github.com/mobxjs/mobx/issues/462";be()&&_e({type:"error",message:t}),console.warn(t),ne(e),e.newObserving=null,e.unboundDepsCount=0,e.recoverFromError(),he(),ie()}function J(e){var t=e.observing,n=e.observing=e.newObserving;e.newObserving=null;for(var r=0,i=e.unboundDepsCount,o=0;o<i;o++){var a=n[o];0===a.diffValue&&(a.diffValue=1,r!==o&&(n[r]=a),r++)}for(n.length=r,i=t.length;i--;){var a=t[i];0===a.diffValue&&ce(a,e),a.diffValue=0}for(;r--;){var a=n[r];1===a.diffValue&&(a.diffValue=0,se(a,e))}}function Q(e){for(var t=e.observing,n=t.length;n--;)ce(t[n],e);e.dependenciesState=Wt.NOT_TRACKING,t.length=0}function $(e){var t=ee(),n=e();return te(t),n}function ee(){var e=Jt.trackingDerivation;return Jt.trackingDerivation=null,e}function te(e){Jt.trackingDerivation=e}function ne(e){if(e.dependenciesState!==Wt.UP_TO_DATE){e.dependenciesState=Wt.UP_TO_DATE;for(var t=e.observing,n=t.length;n--;)t[n].lowestObserverState=Wt.UP_TO_DATE}}function re(){}function ie(){Jt.resetId++;var e=new Kt;for(var t in e)Zt.indexOf(t)===-1&&(Jt[t]=e[t]);Jt.allowStateChanges=!Jt.strictMode}function oe(e){return e.observers&&e.observers.length>0}function ae(e){return e.observers}function se(e,t){var n=e.observers.length;n&&(e.observersIndexes[t.__mapid]=n),e.observers[n]=t,e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function ce(e,t){if(1===e.observers.length)e.observers.length=0,ue(e);else{var n=e.observers,r=e.observersIndexes,i=n.pop();if(i!==t){var o=r[t.__mapid]||0;o?r[i.__mapid]=o:delete r[i.__mapid],n[o]=i}delete r[t.__mapid]}}function ue(e){e.isPendingUnobservation||(e.isPendingUnobservation=!0,Jt.pendingUnobservations.push(e))}function le(){Jt.inBatch++}function he(){if(1===Jt.inBatch){for(var e=Jt.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers.length&&n.onBecomeUnobserved()}Jt.pendingUnobservations=[]}Jt.inBatch--}function pe(e){var t=Jt.trackingDerivation;null!==t?t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e):0===e.observers.length&&ue(e)}function de(e){if(e.lowestObserverState!==Wt.STALE){e.lowestObserverState=Wt.STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===Wt.UP_TO_DATE&&r.onBecomeStale(),r.dependenciesState=Wt.STALE}}}function fe(e){if(e.lowestObserverState!==Wt.STALE){e.lowestObserverState=Wt.STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===Wt.POSSIBLY_STALE?r.dependenciesState=Wt.STALE:r.dependenciesState===Wt.UP_TO_DATE&&(e.lowestObserverState=Wt.UP_TO_DATE)}}}function me(e){if(e.lowestObserverState===Wt.UP_TO_DATE){e.lowestObserverState=Wt.POSSIBLY_STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===Wt.UP_TO_DATE&&(r.dependenciesState=Wt.POSSIBLY_STALE,r.onBecomeStale())}}}function ve(){Jt.isRunningReactions===!0||Jt.inTransaction>0||en(ge)}function ge(){Jt.isRunningReactions=!0;for(var e=Jt.pendingReactions,t=0;e.length>0;){if(++t===$t)throw ie(),new Error("Reaction doesn't converge to a stable state after "+$t+" iterations. Probably there is a cycle in the reactive function: "+e[0]);for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction()}Jt.isRunningReactions=!1}function ye(e){var t=en;en=function(n){return e(function(){return t(n)})}}function be(){return!!Jt.spyListeners.length}function _e(e){if(!Jt.spyListeners.length)return!1;for(var t=Jt.spyListeners,n=0,r=t.length;n<r;n++)t[n](e)}function we(e){var t=St({},e,{spyReportStart:!0});_e(t)}function xe(e){_e(e?St({},e,nn):nn)}function Te(e){return Jt.spyListeners.push(e),wt(function(){var t=Jt.spyListeners.indexOf(e);t!==-1&&Jt.spyListeners.splice(t,1)})}function Ee(e){return _t("trackTransitions is deprecated. Use mobx.spy instead"),"boolean"==typeof e&&(_t("trackTransitions only takes a single callback function. If you are using the mobx-react-devtools, please update them first"),e=arguments[1]),e?Te(e):(_t("trackTransitions without callback has been deprecated and is a no-op now. If you are using the mobx-react-devtools, please update them first"),function(){})}function Me(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=!0),Se(e.name||"anonymous transaction",t,n);try{return e.call(t)}finally{Re(n)}}function Se(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=!0),le(),Jt.inTransaction+=1,n&&be()&&we({type:"transaction",target:t,name:e})}function Re(e){void 0===e&&(e=!0),0===--Jt.inTransaction&&ve(),e&&be()&&xe(),he()}function Ce(e){return e.interceptors&&e.interceptors.length>0}function Ae(e,t){var n=e.interceptors||(e.interceptors=[]);return n.push(t),wt(function(){var e=n.indexOf(t);e!==-1&&n.splice(e,1)})}function Le(e,t){var n=ee();try{for(var r=e.interceptors,i=0,o=r.length;i<o&&(t=r[i](t),bt(!t||t.type,"Intercept handlers should return nothing or a change object"),t);i++);return t}finally{te(n)}}function Pe(e){return e.changeListeners&&e.changeListeners.length>0}function Oe(e,t){var n=e.changeListeners||(e.changeListeners=[]);return n.push(t),wt(function(){var e=n.indexOf(t);e!==-1&&n.splice(e,1)})}function ke(e,t){var n=ee(),r=e.changeListeners;if(r){r=r.slice();for(var i=0,o=r.length;i<o;i++)Array.isArray(t)?r[i].apply(null,t):r[i](t);te(n)}}function Ie(e,t){return He(t,"Modifiers are not allowed to be nested"),{mobxModifier:e,value:t}}function De(e){return e?e.mobxModifier||null:null}function Ne(e){return Ie(rn.Reference,e)}function Ue(e){return Ie(rn.Structure,e)}function Fe(e){return Ie(rn.Flat,e)}function je(e,t){return Qe(e,t)}function Be(e,t){var n=De(e);return n?[n,e.value]:[t,e]}function ze(e){if(void 0===e)return rn.Recursive;var t=De(e);return bt(null!==t,"Cannot determine value mode from function. Please pass in one of these: mobx.asReference, mobx.asStructure or mobx.asFlat, got: "+e),t}function Ge(e){return void 0!==e.mobxModifier}function Ve(e,t,n){var r;if(R(e))return e;switch(t){case rn.Reference:return e;case rn.Flat:He(e,"Items inside 'asFlat' cannot have modifiers"),r=rn.Reference;break;case rn.Structure:He(e,"Items inside 'asStructure' cannot have modifiers"),r=rn.Structure;break;case rn.Recursive:i=Be(e,rn.Recursive),r=i[0],e=i[1];break;default:bt(!1,"Illegal State")}return Array.isArray(e)?Ze(e,r,n):Mt(e)&&Object.isExtensible(e)?y(e,e,r,n):e;var i}function He(e,t){if(null!==De(e))throw new Error("[mobx] asStructure / asReference / asFlat cannot be used here. "+t)}function We(e){var t=Xe(e),n=qe(e);Object.defineProperty(un.prototype,""+e,{enumerable:!1,configurable:!0,set:t,get:n})}function Xe(e){return function(t){var n=this.$mobx,r=n.values;if(He(t,"Modifiers cannot be used on array values. For non-reactive array values use makeReactive(asFlat(array))."),e<r.length){Y();var i=r[e];if(Ce(n)){var o=Le(n,{type:"update",object:n.array,index:e,newValue:t});if(!o)return;t=o.newValue}t=n.makeReactiveArrayItem(t);var a=n.mode===rn.Structure?!Dt(i,t):i!==t;a&&(r[e]=t,n.notifyArrayChildUpdate(e,t,i))}else{if(e!==r.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+r.length);n.spliceWithArray(e,0,[t])}}}function qe(e){return function(){var t=this.$mobx;return t&&e<t.values.length?(t.atom.reportObserved(),t.values[e]):void console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}}function Ye(e){for(var t=an;t<e;t++)We(t);an=e}function Ze(e,t,n){return new un(e,t,n)}function Ke(e){return _t("fastArray is deprecated. Please use `observable(asFlat([]))`"),Ze(e,rn.Flat,null)}function Je(e){return Et(e)&&hn(e.$mobx)}function Qe(e,t){return new dn(e,t)}function $e(e,t,n){if(void 0===n&&(n=rn.Recursive),st(e))return e.$mobx;Mt(e)||(t=(e.constructor.name||"ObservableObject")+"@"+yt()),t||(t="ObservableObject@"+yt());var r=new vn(e,t,n);return Pt(e,"$mobx",r),r}function et(e){return"function"==typeof e&&0===e.length&&!a(e)}function tt(e,t,n){e.values[t]?(bt("value"in n,"cannot redefine property "+t),e.target[t]=n.value):"value"in n?(et(n.value)&&_t(mn+")in: "+e.name+"."+t),nt(e,t,n.value,!0,void 0)):nt(e,t,n.get,!0,n.set)}function nt(e,t,n,r,i){r&&kt(e.target,t);var o,a=e.name+"."+t,s=!0;if(Yt(n))o=n,n.name=a,n.scope||(n.scope=e.target);else if(et(n))o=new qt(n,e.target,!1,a,i);else if(De(n)===rn.Structure&&"function"==typeof n.value&&0===n.value.length)o=new qt(n.value,e.target,!0,a,i);else{if(s=!1,Ce(e)){var c=Le(e,{object:e.target,name:t,type:"add",newValue:n});if(!c)return;n=c.newValue}o=new wn(n,e.mode,a,!1),n=o.value}e.values[t]=o,r&&Object.defineProperty(e.target,t,s?it(t):rt(t)),s||at(e,e.target,t,n)}function rt(e){var t=gn[e];return t?t:gn[e]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.values[e].get()},set:function(t){ot(this,e,t)}}}function it(e){var t=yn[e];return t?t:yn[e]={configurable:!0,enumerable:!1,get:function(){return this.$mobx.values[e].get()},set:function(t){return this.$mobx.values[e].set(t)}}}function ot(e,t,n){var r=e.$mobx,i=r.values[t];if(Ce(r)){var o=Le(r,{type:"update",object:e,name:t,newValue:n});if(!o)return;n=o.newValue}if(n=i.prepareNewValue(n),n!==_n){var a=Pe(r),s=be(),o=a||s?{type:"update",object:e,oldValue:i.value,name:t,newValue:n}:null;s&&we(o),i.setNewValue(n),a&&ke(r,o),s&&xe()}}function at(e,t,n,r){var i=Pe(e),o=be(),a=i||o?{type:"add",object:t,name:n,newValue:r}:null;o&&we(a),i&&ke(e,a),o&&xe()}function st(e){return!!Et(e)&&(dt(e),bn(e.$mobx))}function ct(e,t){if("object"==typeof e&&null!==e){if(Je(e))return bt(void 0===t,"It is not possible to get index atoms from arrays"),e.$mobx.atom;if(fn(e)){if(void 0===t)return ct(e._keys);var n=e._data[t]||e._hasMap[t];return bt(!!n,"the entry '"+t+"' does not exist in the observable map '"+lt(e)+"'"),n}if(dt(e),st(e)){bt(!!t,"please specify a property");var r=e.$mobx.values[t];return bt(!!r,"no observable property '"+t+"' found on the observable object '"+lt(e)+"'"),r}if(Xt(e)||Yt(e)||tn(e))return e}else if("function"==typeof e&&tn(e.$mobx))return e.$mobx;bt(!1,"Cannot obtain atom from "+e)}function ut(e,t){return bt(e,"Expecting some object"),void 0!==t?ut(ct(e,t)):Xt(e)||Yt(e)||tn(e)?e:fn(e)?e:(dt(e),e.$mobx?e.$mobx:void bt(!1,"Cannot obtain administration from "+e))}function lt(e,t){var n;return n=void 0!==t?ct(e,t):st(e)||fn(e)?ut(e):ct(e),n.name}function ht(e,t,n,r,i){function o(o,a,s,c,u){if(bt(i||ft(arguments),"This function is a decorator, but it wasn't invoked like a decorator"),s){Ct(o,"__mobxLazyInitializers")||Lt(o,"__mobxLazyInitializers",o.__mobxLazyInitializers&&o.__mobxLazyInitializers.slice()||[]);var l=s.value,h=s.initializer;return o.__mobxLazyInitializers.push(function(t){e(t,a,h?h.call(t):l,c,s)}),{enumerable:r,configurable:!0,get:function(){return this.__mobxDidRunLazyInitializers!==!0&&dt(this),t.call(this,a)},set:function(e){this.__mobxDidRunLazyInitializers!==!0&&dt(this),n.call(this,a,e)}}}var p={enumerable:r,configurable:!0,get:function(){return this.__mobxInitializedProps&&this.__mobxInitializedProps[a]===!0||pt(this,a,void 0,e,c,s),t.call(this,a)},set:function(t){this.__mobxInitializedProps&&this.__mobxInitializedProps[a]===!0?n.call(this,a,t):pt(this,a,t,e,c,s)}};return(arguments.length<3||5===arguments.length&&u<3)&&Object.defineProperty(o,a,p),p}return i?function(){if(ft(arguments))return o.apply(null,arguments);var e=arguments,t=arguments.length;return function(n,r,i){return o(n,r,i,e,t)}}:o}function pt(e,t,n,r,i,o){Ct(e,"__mobxInitializedProps")||Lt(e,"__mobxInitializedProps",{}),e.__mobxInitializedProps[t]=!0,r(e,t,n,i,o)}function dt(e){e.__mobxDidRunLazyInitializers!==!0&&e.__mobxLazyInitializers&&(Lt(e,"__mobxDidRunLazyInitializers",!0),e.__mobxDidRunLazyInitializers&&e.__mobxLazyInitializers.forEach(function(t){return t(e)}))}function ft(e){return(2===e.length||3===e.length)&&"string"==typeof e[1]}function mt(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function vt(e){bt(e[Tn]!==!0,"Illegal state: cannot recycle array as iterator"),Pt(e,Tn,!0);var t=-1;return Pt(e,"next",function(){return t++,{done:t>=this.length,value:t<this.length?this[t]:void 0}}),e}function gt(e,t){Pt(e,mt(),t)}function yt(){return++Jt.mobxGuid}function bt(e,t,n){if(!e)throw new Error("[mobx] Invariant failed: "+t+(n?" in '"+n+"'":""))}function _t(e){Sn.indexOf(e)===-1&&(Sn.push(e),console.error("[mobx] Deprecated: "+e))}function wt(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}function xt(e){var t=[];return e.forEach(function(e){t.indexOf(e)===-1&&t.push(e)}),t}function Tt(e,t,n){if(void 0===t&&(t=100),void 0===n&&(n=" - "),!e)return"";var r=e.slice(0,t);return""+r.join(n)+(e.length>t?" (... and "+(e.length-t)+"more)":"")}function Et(e){return null!==e&&"object"==typeof e}function Mt(e){if(null===e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function St(){for(var e=arguments[0],t=1,n=arguments.length;t<n;t++){var r=arguments[t];for(var i in r)Ct(r,i)&&(e[i]=r[i])}return e}function Rt(e,t,n){return e?!Dt(t,n):t!==n}function Ct(e,t){return Cn.call(e,t)}function At(e,t){for(var n=0;n<t.length;n++)Lt(e,t[n],e[t[n]])}function Lt(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function Pt(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Ot(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!n||n.configurable!==!1&&n.writable!==!1}function kt(e,t){bt(Ot(e,t),"Cannot make property '"+t+"' observable, it is not configurable and writable in the target object")}function It(e){var t=[];for(var n in e)t.push(n);return t}function Dt(e,t){if(null===e&&null===t)return!0;if(void 0===e&&void 0===t)return!0;var n=Ut(e);if(n!==Ut(t))return!1;if(n){if(e.length!==t.length)return!1;for(var r=e.length-1;r>=0;r--)if(!Dt(e[r],t[r]))return!1;return!0}if("object"==typeof e&&"object"==typeof t){if(null===e||null===t)return!1;if(It(e).length!==It(t).length)return!1;for(var i in e){if(!(i in t))return!1;if(!Dt(e[i],t[i]))return!1}return!0}return e===t}function Nt(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return Et(e)&&e[n]===!0}}function Ut(e){return Array.isArray(e)||Je(e)}var Ft=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,
new n)};re(),t.extras={allowStateChanges:V,getAtom:ct,getDebugName:lt,getDependencyTree:b,getObserverTree:w,isComputingDerivation:q,isSpyEnabled:be,resetGlobalState:ie,spyReport:_e,spyReportEnd:xe,spyReportStart:we,trackTransitions:Ee,setReactionScheduler:ye},t._={getAdministration:ut,resetGlobalState:ie},"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx(e.exports);var jt=ht(function(e,t,n,i,o){var a=i&&1===i.length?i[0]:n.name||t||"<unnamed action>",s=r(a,n);Lt(e,t,s)},function(e){return this[e]},function(){bt(!1,"It is not allowed to assign new values to @action fields")},!1,!0);t.action=r,t.runInAction=o,t.isAction=a,t.autorun=s,t.when=c,t.autorunUntil=u,t.autorunAsync=l,t.reaction=h;var Bt=ht(function(e,t,n,r,i){bt("undefined"!=typeof i,"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'. It looks like it was used on a property.");var o=i.get,a=i.set;bt("function"==typeof o,"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'");var s=!1;r&&1===r.length&&r[0].asStructure===!0&&(s=!0);var c=$e(e,void 0,rn.Recursive);nt(c,t,s?Ue(o):o,!1,a)},function(e){var t=this.$mobx.values[e];if(void 0!==t)return t.get()},function(e,t){this.$mobx.values[e].set(t)},!1,!0);t.computed=p,t.createTransformer=f,t.expr=v,t.extendObservable=g,t.intercept=T,t.isComputed=S,t.isObservable=R;var zt=ht(function(e,t,n){var r=H(!0);"function"==typeof n&&(n=Ne(n));var i=$e(e,void 0,rn.Recursive);nt(i,t,n,!0,void 0),W(r)},function(e){var t=this.$mobx.values[e];if(void 0!==t)return t.get()},function(e,t){ot(this,e,t)},!0,!1);t.observable=A;var Gt;!function(e){e[e.Reference=0]="Reference",e[e.PlainObject=1]="PlainObject",e[e.ComplexObject=2]="ComplexObject",e[e.Array=3]="Array",e[e.ViewFunction=4]="ViewFunction",e[e.ComplexFunction=5]="ComplexFunction"}(Gt||(Gt={})),t.observe=P,t.toJS=I,t.toJSlegacy=D,t.toJSON=N,t.whyRun=F,t.useStrict=z,t.isStrictModeEnabled=G;var Vt=function(){function e(e){void 0===e&&(e="Atom@"+yt()),this.name=e,this.isPendingUnobservation=!0,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Wt.NOT_TRACKING}return e.prototype.onBecomeUnobserved=function(){},e.prototype.reportObserved=function(){pe(this)},e.prototype.reportChanged=function(){Se("propagatingAtomChange",null,!1),de(this),Re(!1)},e.prototype.toString=function(){return this.name},e}();t.BaseAtom=Vt;var Ht=function(e){function t(t,n,r){void 0===t&&(t="Atom@"+yt()),void 0===n&&(n=Rn),void 0===r&&(r=Rn),e.call(this,t),this.name=t,this.onBecomeObservedHandler=n,this.onBecomeUnobservedHandler=r,this.isPendingUnobservation=!1,this.isBeingTracked=!1}return Ft(t,e),t.prototype.reportObserved=function(){return le(),e.prototype.reportObserved.call(this),this.isBeingTracked||(this.isBeingTracked=!0,this.onBecomeObservedHandler()),he(),!!Jt.trackingDerivation},t.prototype.onBecomeUnobserved=function(){this.isBeingTracked=!1,this.onBecomeUnobservedHandler()},t}(Vt);t.Atom=Ht;var Wt,Xt=Nt("Atom",Vt),qt=function(){function e(e,t,n,r,i){this.derivation=e,this.scope=t,this.compareStructural=n,this.dependenciesState=Wt.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Wt.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+yt(),this.value=void 0,this.isComputing=!1,this.isRunningSetter=!1,this.name=r||"ComputedValue@"+yt(),i&&(this.setter=j(r+"-setter",i))}return e.prototype.peek=function(){this.isComputing=!0;var e=H(!1),t=this.derivation.call(this.scope);return W(e),this.isComputing=!1,t},e.prototype.peekUntracked=function(){var e=!0;try{var t=this.peek();return e=!1,t}finally{e&&K(this)}},e.prototype.onBecomeStale=function(){me(this)},e.prototype.onBecomeUnobserved=function(){bt(this.dependenciesState!==Wt.NOT_TRACKING,"INTERNAL ERROR only onBecomeUnobserved shouldn't be called twice in a row"),Q(this),this.value=void 0},e.prototype.get=function(){bt(!this.isComputing,"Cycle detected in computation "+this.name,this.derivation),le(),1===Jt.inBatch?X(this)&&(this.value=this.peekUntracked()):(pe(this),X(this)&&this.trackAndCompute()&&fe(this));var e=this.value;return he(),e},e.prototype.recoverFromError=function(){this.isComputing=!1},e.prototype.set=function(e){if(this.setter){bt(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else bt(!1,"[ComputedValue '"+this.name+"'] It is not possible to assign a new value to a computed value.")},e.prototype.trackAndCompute=function(){be()&&_e({object:this,type:"compute",fn:this.derivation,target:this.scope});var e=this.value,t=this.value=Z(this,this.peek);return Rt(this.compareStructural,t,e)},e.prototype.observe=function(e,t){var n=this,r=!0,i=void 0;return s(function(){var o=n.get();if(!r||t){var a=ee();e(o,i),te(a)}r=!1,i=o})},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.whyRun=function(){var e=Boolean(Jt.trackingDerivation),t=xt(this.isComputing?this.newObserving:this.observing).map(function(e){return e.name}),n=xt(ae(this).map(function(e){return e.name}));return"\nWhyRun? computation '"+this.name+"':\n * Running because: "+(e?"[active] the value of this computation is needed by a reaction":this.isComputing?"[get] The value of this computed was requested outside a reaction":"[idle] not running at the moment")+"\n"+(this.dependenciesState===Wt.NOT_TRACKING?" * This computation is suspended (not in use by any reaction) and won't run automatically.\n\tDidn't expect this computation to be suspended at this point?\n\t  1. Make sure this computation is used by a reaction (reaction, autorun, observer).\n\t  2. Check whether you are using this computation synchronously (in the same stack as they reaction that needs it).\n":" * This computation will re-run if any of the following observables changes:\n    "+Tt(t)+"\n    "+(this.isComputing&&e?" (... or any observable accessed during the remainder of the current run)":"")+"\n\tMissing items in this list?\n\t  1. Check whether all used values are properly marked as observable (use isObservable to verify)\n\t  2. Make sure you didn't dereference values too early. MobX observes props, not primitives. E.g: use 'person.name' instead of 'name' in your computation.\n  * If the outcome of this computation changes, the following observers will be re-run:\n    "+Tt(n)+"\n")},e}(),Yt=Nt("ComputedValue",qt);!function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"}(Wt||(Wt={})),t.IDerivationState=Wt,t.untracked=$;var Zt=["mobxGuid","resetId","spyListeners","strictMode","runId"],Kt=function(){function e(){this.version=4,this.trackingDerivation=null,this.runId=0,this.mobxGuid=0,this.inTransaction=0,this.isRunningReactions=!1,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.allowStateChanges=!0,this.strictMode=!1,this.resetId=0,this.spyListeners=[]}return e}(),Jt=function(){var e=new Kt;if(n.__mobservableTrackingStack||n.__mobservableViewStack)throw new Error("[mobx] An incompatible version of mobservable is already loaded.");if(n.__mobxGlobal&&n.__mobxGlobal.version!==e.version)throw new Error("[mobx] An incompatible version of mobx is already loaded.");return n.__mobxGlobal?n.__mobxGlobal:n.__mobxGlobal=e}(),Qt=function(){function e(e,t){void 0===e&&(e="Reaction@"+yt()),this.name=e,this.onInvalidate=t,this.observing=[],this.newObserving=[],this.dependenciesState=Wt.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+yt(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Jt.pendingReactions.push(this),le(),ve(),he())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){this.isDisposed||(this._isScheduled=!1,X(this)&&(this._isTrackPending=!0,this.onInvalidate(),this._isTrackPending&&be()&&_e({object:this,type:"scheduled-reaction"})))},e.prototype.track=function(e){le();var t,n=be();n&&(t=Date.now(),we({object:this,type:"reaction",fn:e})),this._isRunning=!0,Z(this,e),this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Q(this),n&&xe({time:Date.now()-t}),he()},e.prototype.recoverFromError=function(){this._isRunning=!1,this._isTrackPending=!1},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(le(),Q(this),he()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e.$mobx=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.whyRun=function(){var e=xt(this._isRunning?this.newObserving:this.observing).map(function(e){return e.name});return"\nWhyRun? reaction '"+this.name+"':\n * Status: ["+(this.isDisposed?"stopped":this._isRunning?"running":this.isScheduled()?"scheduled":"idle")+"]\n * This reaction will re-run if any of the following observables changes:\n    "+Tt(e)+"\n    "+(this._isRunning?" (... or any observable accessed during the remainder of the current run)":"")+"\n\tMissing items in this list?\n\t  1. Check whether all used values are properly marked as observable (use isObservable to verify)\n\t  2. Make sure you didn't dereference values too early. MobX observes props, not primitives. E.g: use 'person.name' instead of 'name' in your computation.\n"},e}();t.Reaction=Qt;var $t=100,en=function(e){return e()},tn=Nt("Reaction",Qt),nn={spyReportEnd:!0};t.spy=Te,t.transaction=Me;var rn;!function(e){e[e.Recursive=0]="Recursive",e[e.Reference=1]="Reference",e[e.Structure=2]="Structure",e[e.Flat=3]="Flat"}(rn||(rn={})),t.ValueMode=rn,t.asReference=Ne,Ne.mobxModifier=rn.Reference,t.asStructure=Ue,Ue.mobxModifier=rn.Structure,t.asFlat=Fe,Fe.mobxModifier=rn.Flat,t.asMap=je;var on=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,e===!1}(),an=0,sn=function(){function e(){}return e}();sn.prototype=[];var cn=function(){function e(e,t,n,r){this.mode=t,this.array=n,this.owned=r,this.lastKnownLength=0,this.interceptors=null,this.changeListeners=null,this.atom=new Vt(e||"ObservableArray@"+yt())}return e.prototype.makeReactiveArrayItem=function(e){return He(e,"Array values cannot have modifiers"),this.mode===rn.Flat||this.mode===rn.Reference?e:Ve(e,this.mode,this.atom.name+"[..]")},e.prototype.intercept=function(e){return Ae(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Oe(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;e!==t&&(e>t?this.spliceWithArray(t,0,new Array(e-t)):this.spliceWithArray(e,t-e))},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=t,t>0&&e+t+1>an&&Ye(e+t+1)},e.prototype.spliceWithArray=function(e,t,n){Y();var r=this.values.length;if(void 0===e?e=0:e>r?e=r:e<0&&(e=Math.max(0,r+e)),t=1===arguments.length?r-e:void 0===t||null===t?0:Math.max(0,Math.min(t,r-e)),void 0===n&&(n=[]),Ce(this)){var i=Le(this,{object:this.array,type:"splice",index:e,removedCount:t,added:n});if(!i)return Mn;t=i.removedCount,n=i.added}n=n.map(this.makeReactiveArrayItem,this);var o=n.length-t;this.updateArrayLength(r,o);var a=(s=this.values).splice.apply(s,[e,t].concat(n));return 0===t&&0===n.length||this.notifyArraySplice(e,n,a),a;var s},e.prototype.notifyArrayChildUpdate=function(e,t,n){var r=!this.owned&&be(),i=Pe(this),o=i||r?{object:this.array,type:"update",index:e,newValue:t,oldValue:n}:null;r&&we(o),this.atom.reportChanged(),i&&ke(this,o),r&&xe()},e.prototype.notifyArraySplice=function(e,t,n){var r=!this.owned&&be(),i=Pe(this),o=i||r?{object:this.array,type:"splice",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;r&&we(o),this.atom.reportChanged(),i&&ke(this,o),r&&xe()},e}(),un=function(e){function t(t,n,r,i){void 0===i&&(i=!1),e.call(this);var o=new cn(r,n,this,i);Pt(this,"$mobx",o),t&&t.length?(o.updateArrayLength(0,t.length),o.values=t.map(o.makeReactiveArrayItem,o),o.notifyArraySplice(0,o.values.slice(),Mn)):o.values=[],on&&Object.defineProperty(o.array,"0",ln)}return Ft(t,e),t.prototype.intercept=function(e){return this.$mobx.intercept(e)},t.prototype.observe=function(e,t){return void 0===t&&(t=!1),this.$mobx.observe(e,t)},t.prototype.clear=function(){return this.splice(0)},t.prototype.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.slice(),e.map(function(e){return Je(e)?e.slice():e}))},t.prototype.replace=function(e){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,e)},t.prototype.toJS=function(){return this.slice()},t.prototype.toJSON=function(){return this.toJS()},t.prototype.peek=function(){return this.$mobx.values},t.prototype.find=function(e,t,n){void 0===n&&(n=0),this.$mobx.atom.reportObserved();for(var r=this.$mobx.values,i=r.length,o=n;o<i;o++)if(e.call(t,r[o],o,this))return r[o]},t.prototype.splice=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(e);case 2:return this.$mobx.spliceWithArray(e,t)}return this.$mobx.spliceWithArray(e,t,n)},t.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=this.$mobx;return n.spliceWithArray(n.values.length,0,e),n.values.length},t.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},t.prototype.shift=function(){return this.splice(0,1)[0]},t.prototype.unshift=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=this.$mobx;return n.spliceWithArray(0,0,e),n.values.length},t.prototype.reverse=function(){this.$mobx.atom.reportObserved();var e=this.slice();return e.reverse.apply(e,arguments)},t.prototype.sort=function(e){this.$mobx.atom.reportObserved();var t=this.slice();return t.sort.apply(t,arguments)},t.prototype.remove=function(e){var t=this.$mobx.values.indexOf(e);return t>-1&&(this.splice(t,1),!0)},t.prototype.move=function(e,t){function n(e){if(e<0)throw new Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=this.$mobx.values.length;if(e>=t)throw new Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}if(n.call(this,e),n.call(this,t),e!==t){var r,i=this.$mobx.values;r=e<t?i.slice(0,e).concat(i.slice(e+1,t+1),[i[e]],i.slice(t+1)):i.slice(0,t).concat([i[e]],i.slice(t,e),i.slice(e+1)),this.replace(r)}},t.prototype.toString=function(){return"[mobx.array] "+Array.prototype.toString.apply(this.$mobx.values,arguments)},t.prototype.toLocaleString=function(){return"[mobx.array] "+Array.prototype.toLocaleString.apply(this.$mobx.values,arguments)},t}(sn);gt(un.prototype,function(){return vt(this.slice())}),At(un.prototype,["constructor","intercept","observe","clear","concat","replace","toJS","toJSON","peek","find","splice","push","pop","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]),Object.defineProperty(un.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(e){this.$mobx.setArrayLength(e)}}),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some"].forEach(function(e){var t=Array.prototype[e];bt("function"==typeof t,"Base function not defined on Array prototype: '"+e+"'"),Lt(un.prototype,e,function(){return this.$mobx.atom.reportObserved(),t.apply(this.$mobx.values,arguments)})});var ln={configurable:!0,enumerable:!1,set:Xe(0),get:qe(0)};Ye(1e3),t.fastArray=Ke;var hn=Nt("ObservableArrayAdministration",cn);t.isObservableArray=Je;var pn={},dn=function(){function e(e,t){var n=this;this.$mobx=pn,this._data={},this._hasMap={},this.name="ObservableMap@"+yt(),this._keys=new un(null,rn.Reference,this.name+".keys()",!0),this.interceptors=null,this.changeListeners=null,this._valueMode=ze(t),this._valueMode===rn.Flat&&(this._valueMode=rn.Reference),V(!0,function(){Mt(e)?n.merge(e):Array.isArray(e)&&e.forEach(function(e){var t=e[0],r=e[1];return n.set(t,r)})})}return e.prototype._has=function(e){return"undefined"!=typeof this._data[e]},e.prototype.has=function(e){return!!this.isValidKey(e)&&(e=""+e,this._hasMap[e]?this._hasMap[e].get():this._updateHasMapEntry(e,!1).get())},e.prototype.set=function(e,t){this.assertValidKey(e),e=""+e;var n=this._has(e);if(He(t,"[mobx.map.set] Expected unwrapped value to be inserted to key '"+e+"'. If you need to use modifiers pass them as second argument to the constructor"),Ce(this)){var r=Le(this,{type:n?"update":"add",object:this,newValue:t,name:e});if(!r)return;t=r.newValue}n?this._updateValue(e,t):this._addValue(e,t)},e.prototype.delete=function(e){var t=this;if(this.assertValidKey(e),e=""+e,Ce(this)){var n=Le(this,{type:"delete",object:this,name:e});if(!n)return!1}if(this._has(e)){var r=be(),i=Pe(this),n=i||r?{type:"delete",object:this,oldValue:this._data[e].value,name:e}:null;return r&&we(n),Me(function(){t._keys.remove(e),t._updateHasMapEntry(e,!1);var n=t._data[e];n.setNewValue(void 0),t._data[e]=void 0},void 0,!1),i&&ke(this,n),r&&xe(),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap[e];return n?n.setNewValue(t):n=this._hasMap[e]=new wn(t,rn.Reference,this.name+"."+e+"?",!1),n},e.prototype._updateValue=function(e,t){var n=this._data[e];if(t=n.prepareNewValue(t),t!==_n){var r=be(),i=Pe(this),o=i||r?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null;r&&we(o),n.setNewValue(t),i&&ke(this,o),r&&xe()}},e.prototype._addValue=function(e,t){var n=this;Me(function(){var r=n._data[e]=new wn(t,n._valueMode,n.name+"."+e,!1);t=r.value,n._updateHasMapEntry(e,!0),n._keys.push(e)},void 0,!1);var r=be(),i=Pe(this),o=i||r?{type:"add",object:this,name:e,newValue:t}:null;r&&we(o),i&&ke(this,o),r&&xe()},e.prototype.get=function(e){if(e=""+e,this.has(e))return this._data[e].get()},e.prototype.keys=function(){return vt(this._keys.slice())},e.prototype.values=function(){return vt(this._keys.map(this.get,this))},e.prototype.entries=function(){var e=this;return vt(this._keys.map(function(t){return[t,e.get(t)]}))},e.prototype.forEach=function(e,t){var n=this;this.keys().forEach(function(r){return e.call(t,n.get(r),r)})},e.prototype.merge=function(e){var t=this;return Me(function(){fn(e)?e.keys().forEach(function(n){return t.set(n,e.get(n))}):Object.keys(e).forEach(function(n){return t.set(n,e[n])})},void 0,!1),this},e.prototype.clear=function(){var e=this;Me(function(){$(function(){e.keys().forEach(e.delete,e)})},void 0,!1)},Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.toJS=function(){var e=this,t={};return this.keys().forEach(function(n){return t[n]=e.get(n)}),t},e.prototype.toJs=function(){return _t("toJs is deprecated, use toJS instead"),this.toJS()},e.prototype.toJSON=function(){return this.toJS()},e.prototype.isValidKey=function(e){return null!==e&&void 0!==e&&("string"==typeof e||"number"==typeof e||"boolean"==typeof e)},e.prototype.assertValidKey=function(e){if(!this.isValidKey(e))throw new Error("[mobx.map] Invalid key: '"+e+"'")},e.prototype.toString=function(){var e=this;return this.name+"[{ "+this.keys().map(function(t){return t+": "+e.get(t)}).join(", ")+" }]"},e.prototype.observe=function(e,t){return bt(t!==!0,"`observe` doesn't support the fire immediately property for observable maps."),Oe(this,e)},e.prototype.intercept=function(e){return Ae(this,e)},e}();t.ObservableMap=dn,gt(dn.prototype,function(){return this.entries()}),t.map=Qe;var fn=Nt("ObservableMap",dn);t.isObservableMap=fn;var mn="\nIn MobX 2.* passing a function without arguments to (extend)observable will automatically be inferred to be a computed value.\nThis behavior is ambiguous and will change in MobX 3 to create just an observable reference to the value passed in.\nTo disambiguate, please pass the function wrapped with a modifier: use 'computed(fn)' (for current behavior; automatic conversion), or 'asReference(fn)' (future behavior, just store reference) or 'action(fn)'.\nNote that the idiomatic way to write computed properties is 'observable({ get propertyName() { ... }})'.\nFor more details, see https://github.com/mobxjs/mobx/issues/532",vn=function(){function e(e,t,n){this.target=e,this.name=t,this.mode=n,this.values={},this.changeListeners=null,this.interceptors=null}return e.prototype.observe=function(e,t){return bt(t!==!0,"`observe` doesn't support the fire immediately property for observable objects."),Oe(this,e)},e.prototype.intercept=function(e){return Ae(this,e)},e}(),gn={},yn={},bn=Nt("ObservableObjectAdministration",vn);t.isObservableObject=st;var _n={},wn=function(e){function t(t,n,r,i){void 0===r&&(r="ObservableValue@"+yt()),void 0===i&&(i=!0),e.call(this,r),this.mode=n,this.hasUnreportedChange=!1,this.value=void 0;var o=Be(t,rn.Recursive),a=o[0],s=o[1];this.mode===rn.Recursive&&(this.mode=a),this.value=Ve(s,this.mode,this.name),i&&be()&&_e({type:"create",object:this,newValue:this.value})}return Ft(t,e),t.prototype.set=function(e){var t=this.value;if(e=this.prepareNewValue(e),e!==_n){var n=be();n&&we({type:"update",object:this,newValue:e,oldValue:t}),this.setNewValue(e),n&&xe()}},t.prototype.prepareNewValue=function(e){if(He(e,"Modifiers cannot be used on non-initial values."),Y(),Ce(this)){var t=Le(this,{object:this,type:"update",newValue:e});if(!t)return _n;e=t.newValue}var n=Rt(this.mode===rn.Structure,this.value,e);return n?Ve(e,this.mode,this.name):_n},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),Pe(this)&&ke(this,[e,t])},t.prototype.get=function(){return this.reportObserved(),this.value},t.prototype.intercept=function(e){return Ae(this,e)},t.prototype.observe=function(e,t){return t&&e(this.value,void 0),Oe(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t}(Vt),xn=Nt("ObservableValue",wn),Tn="__$$iterating",En=function(){function e(){this.listeners=[],_t("extras.SimpleEventEmitter is deprecated and will be removed in the next major release")}return e.prototype.emit=function(){for(var e=this.listeners.slice(),t=0,n=e.length;t<n;t++)e[t].apply(null,arguments)},e.prototype.on=function(e){var t=this;return this.listeners.push(e),wt(function(){var n=t.listeners.indexOf(e);n!==-1&&t.listeners.splice(n,1)})},e.prototype.once=function(e){var t=this.on(function(){t(),e.apply(this,arguments)});return t},e}();t.SimpleEventEmitter=En;var Mn=[];Object.freeze(Mn);var Sn=[],Rn=function(){},Cn=Object.prototype.hasOwnProperty;t.isArrayLike=Ut}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,m)||(e[m]=d++,h[e[m]]={}),h[e[m]]}var i,o=n(4),a=n(39),s=n(152),c=n(76),u=n(185),l=n(50),h={},p=!1,d=0,f={topAbort:"abort",topAnimationEnd:u("animationend")||"animationend",topAnimationIteration:u("animationiteration")||"animationiteration",topAnimationStart:u("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:u("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),v=o({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=e}},setEnabled:function(e){v.ReactEventListener&&v.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!v.ReactEventListener||!v.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,i=r(n),o=a.registrationNameDependencies[e],s=0;s<o.length;s++){var c=o[s];i.hasOwnProperty(c)&&i[c]||("topWheel"===c?l("wheel")?v.ReactEventListener.trapBubbledEvent("topWheel","wheel",n):l("mousewheel")?v.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",n):v.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",n):"topScroll"===c?l("scroll",!0)?v.ReactEventListener.trapCapturedEvent("topScroll","scroll",n):v.ReactEventListener.trapBubbledEvent("topScroll","scroll",v.ReactEventListener.WINDOW_HANDLE):"topFocus"===c||"topBlur"===c?(l("focus",!0)?(v.ReactEventListener.trapCapturedEvent("topFocus","focus",n),v.ReactEventListener.trapCapturedEvent("topBlur","blur",n)):l("focusin")&&(v.ReactEventListener.trapBubbledEvent("topFocus","focusin",n),v.ReactEventListener.trapBubbledEvent("topBlur","focusout",n)),i.topBlur=!0,i.topFocus=!0):f.hasOwnProperty(c)&&v.ReactEventListener.trapBubbledEvent(c,f[c],n),i[c]=!0)}},trapBubbledEvent:function(e,t,n){return v.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return v.ReactEventListener.trapCapturedEvent(e,t,n)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var e=document.createEvent("MouseEvent");return null!=e&&"pageX"in e},ensureScrollValueMonitoring:function(){if(void 0===i&&(i=v.supportsEventPageXY()),!i&&!p){var e=c.refreshScrollValues;v.ReactEventListener.monitorScrollValue(e),p=!0}}});e.exports=v},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(26),o=n(76),a=n(48),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+o.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+o.currentScrollTop}};i.augmentClass(r,s),e.exports=r},function(e,t,n){"use strict";var r=n(3),i=(n(1),{}),o={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,i,o,a,s,c){this.isInTransaction()?r("27"):void 0;var u,l;try{this._isInTransaction=!0,u=!0,this.initializeAll(0),l=e.call(t,n,i,o,a,s,c),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(e){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return l},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=i,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===i)try{this.initializeAll(n+1)}catch(e){}}}},closeAll:function(e){this.isInTransaction()?void 0:r("28");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var o,a=t[n],s=this.wrapperInitData[n];try{o=!0,s!==i&&a.close&&a.close.call(this,s),o=!1}finally{if(o)try{this.closeAll(n+1)}catch(e){}}}this.wrapperInitData.length=0}};e.exports=o},function(e,t){"use strict";function n(e){var t=""+e,n=i.exec(t);if(!n)return t;var r,o="",a=0,s=0;for(a=n.index;a<t.length;a++){switch(t.charCodeAt(a)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#x27;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}s!==a&&(o+=t.substring(s,a)),s=a+1,o+=r}return s!==a?o+t.substring(s,a):o}function r(e){return"boolean"==typeof e||"number"==typeof e?""+e:n(e)}var i=/["'&<>]/;e.exports=r},function(e,t,n){"use strict";var r,i=n(6),o=n(38),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,c=n(46),u=c(function(e,t){if(e.namespaceURI!==o.svg||"innerHTML"in e)e.innerHTML=t;else{r=r||document.createElement("div"),r.innerHTML="<svg>"+t+"</svg>";for(var n=r.firstChild;n.firstChild;)e.appendChild(n.firstChild)}});if(i.canUseDOM){var l=document.createElement("div");l.innerHTML=" ",""===l.innerHTML&&(u=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),a.test(t)||"<"===t[0]&&s.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),l=null}e.exports=u},function(e,t,n){"use strict";function r(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function i(e,t,n,r,i){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n,r){var i=Array(r).fill().map(function(e,t){return new d.AreaVariant(t)}),o=new d.Area(e,t,n,i),a=!0,s=!1,c=void 0;try{for(var u,l=i[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var h=u.value;h.area=o}}catch(e){s=!0,c=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw c}}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.application_state=t.area_store=void 0;var s,c,u,l,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(28),d=n(12),f=function(){function e(){o(this,e),this.areas=[];var t=0;this.areas[1]=[a(0,"Pioneer II",t++,1),a(1,"Forest 1",t++,1),a(2,"Forest 2",t++,1),a(11,"Under the Dome",t++,1),a(3,"Cave 1",t++,6),a(4,"Cave 2",t++,5),a(5,"Cave 3",t++,6),a(12,"Underground Channel",t++,1),a(6,"Mine 1",t++,6),a(7,"Mine 2",t++,6),a(13,"Monitor Room",t++,1),a(8,"Ruins 1",t++,5),a(9,"Ruins 2",t++,5),a(10,"Ruins 3",t++,5),a(14,"Dark Falz",t++,1)],t=0,this.areas[2]=[a(0,"Lab",t++,1),a(1,"VR Temple Alpha",t++,3),a(2,"VR Temple Beta",t++,3),a(14,"VR Temple Final",t++,1),a(3,"VR Spaceship Alpha",t++,3),a(4,"VR Spaceship Beta",t++,3),a(15,"VR Spaceship Final",t++,1),a(5,"Central Control Area",t++,1),a(6,"Jungle Area East",t++,1),a(7,"Jungle Area North",t++,1),a(8,"Mountain Area",t++,3),a(9,"Seaside Area",t++,1),a(12,"Cliffs of Gal Da Val",t++,1),a(10,"Seabed Upper Levels",t++,3),a(11,"Seabed Lower Levels",t++,3),a(13,"Test Subject Disposal Area",t++,1),a(16,"Seaside Area at Night",t++,1),a(17,"Control Tower",t++,5)],
t=0,this.areas[4]=[a(0,"Pioneer II (Ep. IV)",t++,1),a(1,"Crater Route 1",t++,1),a(2,"Crater Route 2",t++,1),a(3,"Crater Route 3",t++,1),a(4,"Crater Route 4",t++,1),a(5,"Crater Interior",t++,1),a(6,"Subterranean Desert 1",t++,3),a(7,"Subterranean Desert 2",t++,3),a(8,"Subterranean Desert 3",t++,3),a(9,"Meteor Impact Site",t++,1)]}return h(e,[{key:"get_variant",value:function(e,t,n){if(1!==e&&2!==e&&4!==e)throw new Error("Expected episode to be 1, 2 or 4, got "+e+".");var r=this.areas[e].find(function(e){return e.id===t});if(!r)throw new Error("Area id "+t+" for episode "+e+" is invalid.");var i=r.area_variants[n];if(!i)throw new Error("Area variant id "+n+" for area "+t+" of episode "+e+" is invalid.");return i}}]),e}(),m=(t.area_store=new f,s=function e(){o(this,e),r(this,"current_quest",c,this),r(this,"current_area",u,this),r(this,"selected_entity",l,this)},c=i(s.prototype,"current_quest",[p.observable],{enumerable:!0,initializer:function(){return null}}),u=i(s.prototype,"current_area",[p.observable],{enumerable:!0,initializer:function(){return null}}),l=i(s.prototype,"selected_entity",[p.observable],{enumerable:!0,initializer:function(){return null}}),s);t.application_state=new m},function(e,t){"use strict";function n(e){return(0|e)===e}Object.defineProperty(t,"__esModule",{value:!0}),t.is_int=n},function(e,t){"use strict";function n(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function r(e,t){if(n(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++)if(!i.call(t,r[a])||!n(e[r[a]],t[r[a]]))return!1;return!0}var i=Object.prototype.hasOwnProperty;e.exports=r},function(e,t,n){"use strict";function r(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}function i(e,t,n){l.insertTreeBefore(e,t,n)}function o(e,t,n){Array.isArray(t)?s(e,t[0],t[1],n):m(e,t,n)}function a(e,t){if(Array.isArray(t)){var n=t[1];t=t[0],c(e,t,n),e.removeChild(n)}e.removeChild(t)}function s(e,t,n,r){for(var i=t;;){var o=i.nextSibling;if(m(e,i,r),i===n)break;i=o}}function c(e,t,n){for(;;){var r=t.nextSibling;if(r===n)break;e.removeChild(r)}}function u(e,t,n){var r=e.parentNode,i=e.nextSibling;i===t?n&&m(r,document.createTextNode(n),i):n?(f(i,n),c(r,i,t)):c(r,e,t)}var l=n(15),h=n(129),p=(n(5),n(8),n(46)),d=n(33),f=n(83),m=p(function(e,t,n){e.insertBefore(t,n)}),v=h.dangerouslyReplaceNodeWithMarkup,g={dangerouslyReplaceNodeWithMarkup:v,replaceDelimitedText:u,processUpdates:function(e,t){for(var n=0;n<t.length;n++){var s=t[n];switch(s.type){case"INSERT_MARKUP":i(e,s.content,r(e,s.afterNode));break;case"MOVE_EXISTING":o(e,s.fromNode,r(e,s.afterNode));break;case"SET_MARKUP":d(e,s.content);break;case"TEXT_CONTENT":f(e,s.content);break;case"REMOVE_NODE":a(e,s.fromNode)}}}};e.exports=g},function(e,t){"use strict";var n={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};e.exports=n},function(e,t,n){"use strict";function r(){if(s)for(var e in c){var t=c[e],n=s.indexOf(e);if(n>-1?void 0:a("96",e),!u.plugins[n]){t.extractEvents?void 0:a("97",e),u.plugins[n]=t;var r=t.eventTypes;for(var o in r)i(r[o],t,o)?void 0:a("98",o,e)}}}function i(e,t,n){u.eventNameDispatchConfigs.hasOwnProperty(n)?a("99",n):void 0,u.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];o(s,t,n)}return!0}return!!e.registrationName&&(o(e.registrationName,t,n),!0)}function o(e,t,n){u.registrationNameModules[e]?a("100",e):void 0,u.registrationNameModules[e]=t,u.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var a=n(3),s=(n(1),null),c={},u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){s?a("101"):void 0,s=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];c.hasOwnProperty(n)&&c[n]===i||(c[n]?a("102",n):void 0,c[n]=i,t=!0)}t&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return u.registrationNameModules[t.registrationName]||null;if(void 0!==t.phasedRegistrationNames){var n=t.phasedRegistrationNames;for(var r in n)if(n.hasOwnProperty(r)){var i=u.registrationNameModules[n[r]];if(i)return i}}return null},_resetEventPlugins:function(){s=null;for(var e in c)c.hasOwnProperty(e)&&delete c[e];u.plugins.length=0;var t=u.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=u.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};e.exports=u},function(e,t,n){"use strict";function r(e){return"topMouseUp"===e||"topTouchEnd"===e||"topTouchCancel"===e}function i(e){return"topMouseMove"===e||"topTouchMove"===e}function o(e){return"topMouseDown"===e||"topTouchStart"===e}function a(e,t,n,r){var i=e.type||"unknown-event";e.currentTarget=g.getNodeFromInstance(r),t?m.invokeGuardedCallbackWithCatch(i,n,e):m.invokeGuardedCallback(i,n,e),e.currentTarget=null}function s(e,t){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)a(e,t,n[i],r[i]);else n&&a(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null}function c(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function u(e){var t=c(e);return e._dispatchInstances=null,e._dispatchListeners=null,t}function l(e){var t=e._dispatchListeners,n=e._dispatchInstances;Array.isArray(t)?f("103"):void 0,e.currentTarget=t?g.getNodeFromInstance(n):null;var r=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,r}function h(e){return!!e._dispatchListeners}var p,d,f=n(3),m=n(44),v=(n(1),n(2),{injectComponentTree:function(e){p=e},injectTreeTraversal:function(e){d=e}}),g={isEndish:r,isMoveish:i,isStartish:o,executeDirectDispatch:l,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:u,hasDispatches:h,getInstanceFromNode:function(e){return p.getInstanceFromNode(e)},getNodeFromInstance:function(e){return p.getNodeFromInstance(e)},isAncestor:function(e,t){return d.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return d.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return d.getParentInstance(e)},traverseTwoPhase:function(e,t,n){return d.traverseTwoPhase(e,t,n)},traverseEnterLeave:function(e,t,n,r,i){return d.traverseEnterLeave(e,t,n,r,i)},injection:v};e.exports=g},function(e,t){"use strict";function n(e){var t=/[=:]/g,n={"=":"=0",":":"=2"},r=(""+e).replace(t,function(e){return n[e]});return"$"+r}function r(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"},r="."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1);return(""+r).replace(t,function(e){return n[e]})}var i={escape:n,unescape:r};e.exports=i},function(e,t,n){"use strict";function r(e){null!=e.checkedLink&&null!=e.valueLink?s("87"):void 0}function i(e){r(e),null!=e.value||null!=e.onChange?s("88"):void 0}function o(e){r(e),null!=e.checked||null!=e.onChange?s("89"):void 0}function a(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var s=n(3),c=n(18),u=n(158),l=(n(1),n(2),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),h={value:function(e,t,n){return!e[t]||l[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:c.PropTypes.func},p={},d={checkPropTypes:function(e,t,n){for(var r in h){if(h.hasOwnProperty(r))var i=h[r](t,r,e,"prop",null,u);if(i instanceof Error&&!(i.message in p)){p[i.message]=!0;a(n)}}},getValue:function(e){return e.valueLink?(i(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(o(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(i(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(o(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};e.exports=d},function(e,t,n){"use strict";var r=n(3),i=(n(1),!1),o={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){i?r("104"):void 0,o.replaceNodeWithMarkup=e.replaceNodeWithMarkup,o.processChildrenUpdates=e.processChildrenUpdates,i=!0}}};e.exports=o},function(e,t,n){"use strict";function r(e,t,n){try{t(n)}catch(e){null===i&&(i=e)}}var i=null,o={invokeGuardedCallback:r,invokeGuardedCallbackWithCatch:r,rethrowCaughtError:function(){if(i){var e=i;throw i=null,e}}};e.exports=o},function(e,t,n){"use strict";function r(e){c.enqueueUpdate(e)}function i(e){var t=typeof e;if("object"!==t)return t;var n=e.constructor&&e.constructor.name||t,r=Object.keys(e);return r.length>0&&r.length<20?n+" (keys: "+r.join(", ")+")":n}function o(e,t){var n=s.get(e);if(!n){return null}return n}var a=n(3),s=(n(11),n(25)),c=(n(8),n(9)),u=(n(1),n(2),{isMounted:function(e){var t=s.get(e);return!!t&&!!t._renderedComponent},enqueueCallback:function(e,t,n){u.validateCallback(t,n);var i=o(e);return i?(i._pendingCallbacks?i._pendingCallbacks.push(t):i._pendingCallbacks=[t],void r(i)):null},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],r(e)},enqueueForceUpdate:function(e){var t=o(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,r(t))},enqueueReplaceState:function(e,t){var n=o(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(e,t){var n=o(e,"setState");if(n){var i=n._pendingStateQueue||(n._pendingStateQueue=[]);i.push(t),r(n)}},enqueueElementInternal:function(e,t,n){e._pendingElement=t,e._context=n,r(e)},validateCallback:function(e,t){e&&"function"!=typeof e?a("122",t,i(e)):void 0}});e.exports=u},function(e,t){"use strict";var n=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e};e.exports=n},function(e,t){"use strict";function n(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}e.exports=n},function(e,t){"use strict";function n(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=i[e];return!!r&&!!n[r]}function r(e){return n}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=r},function(e,t){"use strict";function n(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r="function"==typeof a[n]}return!r&&i&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var i,o=n(6);o.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),e.exports=r},function(e,t){"use strict";function n(e,t){var n=null===e||e===!1,r=null===t||t===!1;if(n||r)return n===r;var i=typeof e,o=typeof t;return"string"===i||"number"===i?"string"===o||"number"===o:"object"===o&&e.type===t.type&&e.key===t.key}e.exports=n},function(e,t,n){"use strict";var r=(n(4),n(7)),i=(n(2),r);e.exports=i},function(e,t,n){"use strict";function r(e,t,n){this.props=e,this.context=t,this.refs=a,this.updater=n||o}var i=n(20),o=n(54),a=(n(88),n(22));n(1),n(2);r.prototype.isReactComponent={},r.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e?i("85"):void 0,this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")};e.exports=r},function(e,t,n){"use strict";function r(e,t){}var i=(n(2),{isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){r(e,"forceUpdate")},enqueueReplaceState:function(e,t){r(e,"replaceState")},enqueueSetState:function(e,t){r(e,"setState")}});e.exports=i},function(e,t,n){"use strict";function r(e){s.application_state.selected_entity=e}function i(e){var t=new FileReader;t.addEventListener("loadend",function(){var e=(0,c.parse_quest)(new a.ArrayBufferCursor(t.result,!0));s.application_state.current_area=null,s.application_state.selected_entity=null,s.application_state.current_quest=e,e.area_variants.length&&(s.application_state.current_area=e.area_variants[0].area);var n=!0,r=!1,i=void 0;try{for(var o,h=function(){var t=o.value;(0,u.get_area_sections)(e.episode,t.area.id,t.id).then(function(n){t.sections=n;var r=!0,i=!1,o=void 0;try{for(var a,s=e.objects.filter(function(e){return e.area_id===t.area.id})[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;c.object3d=(0,l.create_object_geometry)(c,n)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var u=!0,h=!1,p=void 0;try{for(var d,f=e.npcs.filter(function(e){return e.area_id===t.area.id})[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var m=d.value;m.object3d=(0,l.create_npc_geometry)(m,n)}}catch(e){h=!0,p=e}finally{try{!u&&f.return&&f.return()}finally{if(h)throw p}}})},p=e.area_variants[Symbol.iterator]();!(n=(o=p.next()).done);n=!0)h()}catch(e){r=!0,i=e}finally{try{!n&&p.return&&p.return()}finally{if(r)throw i}}}),t.readAsArrayBuffer(e)}function o(e){if(s.application_state.selected_entity=null,null===e)s.application_state.current_area=null;else if(s.application_state.current_quest){var t=s.application_state.current_quest.area_variants.find(function(t){return t.area.id===e});s.application_state.current_area=t&&t.area||null}}Object.defineProperty(t,"__esModule",{value:!0}),t.entity_selected=r,t.load_file=i,t.current_area_id_changed=o;var a=n(14),s=n(34),c=n(100),u=n(56),l=n(57)},function(e,t,n){"use strict";function r(e,t,n){var r=u.get(e+"-"+t+"-"+n);return r?r:a(e,t,n).then(function(e){var t=e.sections;return t})}function i(e,t,n){var r=l.get(e+"-"+t+"-"+n);return r?r:a(e,t,n).then(function(e){var t=e.object_3d;return t})}function o(e,t,n){var r=h.get(e+"-"+t+"-"+n);if(r)return r;var i=(0,s.get_area_collision_data)(e,t,n).then(c.parse_c_rel);return h.set(t+"-"+n,i),i}function a(e,t,n){var r=(0,s.get_area_render_data)(e,t,n).then(c.parse_n_rel),i=new Promise(function(e,t){r.then(function(t){var n=t.sections;return e(n)}).catch(t)}),o=new Promise(function(e,t){r.then(function(t){var n=t.object_3d;return e(n)}).catch(t)});return u.set(e+"-"+t+"-"+n,i),l.set(e+"-"+t+"-"+n,o),r}Object.defineProperty(t,"__esModule",{value:!0}),t.get_area_sections=r,t.get_area_render_geometry=i,t.get_area_collision_geometry=o;var s=(n(27),n(108),n(91)),c=n(97),u=new Map,l=new Map,h=new Map},function(e,t,n){"use strict";function r(e,t){return o(e,t,u,"Object")}function i(e,t){return o(e,t,l,"NPC")}function o(e,t,n,r){var i=e.position,o=i.x,u=i.y,l=i.z,h=t.find(function(t){return t.id===e.section_id});if(h){var p=a(h.position,3),d=p[0],f=p[1],m=p[2],v=Math.sin(h.y_axis_rotation),g=Math.cos(h.y_axis_rotation),y=g*o+v*l,b=-v*o+g*l;o=y+d,u+=f,l=b+m}else console.warn("Section "+e.section_id+" not found.");var _=new s.CylinderGeometry(6,6,30);_.translate(0,15,0);var w=new s.Mesh(_,new s.MeshLambertMaterial({color:n,transparent:!0,opacity:.8}));return w.name=r,w.userData.entity=e,(0,c.autorun)(function(){var t=e.position,n=t.x,r=t.y,i=t.z;w.position.set(n,r,i)}),e.position={x:o,y:u,z:l},w}Object.defineProperty(t,"__esModule",{value:!0}),t.NPC_SELECTED_COLOR=t.NPC_HOVER_COLOR=t.NPC_COLOR=t.OBJECT_SELECTED_COLOR=t.OBJECT_HOVER_COLOR=t.OBJECT_COLOR=void 0;var a=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.create_object_geometry=r,t.create_npc_geometry=i;var s=n(27),c=n(28),u=(n(12),t.OBJECT_COLOR=16776960),l=(t.OBJECT_HOVER_COLOR=16768831,t.OBJECT_SELECTED_COLOR=16755200,t.NPC_COLOR=16711680);t.NPC_HOVER_COLOR=16727903,t.NPC_SELECTED_COLOR=16711764},function(e,t,n){"use strict";var r=n(7),i={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};e.exports=i},function(e,t){"use strict";function n(e){try{e.focus()}catch(e){}}e.exports=n},function(e,t){"use strict";function n(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(e){return document.body}}e.exports=n},function(e,t,n){!function(t,r){e.exports=r(n(28),n(21),n(64))}(this,function(e,t,n){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PropTypes=t.propTypes=t.inject=t.Provider=t.useStaticRendering=t.trackComponents=t.componentByNodeRegistery=t.renderReporter=t.Observer=t.observer=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=n(1);Object.defineProperty(t,"observer",{enumerable:!0,get:function(){return a.observer}}),Object.defineProperty(t,"Observer",{enumerable:!0,get:function(){return a.Observer}}),Object.defineProperty(t,"renderReporter",{enumerable:!0,get:function(){return a.renderReporter}}),Object.defineProperty(t,"componentByNodeRegistery",{enumerable:!0,get:function(){return a.componentByNodeRegistery}}),Object.defineProperty(t,"trackComponents",{enumerable:!0,get:function(){return a.trackComponents}}),Object.defineProperty(t,"useStaticRendering",{enumerable:!0,get:function(){return a.useStaticRendering}});var s=n(8);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return i(s).default}});var c=n(6);Object.defineProperty(t,"inject",{enumerable:!0,get:function(){return i(c).default}});var u=n(2),l=r(u),h=n(3),p=i(h),d=n(4),f=(n(9),n(10)),m=r(f),v=void 0;if(v="mobx-react",!l)throw new Error(v+" requires the MobX package");if(!p.default)throw new Error(v+" requires React to be available");"function"==typeof d.unstable_batchedUpdates&&l.extras.setReactionScheduler(d.unstable_batchedUpdates),t.propTypes=m,t.PropTypes=m,t.default=e.exports,"object"===("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":o(__MOBX_DEVTOOLS_GLOBAL_HOOK__))&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(e.exports,l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return y.default?y.default.findDOMNode(e):null}function o(e){var t=i(e);t&&S&&S.set(t,e),R.emit({event:"render",renderTime:e.__$mobRenderEnd-e.__$mobRenderStart,totalTime:Date.now()-e.__$mobRenderStart,component:e,node:t})}function a(){if("undefined"==typeof WeakMap)throw new Error("[mobx-react] tracking components is not supported in this browser.");T||(T=!0)}function s(e){E=e}function c(e,t){var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],r=e[t],i=C[t];r?e[t]=n===!0?function(){i.apply(this,arguments),r.apply(this,arguments)}:function(){r.apply(this,arguments),i.apply(this,arguments)}:e[t]=i}function u(e,t){if(null==e||null==t||"object"!==("undefined"==typeof e?"undefined":p(e))||"object"!==("undefined"==typeof t?"undefined":p(t)))return e!==t;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(var r=void 0,i=n.length-1;r=n[i];i--)if(t[r]!==e[r])return!0;return!1}function l(e,t){if("string"==typeof e)throw new Error("Store names should be provided as array");if(Array.isArray(e))return M||(M=!0,console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')),t?x.default.apply(null,e)(l(t)):function(t){return l(e,t)};var n=e;if(n.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),!("function"!=typeof n||n.prototype&&n.prototype.render||n.isReactClass||v.default.Component.isPrototypeOf(n)))return l(v.default.createClass({displayName:n.displayName||n.name,propTypes:n.propTypes,contextTypes:n.contextTypes,getDefaultProps:function(){return n.defaultProps},render:function(){return n.call(this,this.props,this.context)}}));if(!n)throw new Error("Please pass a valid component to 'observer'");var r=n.prototype||n;return h(r),n.isMobXReactObserver=!0,n}function h(e){c(e,"componentWillMount",!0),["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(t){c(e,t)}),e.shouldComponentUpdate||(e.shouldComponentUpdate=C.shouldComponentUpdate)}Object.defineProperty(t,"__esModule",{value:!0}),t.Observer=t.renderReporter=t.componentByNodeRegistery=void 0;var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.trackComponents=a,t.useStaticRendering=s,t.observer=l;var d=n(2),f=r(d),m=n(3),v=r(m),g=n(4),y=r(g),b=n(5),_=r(b),w=n(6),x=r(w),T=!1,E=!1,M=!1,S=t.componentByNodeRegistery="undefined"!=typeof WeakMap?new WeakMap:void 0,R=t.renderReporter=new _.default,C={componentWillMount:function(){function e(e){var t=this[e],n=new f.default.Atom("reactive "+e);Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:function(){return n.reportObserved(),t},set:function(e){!o&&u(t,e)?(t=e,i=!0,n.reportChanged(),i=!1):t=e}})}var t=this;if(E!==!0){var n=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",r=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID,i=!1,o=!1;e.call(this,"props"),e.call(this,"state");var a=this.render.bind(this),s=null,c=!1,l=function(){return s=new f.default.Reaction(n+"#"+r+".render()",function(){if(!c&&(c=!0,"function"==typeof t.componentWillReact&&t.componentWillReact(),t.__$mobxIsUnmounted!==!0)){var e=!0;try{o=!0,i||v.default.Component.prototype.forceUpdate.call(t),e=!1}finally{o=!1,e&&s.dispose()}}}),h.$mobx=s,t.render=h,h()},h=function(){c=!1;var e=void 0;return s.track(function(){T&&(t.__$mobRenderStart=Date.now()),e=f.default.extras.allowStateChanges(!1,a),T&&(t.__$mobRenderEnd=Date.now())}),e};this.render=l}},componentWillUnmount:function(){if(E!==!0&&(this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0,T)){var e=i(this);e&&S&&S.delete(e),R.emit({event:"destroy",component:this,node:e})}},componentDidMount:function(){T&&o(this)},componentDidUpdate:function(){T&&o(this)},shouldComponentUpdate:function(e,t){return E&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==t||u(this.props,e)}},A=t.Observer=l(function(e){var t=e.children;return t()});A.propTypes={children:v.default.PropTypes.func.isRequired}},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e),this.listeners=[]}return r(e,[{key:"on",value:function(e){var t=this;return this.listeners.push(e),function(){var n=t.listeners.indexOf(e);n!==-1&&t.listeners.splice(n,1)}}},{key:"emit",value:function(e){this.listeners.forEach(function(t){return t(e)})}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var r="inject-"+(t.displayName||t.name||t.constructor&&t.constructor.name||"Unknown");n&&(r+="-with-"+n);var i=u.default.createClass({displayName:r,storeRef:function(e){this.wrappedInstance=e},render:function(){var n={};for(var r in this.props)this.props.hasOwnProperty(r)&&(n[r]=this.props[r]);var i=e(this.context.mobxStores||{},n,this.context)||{};for(var o in i)n[o]=i[o];return n.ref=this.storeRef,u.default.createElement(t,n)}});return(0,h.default)(i,t),i.wrappedComponent=t,Object.defineProperties(i,f),i}function o(e){return function(t,n){return e.forEach(function(e){if(!(e in n)){if(!(e in t))throw new Error("MobX observer: Store '"+e+"' is not available! Make sure it is provided by some Provider");n[e]=t[e]}}),n}}function a(){var e=arguments,t=void 0;if("function"==typeof arguments[0])return t=arguments[0],function(e){var n=i(t,e);return n.isMobxInjector=!1,n=(0,p.observer)(n),n.isMobxInjector=!0,n};var n=function(){for(var n=[],r=0;r<e.length;r++)n[r]=e[r];return t=o(n),{v:function(e){return i(t,e,n.join("-"))}}}();return"object"===("undefined"==typeof n?"undefined":s(n))?n.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.default=a;var c=n(3),u=r(c),l=n(7),h=r(l),p=n(1),d={mobxStores:c.PropTypes.object};Object.seal(d);var f={contextTypes:{get:function(){return d},set:function(e){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:!0,enumerable:!1},isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}}},function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},i="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,o){if("string"!=typeof t){var a=Object.getOwnPropertyNames(t);i&&(a=a.concat(Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;++s)if(!(n[a[s]]||r[a[s]]||o&&o[a[s]]))try{e[a[s]]=t[a[s]]}catch(e){}}return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,c,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(3),h=r(l),p={children:!0,key:!0,ref:!0},d=(c=s=function(e){function t(){return i(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),u(t,[{key:"render",value:function(){return h.default.Children.only(this.props.children)}},{key:"getChildContext",value:function(){var e={},t=this.context.mobxStores;if(t)for(var n in t)e[n]=t[n];for(var r in this.props)p[r]||(e[r]=this.props[r]);return{mobxStores:e}}},{key:"componentWillReceiveProps",value:function(e){Object.keys(e).length!==Object.keys(this.props).length&&console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children");for(var t in e)p[t]||this.props[t]===e[t]||console.warn("MobX Provider: Provided store '"+t+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}}]),t}(l.Component),s.contextTypes={mobxStores:l.PropTypes.object},s.childContextTypes={mobxStores:l.PropTypes.object.isRequired},c);t.default=d},function(e,t){e.exports=null},function(e,t,n){"use strict";function r(e){function t(t,n,r,i,o,a){for(var s=arguments.length,c=Array(s>6?s-6:0),u=6;u<s;u++)c[u-6]=arguments[u];return(0,l.untracked)(function(){if(i=i||"<<anonymous>>",a=a||r,null==n[r]){if(t){var s=null===n[r]?"null":"undefined";return new Error("The "+o+" `"+a+"` is marked as required in `"+i+"`, but its value is `"+s+"`.")}return null}return e.apply(void 0,[n,r,i,o,a].concat(c))})}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function i(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function o(e){var t="undefined"==typeof e?"undefined":u(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":i(t,e)?"symbol":t}function a(e){var t=o(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function s(e,t){return r(function(n,r,i,s,c){return(0,l.untracked)(function(){if(e&&o(n[r])===t.toLowerCase())return null;var s=void 0;switch(t){case"Array":s=l.isObservableArray;break;case"Object":s=l.isObservableObject;break;case"Map":s=l.isObservableMap;break;default:throw new Error("Unexpected mobxType: "+t)}var u=n[r];if(!s(u)){var h=a(u),p=e?" or javascript `"+t.toLowerCase()+"`":"";return new Error("Invalid prop `"+c+"` of type `"+h+"` supplied to `"+i+"`, expected `mobx.Observable"+t+"`"+p+".")}return null})})}function c(e,t){return r(function(n,r,i,o,a){for(var c=arguments.length,u=Array(c>5?c-5:0),h=5;h<c;h++)u[h-5]=arguments[h];return(0,l.untracked)(function(){if("function"!=typeof t)return new Error("Property `"+a+"` of component `"+i+"` has invalid PropType notation.");var c=s(e,"Array")(n,r,i);if(c instanceof Error)return c;for(var l=n[r],h=0;h<l.length;h++)if(c=t.apply(void 0,[l,h,i,o,a+"["+h+"]"].concat(u)),c instanceof Error)return c;return null})})}Object.defineProperty(t,"__esModule",{value:!0}),t.objectOrObservableObject=t.arrayOrObservableArrayOf=t.arrayOrObservableArray=t.observableObject=t.observableMap=t.observableArrayOf=t.observableArray=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e;
}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},l=n(2);t.observableArray=s(!1,"Array"),t.observableArrayOf=c.bind(null,!1),t.observableMap=s(!1,"Map"),t.observableObject=s(!1,"Object"),t.arrayOrObservableArray=s(!0,"Array"),t.arrayOrObservableArrayOf=c.bind(null,!0),t.objectOrObservableObject=s(!0,"Object")}])})},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function a(){m&&d&&(m=!1,d.length?f=d.concat(f):v=-1,f.length&&s())}function s(){if(!m){var e=i(a);m=!0;for(var t=f.length;t;){for(d=f,f=[];++v<t;)d&&d[v].run();v=-1,t=f.length}d=null,m=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,h,p=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(e){h=r}}();var d,f=[],m=!1,v=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new c(e,t)),1!==f.length||m||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(e){return g=e,y}}function o(e,t){try{return e(t)}catch(e){return g=e,y}}function a(e,t,n){try{e(t,n)}catch(e){return g=e,y}}function s(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,e!==r&&m(e,this)}function c(e,t,n){return new e.constructor(function(i,o){var a=new s(r);a.then(i,o),u(e,new f(t,n,a))})}function u(e,t){for(;3===e._81;)e=e._65;return s._10&&s._10(e),0===e._81?0===e._45?(e._45=1,void(e._54=t)):1===e._45?(e._45=2,void(e._54=[e._54,t])):void e._54.push(t):void l(e,t)}function l(e,t){v(function(){var n=1===e._81?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._81?h(t.promise,e._65):p(t.promise,e._65));var r=o(n,e._65);r===y?p(t.promise,g):h(t.promise,r)})}function h(e,t){if(t===e)return p(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=i(t);if(n===y)return p(e,g);if(n===e.then&&t instanceof s)return e._81=3,e._65=t,void d(e);if("function"==typeof n)return void m(n.bind(t),e)}e._81=1,e._65=t,d(e)}function p(e,t){e._81=2,e._65=t,s._97&&s._97(e,t),d(e)}function d(e){if(1===e._45&&(u(e,e._54),e._54=null),2===e._45){for(var t=0;t<e._54.length;t++)u(e,e._54[t]);e._54=null}}function f(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function m(e,t){var n=!1,r=a(e,function(e){n||(n=!0,h(t,e))},function(e){n||(n=!0,p(t,e))});n||r!==y||(n=!0,p(t,g))}var v=n(90),g=null,y={};e.exports=s,s._10=null,s._97=null,s._61=r,s.prototype.then=function(e,t){if(this.constructor!==s)return c(this,e,t);var n=new s(r);return u(this,new f(e,t,n)),n}},function(e,t,n){"use strict";e.exports=n(137)},function(e,t){"use strict";function n(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){i.forEach(function(t){r[n(t,e)]=r[e]})});var o={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},a={isUnitlessNumber:r,shorthandPropertyExpansions:o};e.exports=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(3),o=n(13),a=(n(1),function(){function e(t){r(this,e),this._callbacks=null,this._contexts=null,this._arg=t}return e.prototype.enqueue=function(e,t){this._callbacks=this._callbacks||[],this._callbacks.push(e),this._contexts=this._contexts||[],this._contexts.push(t)},e.prototype.notifyAll=function(){var e=this._callbacks,t=this._contexts,n=this._arg;if(e&&t){e.length!==t.length?i("24"):void 0,this._callbacks=null,this._contexts=null;for(var r=0;r<e.length;r++)e[r].call(t[r],n);e.length=0,t.length=0}},e.prototype.checkpoint=function(){return this._callbacks?this._callbacks.length:0},e.prototype.rollback=function(e){this._callbacks&&this._contexts&&(this._callbacks.length=e,this._contexts.length=e)},e.prototype.reset=function(){this._callbacks=null,this._contexts=null},e.prototype.destructor=function(){this.reset()},e}());e.exports=o.addPoolingTo(a)},function(e,t,n){"use strict";function r(e){return!!u.hasOwnProperty(e)||!c.hasOwnProperty(e)&&(s.test(e)?(u[e]=!0,!0):(c[e]=!0,!1))}function i(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&t===!1}var o=n(16),a=(n(5),n(8),n(186)),s=(n(2),new RegExp("^["+o.ATTRIBUTE_NAME_START_CHAR+"]["+o.ATTRIBUTE_NAME_CHAR+"]*$")),c={},u={},l={createMarkupForID:function(e){return o.ID_ATTRIBUTE_NAME+"="+a(e)},setAttributeForID:function(e,t){e.setAttribute(o.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return o.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(o.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){var n=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(n){if(i(n,t))return"";var r=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&t===!0?r+'=""':r+"="+a(t)}return o.isCustomAttribute(e)?null==t?"":e+"="+a(t):null},createMarkupForCustomAttribute:function(e,t){return r(e)&&null!=t?e+"="+a(t):""},setValueForProperty:function(e,t,n){var r=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(r){var a=r.mutationMethod;if(a)a(e,n);else{if(i(r,n))return void this.deleteValueForProperty(e,t);if(r.mustUseProperty)e[r.propertyName]=n;else{var s=r.attributeName,c=r.attributeNamespace;c?e.setAttributeNS(c,s,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&n===!0?e.setAttribute(s,""):e.setAttribute(s,""+n)}}}else if(o.isCustomAttribute(t))return void l.setValueForAttribute(e,t,n)},setValueForAttribute:function(e,t,n){if(r(t)){null==n?e.removeAttribute(t):e.setAttribute(t,""+n)}},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(n){var r=n.mutationMethod;if(r)r(e,void 0);else if(n.mustUseProperty){var i=n.propertyName;n.hasBooleanValue?e[i]=!1:e[i]=""}else e.removeAttribute(n.attributeName)}else o.isCustomAttribute(t)&&e.removeAttribute(t)}};e.exports=l},function(e,t){"use strict";var n={hasCachedChildNodes:1};e.exports=n},function(e,t,n){"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=s.getValue(e);null!=t&&i(this,Boolean(e.multiple),t)}}function i(e,t,n){var r,i,o=c.getNodeFromInstance(e).options;if(t){for(r={},i=0;i<n.length;i++)r[""+n[i]]=!0;for(i=0;i<o.length;i++){var a=r.hasOwnProperty(o[i].value);o[i].selected!==a&&(o[i].selected=a)}}else{for(r=""+n,i=0;i<o.length;i++)if(o[i].value===r)return void(o[i].selected=!0);o.length&&(o[0].selected=!0)}}function o(e){var t=this._currentElement.props,n=s.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),u.asap(r,this),n}var a=n(4),s=n(42),c=n(5),u=n(9),l=(n(2),!1),h={getHostProps:function(e,t){return a({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var n=s.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,listeners:null,onChange:o.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||l||(l=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var r=s.getValue(t);null!=r?(e._wrapperState.pendingUpdate=!1,i(e,Boolean(t.multiple),r)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?i(e,Boolean(t.multiple),t.defaultValue):i(e,Boolean(t.multiple),t.multiple?[]:""))}};e.exports=h},function(e,t){"use strict";var n,r={injectEmptyComponentFactory:function(e){n=e}},i={create:function(e){return n(e)}};i.injection=r,e.exports=i},function(e,t){"use strict";var n={logTopLevelRenders:!1};e.exports=n},function(e,t,n){"use strict";function r(e){return c?void 0:a("111",e.type),new c(e)}function i(e){return new l(e)}function o(e){return e instanceof l}var a=n(3),s=n(4),c=(n(1),null),u={},l=null,h={injectGenericComponentClass:function(e){c=e},injectTextComponentClass:function(e){l=e},injectComponentClasses:function(e){s(u,e)}},p={createInternalComponent:r,createInstanceForText:i,isTextComponent:o,injection:h};e.exports=p},function(e,t,n){"use strict";function r(e){return o(document.documentElement,e)}var i=n(145),o=n(112),a=n(59),s=n(60),c={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:c.hasSelectionCapabilities(e)?c.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,i=e.selectionRange;t!==n&&r(n)&&(c.hasSelectionCapabilities(n)&&c.setSelection(n,i),a(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=i.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;if(void 0===r&&(r=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var o=e.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",r-n),o.select()}else i.setOffsets(e,t)}};e.exports=c},function(e,t,n){"use strict";function r(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function i(e){return e?e.nodeType===I?e.documentElement:e.firstChild:null}function o(e){return e.getAttribute&&e.getAttribute(P)||""}function a(e,t,n,r,i){var o;if(w.logTopLevelRenders){var a=e._currentElement.props.child,s=a.type;o="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(o)}var c=E.mountComponent(e,n,null,b(e,t),i,0);o&&console.timeEnd(o),e._renderedComponent._topLevelWrapper=e,j._mountImageIntoNode(c,t,e,r,n)}function s(e,t,n,r){var i=S.ReactReconcileTransaction.getPooled(!n&&_.useCreateElement);i.perform(a,null,e,t,i,n,r),S.ReactReconcileTransaction.release(i)}function c(e,t,n){for(E.unmountComponent(e,n),t.nodeType===I&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function u(e){var t=i(e);if(t){var n=y.getInstanceFromNode(t);return!(!n||!n._hostParent)}}function l(e){return!(!e||e.nodeType!==k&&e.nodeType!==I&&e.nodeType!==D)}function h(e){var t=i(e),n=t&&y.getInstanceFromNode(t);return n&&!n._hostParent?n:null}function p(e){var t=h(e);return t?t._hostContainerInfo._topLevelWrapper:null}var d=n(3),f=n(15),m=n(16),v=n(18),g=n(29),y=(n(11),n(5)),b=n(139),_=n(141),w=n(71),x=n(25),T=(n(8),n(155)),E=n(17),M=n(45),S=n(9),R=n(22),C=n(81),A=(n(1),n(33)),L=n(51),P=(n(2),m.ID_ATTRIBUTE_NAME),O=m.ROOT_ATTRIBUTE_NAME,k=1,I=9,D=11,N={},U=1,F=function(){this.rootID=U++};F.prototype.isReactComponent={},F.prototype.render=function(){return this.props.child},F.isReactTopLevelWrapper=!0;var j={TopLevelWrapper:F,_instancesByReactRootID:N,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r,i){return j.scrollMonitor(r,function(){M.enqueueElementInternal(e,t,n),i&&M.enqueueCallbackInternal(e,i)}),e},_renderNewRootComponent:function(e,t,n,r){l(t)?void 0:d("37"),g.ensureScrollValueMonitoring();var i=C(e,!1);S.batchedUpdates(s,i,t,n,r);var o=i._instance.rootID;return N[o]=i,i},renderSubtreeIntoContainer:function(e,t,n,r){return null!=e&&x.has(e)?void 0:d("38"),j._renderSubtreeIntoContainer(e,t,n,r)},_renderSubtreeIntoContainer:function(e,t,n,r){M.validateCallback(r,"ReactDOM.render"),v.isValidElement(t)?void 0:d("39","string"==typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":"");var a,s=v.createElement(F,{child:t});if(e){var c=x.get(e);a=c._processChildContext(c._context)}else a=R;var l=p(n);if(l){var h=l._currentElement,f=h.props.child;if(L(f,t)){var m=l._renderedComponent.getPublicInstance(),g=r&&function(){r.call(m)};return j._updateRootComponent(l,s,a,n,g),m}j.unmountComponentAtNode(n)}var y=i(n),b=y&&!!o(y),_=u(n),w=b&&!l&&!_,T=j._renderNewRootComponent(s,n,w,a)._renderedComponent.getPublicInstance();return r&&r.call(T),T},render:function(e,t,n){return j._renderSubtreeIntoContainer(null,e,t,n)},unmountComponentAtNode:function(e){l(e)?void 0:d("40");var t=p(e);if(!t){u(e),1===e.nodeType&&e.hasAttribute(O);return!1}return delete N[t._instance.rootID],S.batchedUpdates(c,t,e,!1),!0},_mountImageIntoNode:function(e,t,n,o,a){if(l(t)?void 0:d("41"),o){var s=i(t);if(T.canReuseMarkup(e,s))return void y.precacheNode(n,s);var c=s.getAttribute(T.CHECKSUM_ATTR_NAME);s.removeAttribute(T.CHECKSUM_ATTR_NAME);var u=s.outerHTML;s.setAttribute(T.CHECKSUM_ATTR_NAME,c);var h=e,p=r(h,u),m=" (client) "+h.substring(p-20,p+20)+"\n (server) "+u.substring(p-20,p+20);t.nodeType===I?d("42",m):void 0}if(t.nodeType===I?d("43"):void 0,a.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);f.insertTreeBefore(t,e,null)}else A(t,e),y.precacheNode(n,t.firstChild)}};e.exports=j},function(e,t,n){"use strict";var r=n(3),i=n(18),o=(n(1),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(e){return null===e||e===!1?o.EMPTY:i.isValidElement(e)?"function"==typeof e.type?o.COMPOSITE:o.HOST:void r("26",e)}});e.exports=o},function(e,t){"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){n.currentScrollLeft=e.x,n.currentScrollTop=e.y}};e.exports=n},function(e,t,n){"use strict";function r(e,t){return null==t?i("30"):void 0,null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}var i=n(3);n(1);e.exports=r},function(e,t){"use strict";function n(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}e.exports=n},function(e,t,n){"use strict";function r(e){for(var t;(t=e._renderedNodeType)===i.COMPOSITE;)e=e._renderedComponent;return t===i.HOST?e._renderedComponent:t===i.EMPTY?null:void 0}var i=n(75);e.exports=r},function(e,t,n){"use strict";function r(){return!o&&i.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var i=n(6),o=null;e.exports=r},function(e,t,n){"use strict";function r(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function i(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function o(e,t){var n;if(null===e||e===!1)n=u.create(o);else if("object"==typeof e){var s=e;!s||"function"!=typeof s.type&&"string"!=typeof s.type?a("130",null==s.type?s.type:typeof s.type,r(s._owner)):void 0,"string"==typeof s.type?n=l.createInternalComponent(s):i(s.type)?(n=new s.type(s),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new h(s)}else"string"==typeof e||"number"==typeof e?n=l.createInstanceForText(e):a("131",typeof e);return n._mountIndex=0,n._mountImage=null,n}var a=n(3),s=n(4),c=n(136),u=n(70),l=n(72),h=(n(183),n(1),n(2),function(e){this.construct(e)});s(h.prototype,c,{_instantiateReactComponent:o}),e.exports=o},function(e,t){"use strict";function n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!r[e.type]:"textarea"===t}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=n},function(e,t,n){"use strict";var r=n(6),i=n(32),o=n(33),a=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(a=function(e,t){return 3===e.nodeType?void(e.nodeValue=t):void o(e,i(t))})),e.exports=a},function(e,t,n){"use strict";function r(e,t){return e&&"object"==typeof e&&null!=e.key?u.escape(e.key):t.toString(36)}function i(e,t,n,o){var p=typeof e;if("undefined"!==p&&"boolean"!==p||(e=null),null===e||"string"===p||"number"===p||"object"===p&&e.$$typeof===s)return n(o,e,""===t?l+r(e,0):t),1;var d,f,m=0,v=""===t?l:t+h;if(Array.isArray(e))for(var g=0;g<e.length;g++)d=e[g],f=v+r(d,g),m+=i(d,f,n,o);else{var y=c(e);if(y){var b,_=y.call(e);if(y!==e.entries)for(var w=0;!(b=_.next()).done;)d=b.value,f=v+r(d,w++),m+=i(d,f,n,o);else for(;!(b=_.next()).done;){var x=b.value;x&&(d=x[1],f=v+u.escape(x[0])+h+r(d,0),m+=i(d,f,n,o))}}else if("object"===p){var T="",E=String(e);a("31","[object Object]"===E?"object with keys {"+Object.keys(e).join(", ")+"}":E,T)}}return m}function o(e,t,n){return null==e?0:i(e,"",t,n)}var a=n(3),s=(n(11),n(151)),c=n(182),u=(n(1),n(41)),l=(n(2),"."),h=":";e.exports=o},function(e,t,n){"use strict";function r(e){var t=Function.prototype.toString,n=Object.prototype.hasOwnProperty,r=RegExp("^"+t.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var i=t.call(e);return r.test(i)}catch(e){return!1}}function i(e){var t=u(e);if(t){var n=t.childIDs;l(e),n.forEach(i)}}function o(e,t,n){return"\n    in "+(e||"Unknown")+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":n?" (created by "+n+")":"")}function a(e){return null==e?"#empty":"string"==typeof e||"number"==typeof e?"#text":"string"==typeof e.type?e.type:e.type.displayName||e.type.name||"Unknown"}function s(e){var t,n=M.getDisplayName(e),r=M.getElement(e),i=M.getOwnerID(e);return i&&(t=M.getDisplayName(i)),o(n,r&&r._source,t)}var c,u,l,h,p,d,f,m=n(20),v=n(11),g=(n(1),n(2),"function"==typeof Array.from&&"function"==typeof Map&&r(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&r(Map.prototype.keys)&&"function"==typeof Set&&r(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&r(Set.prototype.keys));if(g){var y=new Map,b=new Set;c=function(e,t){y.set(e,t)},u=function(e){return y.get(e)},l=function(e){y.delete(e)},h=function(){return Array.from(y.keys())},p=function(e){b.add(e)},d=function(e){b.delete(e)},f=function(){return Array.from(b.keys())}}else{var _={},w={},x=function(e){return"."+e},T=function(e){return parseInt(e.substr(1),10)};c=function(e,t){var n=x(e);_[n]=t},u=function(e){var t=x(e);return _[t]},l=function(e){var t=x(e);delete _[t]},h=function(){return Object.keys(_).map(T)},p=function(e){var t=x(e);w[t]=!0},d=function(e){var t=x(e);delete w[t]},f=function(){return Object.keys(w).map(T)}}var E=[],M={onSetChildren:function(e,t){var n=u(e);n?void 0:m("144"),n.childIDs=t;for(var r=0;r<t.length;r++){var i=t[r],o=u(i);o?void 0:m("140"),null==o.childIDs&&"object"==typeof o.element&&null!=o.element?m("141"):void 0,o.isMounted?void 0:m("71"),null==o.parentID&&(o.parentID=e),o.parentID!==e?m("142",i,o.parentID,e):void 0}},onBeforeMountComponent:function(e,t,n){var r={element:t,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0};c(e,r)},onBeforeUpdateComponent:function(e,t){var n=u(e);n&&n.isMounted&&(n.element=t)},onMountComponent:function(e){var t=u(e);t?void 0:m("144"),t.isMounted=!0;var n=0===t.parentID;n&&p(e)},onUpdateComponent:function(e){var t=u(e);t&&t.isMounted&&t.updateCount++},onUnmountComponent:function(e){var t=u(e);if(t){t.isMounted=!1;var n=0===t.parentID;n&&d(e)}E.push(e)},purgeUnmountedComponents:function(){if(!M._preventPurging){for(var e=0;e<E.length;e++){var t=E[e];i(t)}E.length=0}},isMounted:function(e){var t=u(e);return!!t&&t.isMounted},getCurrentStackAddendum:function(e){var t="";if(e){var n=a(e),r=e._owner;t+=o(n,e._source,r&&r.getName())}var i=v.current,s=i&&i._debugID;return t+=M.getStackAddendumByID(s)},getStackAddendumByID:function(e){for(var t="";e;)t+=s(e),e=M.getParentID(e);return t},getChildIDs:function(e){var t=u(e);return t?t.childIDs:[]},getDisplayName:function(e){var t=M.getElement(e);return t?a(t):null},getElement:function(e){var t=u(e);return t?t.element:null},getOwnerID:function(e){var t=M.getElement(e);return t&&t._owner?t._owner._debugID:null},getParentID:function(e){var t=u(e);return t?t.parentID:null},getSource:function(e){var t=u(e),n=t?t.element:null,r=null!=n?n._source:null;return r},getText:function(e){var t=M.getElement(e);return"string"==typeof t?t:"number"==typeof t?""+t:null},getUpdateCount:function(e){var t=u(e);return t?t.updateCount:0},getRootIDs:f,getRegisteredIDs:h};e.exports=M},function(e,t){"use strict";var n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=n},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";var r=!1;e.exports=r},function(e,t){"use strict";function n(e){var t=e&&(r&&e[r]||e[i]);if("function"==typeof t)return t}var r="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";e.exports=n},function(e,t){(function(t){"use strict";function n(e){s.length||(a(),c=!0),s[s.length]=e}function r(){for(;u<s.length;){var e=u;if(u+=1,s[e].call(),u>l){for(var t=0,n=s.length-u;t<n;t++)s[t]=s[t+u];s.length-=u,u=0}}s.length=0,u=0,c=!1}function i(e){var t=1,n=new p(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function o(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var a,s=[],c=!1,u=0,l=1024,h="undefined"!=typeof t?t:self,p=h.MutationObserver||h.WebKitMutationObserver;a="function"==typeof p?i(r):o(r),n.requestFlush=a,n.makeRequestCallFromTimer=o}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t,n){return s(e,t,n,"render")}function i(e,t,n){return s(e,t,n,"collision")}function o(e){var t=u.get(e);if(t)return t;var n=fetch(e).then(function(e){return e.arrayBuffer()});return u.set(e,n),n}function a(e,t,n){var r=l[e-1];if(0<=t&&t<r.length){var i=c(r[t],2),o=i[0],a=i[1];if(0<=n&&n<a){var s="",u=void 0;if(1===a)u="";else for(u=String(n);u.length<2;)u="0"+u;return s+"/maps/map_"+o+u}throw new Error("Unknown variant "+n+" of area "+t+" in episode "+e+".")}throw new Error("Unknown episode "+e+" area "+t+".")}function s(e,t,n,r){try{var i=a(e,t,n),s="render"===r?"n.rel":"c.rel";return o(i+s)}catch(e){return Promise.reject(e)}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.get_area_render_data=r,t.get_area_collision_data=i;var u=new Map,l=[[["city00_00",1],["forest01",1],["forest02",1],["cave01_",6],["cave02_",5],["cave03_",6],["machine01_",6],["machine02_",6],["ancient01_",5],["ancient02_",5],["ancient03_",5],["boss01",1],["boss02",1],["boss03",1],["darkfalz00",1]],[["labo00_00",1],["ruins01_",3],["ruins02_",3],["space01_",3],["space02_",3],["jungle01_00",1],["jungle02_00",1],["jungle03_00",1],["jungle04_",3],["jungle05_00",1],["seabed01_",3],["seabed02_",3],["boss05",1],["boss06",1],["boss07",1],["boss08",1],["jungle06_00",1],["jungle07_",5]],[],[["city02_00",1],["wilds01_00",1],["wilds01_01",1],["wilds01_02",1],["wilds01_03",1],["crater01_00",1],["desert01_",3],["desert02_",3],["desert03_",3],["boss09_00",1]]]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.NpcType=void 0;var i=n(35),o=t.NpcType=function e(t,n,o){if(r(this,e),!(0,i.is_int)(t)||t<1)throw new Error("Expected id to be an integer greater than or equal to 1, got "+t+".");if(!n)throw new Error("name is required.");if("boolean"!=typeof o)throw new Error("enemy is required.");this.id=t,this.name=n,this.enemy=o};!function(){var e=1;o.Unknown=new o(e++,"Unknown",!1),o.FemaleFat=new o(e++,"Female Fat",!1),o.FemaleMacho=new o(e++,"Female Macho",!1),o.FemaleTall=new o(e++,"Female Tall",!1),o.MaleDwarf=new o(e++,"Male Dwarf",!1),o.MaleFat=new o(e++,"Male Fat",!1),o.MaleMacho=new o(e++,"Male Macho",!1),o.MaleOld=new o(e++,"Male Old",!1),o.BlueSoldier=new o(e++,"Blue Soldier",!1),o.RedSoldier=new o(e++,"Red Soldier",!1),o.Principal=new o(e++,"Principal",!1),o.Tekker=new o(e++,"Tekker",!1),o.GuildLady=new o(e++,"Guild Lady",!1),o.Scientist=new o(e++,"Scientist",!1),o.Nurse=new o(e++,"Nurse",!1),o.Irene=new o(e++,"Irene",!1),o.Hildebear=new o(e++,"Hildebear",!0),o.Hildeblue=new o(e++,"Hildeblue",!0),o.RagRappy=new o(e++,"Rag Rappy",!0),o.AlRappy=new o(e++,"Al Rappy",!0),o.Monest=new o(e++,"Monest",!0),o.SavageWolf=new o(e++,"Savage Wolf",!0),o.BarbarousWolf=new o(e++,"Barbarous Wolf",!0),o.Booma=new o(e++,"Booma",!0),o.Gobooma=new o(e++,"Gobooma",!0),o.Gigobooma=new o(e++,"Gigobooma",!0),o.Dragon=new o(e++,"Dragon",!0),o.GrassAssassin=new o(e++,"Grass Assassin",!0),o.PoisonLily=new o(e++,"Poison Lily",!0),o.NarLily=new o(e++,"Nar Lily",!0),o.NanoDragon=new o(e++,"Nano Dragon",!0),o.EvilShark=new o(e++,"Evil Shark",!0),o.PalShark=new o(e++,"Pal Shark",!0),o.GuilShark=new o(e++,"Guil Shark",!0),o.PofuillySlime=new o(e++,"Pofuilly Slime",!0),o.PouillySlime=new o(e++,"Pouilly Slime",!0),o.PanArms=new o(e++,"Pan Arms",!0),o.DeRolLe=new o(e++,"De Rol Le",!0),o.Dubchic=new o(e++,"Dubchic",!0),o.Gilchic=new o(e++,"Gilchic",!0),o.Garanz=new o(e++,"Garanz",!0),o.SinowBeat=new o(e++,"Sinow Beat",!0),o.SinowGold=new o(e++,"Sinow Gold",!0),o.Canadine=new o(e++,"Canadine",!0),o.Canane=new o(e++,"Canane",!0),o.Dubswitch=new o(e++,"Dubswitch",!0),o.VolOpt=new o(e++,"Vol Opt",!0),o.Delsaber=new o(e++,"Delsaber",!0),o.ChaosSorcerer=new o(e++,"Chaos Sorcerer",!0),o.DarkGunner=new o(e++,"Dark Gunner",!0),o.ChaosBringer=new o(e++,"Chaos Bringer",!0),o.DarkBelra=new o(e++,"Dark Belra",!0),o.Dimenian=new o(e++,"Dimenian",!0),o.LaDimenian=new o(e++,"La Dimenian",!0),o.SoDimenian=new o(e++,"So Dimenian",!0),o.Bulclaw=new o(e++,"Bulclaw",!0),o.Claw=new o(e++,"Claw",!0),o.DarkFalz=new o(e++,"Dark Falz",!0),o.Hildebear2=new o(e++,"Hildebear (Ep. II)",!0),o.Hildeblue2=new o(e++,"Hildeblue (Ep. II)",!0),o.RagRappy2=new o(e++,"Rag Rappy (Ep. II)",!0),o.LoveRappy=new o(e++,"Love Rappy",!0),o.Monest2=new o(e++,"Monest (Ep. II)",!0),o.PoisonLily2=new o(e++,"Poison Lily (Ep. II)",!0),o.NarLily2=new o(e++,"Nar Lily (Ep. II)",!0),o.GrassAssassin2=new o(e++,"Grass Assassin (Ep. II)",!0),o.Dimenian2=new o(e++,"Dimenian (Ep. II)",!0),o.LaDimenian2=new o(e++,"La Dimenian (Ep. II)",!0),o.SoDimenian2=new o(e++,"So Dimenian (Ep. II)",!0),o.DarkBelra2=new o(e++,"Dark Belra (Ep. II)",!0),o.BarbaRay=new o(e++,"Barba Ray",!0),o.SavageWolf2=new o(e++,"Savage Wolf (Ep. II)",!0),o.BarbarousWolf2=new o(e++,"Barbarous Wolf (Ep. II)",!0),o.PanArms2=new o(e++,"Pan Arms (Ep. II)",!0),o.Dubchic2=new o(e++,"Dubchic (Ep. II)",!0),o.Gilchic2=new o(e++,"Gilchic (Ep. II)",!0),o.Garanz2=new o(e++,"Garanz (Ep. II)",!0),o.Dubswitch2=new o(e++,"Dubswitch (Ep. II)",!0),o.Delsaber2=new o(e++,"Delsaber (Ep. II)",!0),o.ChaosSorcerer2=new o(e++,"Chaos Sorcerer (Ep. II)",!0),o.GolDragon=new o(e++,"Gol Dragon",!0),o.SinowBerill=new o(e++,"Sinow Berill",!0),o.SinowSpigell=new o(e++,"Sinow Spigell",!0),o.Merillia=new o(e++,"Merillia",!0),o.Meriltas=new o(e++,"Meriltas",!0),o.Mericarol=new o(e++,"Mericarol",!0),o.Merikle=new o(e++,"Merikle",!0),o.Mericus=new o(e++,"Mericus",!0),o.UlGibbon=new o(e++,"Ul Gibbon",!0),o.ZolGibbon=new o(e++,"Zol Gibbon",!0),o.Gibbles=new o(e++,"Gibbles",!0),o.Gee=new o(e++,"Gee",!0),o.GiGue=new o(e++,"Gi Gue",!0),o.GalGryphon=new o(e++,"Gal Gryphon",!0),o.Deldepth=new o(e++,"Deldepth",!0),o.Delbiter=new o(e++,"Delbiter",!0),o.Dolmolm=new o(e++,"Dolmolm",!0),o.Dolmdarl=new o(e++,"Dolmdarl",!0),o.Morfos=new o(e++,"Morfos",!0),o.Recobox=new o(e++,"Recobox",!0),o.Epsilon=new o(e++,"Epsilon",!0),o.SinowZoa=new o(e++,"Sinow Zoa",!0),o.SinowZele=new o(e++,"Sinow Zele",!0),o.IllGill=new o(e++,"Ill Gill",!0),o.DelLily=new o(e++,"Del Lily",!0),o.OlgaFlow=new o(e++,"Olga Flow",!0),o.SandRappy=new o(e++,"Sand Rappy",!0),o.DelRappy=new o(e++,"Del Rappy",!0),o.Astark=new o(e++,"Astark",!0),o.SatelliteLizard=new o(e++,"Satellite Lizard",!0),o.Yowie=new o(e++,"Yowie",!0),o.MerissaA=new o(e++,"Merissa A",!0),o.MerissaAA=new o(e++,"Merissa AA",!0),o.Girtablulu=new o(e++,"Girtablulu",!0),o.Zu=new o(e++,"Zu",!0),o.Pazuzu=new o(e++,"Pazuzu",!0),o.Boota=new o(e++,"Boota",!0),o.ZeBoota=new o(e++,"Ze Boota",!0),o.BaBoota=new o(e++,"Ba Boota",!0),o.Dorphon=new o(e++,"Dorphon",!0),o.DorphonEclair=new o(e++,"Dorphon Eclair",!0),o.Goran=new o(e++,"Goran",!0),o.PyroGoran=new o(e++,"Pyro Goran",!0),o.GoranDetonator=new o(e++,"Goran Detonator",!0),o.SaintMillion=new o(e++,"Saint-Million",!0),o.Shambertin=new o(e++,"Shambertin",!0),o.Kondrieu=new o(e++,"Kondrieu",!0)}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectType=void 0;var i=n(35),o=t.ObjectType=function e(t,n){if(r(this,e),!(0,i.is_int)(t)||t<1)throw new Error("Expected id to be an integer greater than or equal to 1, got "+t+".");if(!n)throw new Error("name is required.");this.id=t,this.name=n};!function(){var e=1;o.Unknown=new o(e++,"Unknown"),o.PlayerSet=new o(e++,"Player Set"),
o.Particle=new o(e++,"Particle"),o.Teleporter=new o(e++,"Teleporter"),o.Warp=new o(e++,"Warp"),o.LightCollision=new o(e++,"Light Collision"),o.Item=new o(e++,"Item"),o.EnvSound=new o(e++,"Env Sound"),o.FogCollision=new o(e++,"Fog Collision"),o.EventCollision=new o(e++,"Event Collision"),o.CharaCollision=new o(e++,"Chara Collision"),o.ElementalTrap=new o(e++,"Elemental Trap"),o.StatusTrap=new o(e++,"Status Trap"),o.HealTrap=new o(e++,"Heal Trap"),o.LargeElementalTrap=new o(e++,"Large Elemental Trap"),o.ObjRoomID=new o(e++,"Obj Room ID"),o.Sensor=new o(e++,"Sensor"),o.UnknownItem16=new o(e++,"Unknown Item (16)"),o.Lensflare=new o(e++,"Lensflare"),o.ScriptCollision=new o(e++,"Script Collision"),o.HealRing=new o(e++,"Heal Ring"),o.MapCollision=new o(e++,"Map Collision"),o.ScriptCollisionA=new o(e++,"Script Collision A"),o.ItemLight=new o(e++,"Item Light"),o.RadarCollision=new o(e++,"Radar Collision"),o.FogCollisionSW=new o(e++,"Fog Collision SW"),o.BossTeleporter=new o(e++,"Boss Teleporter"),o.ImageBoard=new o(e++,"Image Board"),o.QuestWarp=new o(e++,"Quest Warp"),o.Epilogue=new o(e++,"Epilogue"),o.UnknownItem29=new o(e++,"Unknown Item (29)"),o.UnknownItem30=new o(e++,"Unknown Item (30)"),o.UnknownItem31=new o(e++,"Unknown Item (31)"),o.BoxDetectObject=new o(e++,"Box Detect Object"),o.SymbolChatObject=new o(e++,"Symbol Chat Object"),o.TouchPlateObject=new o(e++,"Touch plate Object"),o.TargetableObject=new o(e++,"Targetable Object"),o.EffectObject=new o(e++,"Effect object"),o.CountDownObject=new o(e++,"Count Down Object"),o.UnknownItem38=new o(e++,"Unknown Item (38)"),o.UnknownItem39=new o(e++,"Unknown Item (39)"),o.UnknownItem40=new o(e++,"Unknown Item (40)"),o.UnknownItem41=new o(e++,"Unknown Item (41)"),o.MenuActivation=new o(e++,"Menu activation"),o.TelepipeLocation=new o(e++,"Telepipe Location"),o.BGMCollision=new o(e++,"BGM Collision"),o.MainRagolTeleporter=new o(e++,"Main Ragol Teleporter"),o.LobbyTeleporter=new o(e++,"Lobby Teleporter"),o.PrincipalWarp=new o(e++,"Principal warp"),o.ShopDoor=new o(e++,"Shop Door"),o.HuntersGuildDoor=new o(e++,"Hunter's Guild Door"),o.TeleporterDoor=new o(e++,"Teleporter Door"),o.MedicalCenterDoor=new o(e++,"Medical Center Door"),o.Elevator=new o(e++,"Elevator"),o.EasterEgg=new o(e++,"Easter Egg"),o.ValentinesHeart=new o(e++,"Valentines Heart"),o.ChristmasTree=new o(e++,"Christmas Tree"),o.ChristmasWreath=new o(e++,"Christmas Wreath"),o.HalloweenPumpkin=new o(e++,"Halloween Pumpkin"),o.TwentyFirstCentury=new o(e++,"21st Century"),o.Sonic=new o(e++,"Sonic"),o.WelcomeBoard=new o(e++,"Welcome Board"),o.Firework=new o(e++,"Firework"),o.LobbyScreenDoor=new o(e++,"Lobby Screen Door"),o.MainRagolTeleporterBattleInNextArea=new o(e++,"Main Ragol Teleporter (Battle in next area?)"),o.LabTeleporterDoor=new o(e++,"Lab Teleporter Door"),o.Pioneer2InvisibleTouchplate=new o(e++,"Pioneer 2 Invisible Touchplate"),o.ForestDoor=new o(e++,"Forest Door"),o.ForestSwitch=new o(e++,"Forest Switch"),o.LaserFence=new o(e++,"Laser Fence"),o.LaserSquareFence=new o(e++,"Laser Square Fence"),o.ForestLaserFenceSwitch=new o(e++,"Forest Laser Fence Switch"),o.LightRays=new o(e++,"Light rays"),o.BlueButterfly=new o(e++,"Blue Butterfly"),o.Probe=new o(e++,"Probe"),o.RandomTypeBox1=new o(e++,"Random Type Box 1"),o.ForestWeatherStation=new o(e++,"Forest Weather Station"),o.Battery=new o(e++,"Battery"),o.ForestConsole=new o(e++,"Forest Console"),o.BlackSlidingDoor=new o(e++,"Black Sliding Door"),o.RicoMessagePod=new o(e++,"Rico Message Pod"),o.EnergyBarrier=new o(e++,"Energy Barrier"),o.ForestRisingBridge=new o(e++,"Forest Rising Bridge"),o.SwitchNoneDoor=new o(e++,"Switch (none door)"),o.EnemyBoxGrey=new o(e++,"Enemy Box (Grey)"),o.FixedTypeBox=new o(e++,"Fixed Type Box"),o.EnemyBoxBrown=new o(e++,"Enemy Box (Brown)"),o.EmptyTypeBox=new o(e++,"Empty Type Box"),o.LaserFenseEx=new o(e++,"Laser Fense Ex"),o.LaserSquareFenceEx=new o(e++,"Laser Square Fence Ex"),o.FloorPanel1=new o(e++,"Floor Panel 1"),o.Caves4ButtonDoor=new o(e++,"Caves 4 Button door"),o.CavesNormalDoor=new o(e++,"Caves Normal door"),o.CavesSmashingPillar=new o(e++,"Caves Smashing Pillar"),o.CavesSign1=new o(e++,"Caves Sign 1"),o.CavesSign2=new o(e++,"Caves Sign 2"),o.CavesSign3=new o(e++,"Caves Sign 3"),o.HexagalTank=new o(e++,"Hexagal Tank"),o.BrownPlatform=new o(e++,"Brown Platform"),o.WarningLightObject=new o(e++,"Warning Light Object"),o.Rainbow=new o(e++,"Rainbow"),o.FloatingJelifish=new o(e++,"Floating Jelifish"),o.FloatingDragonfly=new o(e++,"Floating Dragonfly"),o.CavesSwitchDoor=new o(e++,"Caves Switch Door"),o.RobotRechargeStation=new o(e++,"Robot Recharge Station"),o.CavesCakeShop=new o(e++,"Caves Cake Shop"),o.Caves1SmallRedRock=new o(e++,"Caves 1 Small Red Rock"),o.Caves1MediumRedRock=new o(e++,"Caves 1 Medium Red Rock"),o.Caves1LargeRedRock=new o(e++,"Caves 1 Large Red Rock"),o.Caves2SmallRock1=new o(e++,"Caves 2 Small Rock 1"),o.Caves2MediumRock1=new o(e++,"Caves 2 Medium Rock 1"),o.Caves2LargeRock1=new o(e++,"Caves 2 Large Rock 1"),o.Caves2SmallRock2=new o(e++,"Caves 2 Small Rock 2"),o.Caves2MediumRock2=new o(e++,"Caves 2 Medium Rock 2"),o.Caves2LargeRock2=new o(e++,"Caves 2 Large Rock 2"),o.Caves3SmallRock=new o(e++,"Caves 3 Small Rock"),o.Caves3MediumRock=new o(e++,"Caves 3 Medium Rock"),o.Caves3LargeRock=new o(e++,"Caves 3 Large Rock"),o.FloorPanel2=new o(e++,"Floor Panel 2"),o.DestructableRockCaves1=new o(e++,"Destructable Rock (Caves 1)"),o.DestructableRockCaves2=new o(e++,"Destructable Rock (Caves 2)"),o.DestructableRockCaves3=new o(e++,"Destructable Rock (Caves 3)"),o.MinesDoor=new o(e++,"Mines Door"),o.FloorPanel3=new o(e++,"Floor Panel 3"),o.MinesSwitchDoor=new o(e++,"Mines Switch Door"),o.LargeCryoTube=new o(e++,"Large Cryo-Tube"),o.ComputerLikeCalus=new o(e++,"Computer (like calus)"),o.GreenScreenOpeningAndClosing=new o(e++,"Green Screen opening and closing"),o.FloatingRobot=new o(e++,"Floating Robot"),o.FloatingBlueLight=new o(e++,"Floating Blue Light"),o.SelfDestructingObject1=new o(e++,"Self Destructing Object 1"),o.SelfDestructingObject2=new o(e++,"Self Destructing Object 2"),o.SelfDestructingObject3=new o(e++,"Self Destructing Object 3"),o.SparkMachine=new o(e++,"Spark Machine"),o.MinesLargeFlashingCrate=new o(e++,"Mines Large Flashing Crate"),o.RuinsSeal=new o(e++,"Ruins Seal"),o.RuinsTeleporter=new o(e++,"Ruins Teleporter"),o.RuinsWarpSiteToSite=new o(e++,"Ruins Warp (Site to site)"),o.RuinsSwitch=new o(e++,"Ruins Switch"),o.FloorPanel4=new o(e++,"Floor Panel 4"),o.Ruins1Door=new o(e++,"Ruins 1 Door"),o.Ruins3Door=new o(e++,"Ruins 3 Door"),o.Ruins2Door=new o(e++,"Ruins 2 Door"),o.Ruins11ButtonDoor=new o(e++,"Ruins 1-1 Button Door"),o.Ruins21ButtonDoor=new o(e++,"Ruins 2-1 Button Door"),o.Ruins31ButtonDoor=new o(e++,"Ruins 3-1 Button Door"),o.Ruins4ButtonDoor=new o(e++,"Ruins 4-Button Door"),o.Ruins2ButtonDoor=new o(e++,"Ruins 2-Button Door"),o.RuinsSensor=new o(e++,"Ruins Sensor"),o.RuinsFenceSwitch=new o(e++,"Ruins Fence Switch"),o.RuinsLaserFence4x2=new o(e++,"Ruins Laser Fence 4x2"),o.RuinsLaserFence6x2=new o(e++,"Ruins Laser Fence 6x2"),o.RuinsLaserFence4x4=new o(e++,"Ruins Laser Fence 4x4"),o.RuinsLaserFence6x4=new o(e++,"Ruins Laser Fence 6x4"),o.RuinsPoisonBlob=new o(e++,"Ruins poison Blob"),o.RuinsPilarTrap=new o(e++,"Ruins Pilar Trap"),o.PopupTrapNoTech=new o(e++,"Popup Trap (No Tech)"),o.RuinsCrystal=new o(e++,"Ruins Crystal"),o.Monument=new o(e++,"Monument"),o.RuinsRock1=new o(e++,"Ruins Rock 1"),o.RuinsRock2=new o(e++,"Ruins Rock 2"),o.RuinsRock3=new o(e++,"Ruins Rock 3"),o.RuinsRock4=new o(e++,"Ruins Rock 4"),o.RuinsRock5=new o(e++,"Ruins Rock 5"),o.RuinsRock6=new o(e++,"Ruins Rock 6"),o.RuinsRock7=new o(e++,"Ruins Rock 7"),o.Poison=new o(e++,"Poison"),o.FixedBoxTypeRuins=new o(e++,"Fixed Box Type (Ruins)"),o.RandomBoxTypeRuins=new o(e++,"Random Box Type (Ruins)"),o.EnemyTypeBoxYellow=new o(e++,"Enemy Type Box (Yellow)"),o.EnemyTypeBoxBlue=new o(e++,"Enemy Type Box (Blue)"),o.EmptyTypeBoxBlue=new o(e++,"Empty Type Box (Blue)"),o.DestructableRock=new o(e++,"Destructable Rock"),o.PopupTrapsTechs=new o(e++,"Popup Traps (techs)"),o.FlyingWhiteBird=new o(e++,"Flying White Bird"),o.Tower=new o(e++,"Tower"),o.FloatingRocks=new o(e++,"Floating Rocks"),o.FloatingSoul=new o(e++,"Floating Soul"),o.Butterfly=new o(e++,"Butterfly"),o.LobbyGameMenu=new o(e++,"Lobby Game menu"),o.LobbyWarpObject=new o(e++,"Lobby Warp Object"),o.Lobby1EventObjectDefaultTree=new o(e++,"Lobby 1 Event Object (Default Tree)"),o.UnknownItem387=new o(e++,"Unknown Item (387)"),o.UnknownItem388=new o(e++,"Unknown Item (388)"),o.UnknownItem389=new o(e++,"Unknown Item (389)"),o.LobbyEventObjectStaticPumpkin=new o(e++,"Lobby Event Object (Static Pumpkin)"),o.LobbyEventObject3ChristmasWindows=new o(e++,"Lobby Event Object (3 Christmas Windows)"),o.LobbyEventObjectRedAndWhiteCurtain=new o(e++,"Lobby Event Object (Red and White Curtain)"),o.UnknownItem393=new o(e++,"Unknown Item (393)"),o.UnknownItem394=new o(e++,"Unknown Item (394)"),o.LobbyFishTank=new o(e++,"Lobby Fish Tank"),o.LobbyEventObjectButterflies=new o(e++,"Lobby Event Object (Butterflies)"),o.UnknownItem400=new o(e++,"Unknown Item (400)"),o.GreyWallLow=new o(e++,"grey wall low"),o.SpaceshipDoor=new o(e++,"Spaceship Door"),o.GreyWallHigh=new o(e++,"grey wall high"),o.TempleNormalDoor=new o(e++,"Temple Normal Door"),o.BreakableWallWallButUnbreakable=new o(e++,'"breakable wall wall, but unbreakable"'),o.BrokenCilinderAndRubble=new o(e++,"Broken cilinder and rubble"),o.ThreeBrokenWallPiecesOnFloor=new o(e++,"3 broken wall pieces on floor");o.HighBrickCilinder=new o(e++,"high brick cilinder");o.LyingCilinder=new o(e++,"lying cilinder"),o.BrickConeWithFlatTop=new o(e++,"brick cone with flat top"),o.BreakableTempleWall=new o(e++,"breakable temple wall"),o.TempleMapDetect=new o(e++,"Temple Map Detect"),o.SmallBrownBrickRisingBridge=new o(e++,"small brown brick rising bridge"),o.LongRisingBridgeWithPinkHighEdges=new o(e++,"long rising bridge (with pink high edges)"),o.FourSwitchTempleDoor=new o(e++,"4 switch temple door"),o.FourButtonSpaceshipDoor=new o(e++,"4 button spaceship door"),o.ItemBoxCca=new o(e++,"item box cca"),o.TeleporterEp2=new o(e++,"Teleporter (Ep 2)"),o.CCADoor=new o(e++,"CCA Door"),o.SpecialBoxCCA=new o(e++,"Special Box CCA"),o.BigCCADoor=new o(e++,"Big CCA Door"),o.BigCCADoorSwitch=new o(e++,"Big CCA Door Switch"),o.LittleRock=new o(e++,"Little Rock"),o.Little3StoneWall=new o(e++,"Little 3 Stone Wall"),o.Medium3StoneWall=new o(e++,"Medium 3 stone wall"),o.SpiderPlant=new o(e++,"Spider Plant"),o.CCAAreaTeleporter=new o(e++,"CCA Area Teleporter"),o.UnknownItem523=new o(e++,"Unknown Item (523)"),o.WhiteBird=new o(e++,"White Bird"),o.OrangeBird=new o(e++,"Orange Bird"),o.Saw=new o(e++,"Saw"),o.LaserDetect=new o(e++,"Laser Detect"),o.UnknownItem529=new o(e++,"Unknown Item (529)"),o.UnknownItem530=new o(e++,"Unknown Item (530)"),o.Seagull=new o(e++,"Seagull"),o.Fish=new o(e++,"Fish"),o.SeabedDoorWithBlueEdges=new o(e++,"Seabed Door (with blue edges)"),o.SeabedDoorAlwaysOpenNonTriggerable=new o(e++,"Seabed door (always open, non-triggerable)"),o.LittleCryotube=new o(e++,"Little Cryotube"),o.WideGlassWallBreakable=new o(e++,"Wide Glass Wall (breakable)"),o.BlueFloatingRobot=new o(e++,"Blue floating robot"),o.RedFloatingRobot=new o(e++,"Red floating robot"),o.Dolphin=new o(e++,"Dolphin"),o.CaptureTrap=new o(e++,"Capture Trap"),o.VRLink=new o(e++,"VR link"),o.UnknownItem576=new o(e++,"Unknown Item (576)"),o.WarpInBarbaRayRoom=new o(e++,"Warp in Barba Ray Room"),o.UnknownItem672=new o(e++,"Unknown Item (672)"),o.GeeNest=new o(e++,"Gee Nest"),o.LabComputerConsole=new o(e++,"Lab Computer Console"),o.LabComputerConsoleGreenScreen=new o(e++,"Lab Computer Console (Green Screen)"),o.ChairYelllowPillow=new o(e++,"Chair, Yelllow Pillow"),o.OrangeWallWithHoleInMiddle=new o(e++,"orange wall with hole in middle"),o.GreyWallWithHoleInMiddle=new o(e++,"grey wall with hole in middle"),o.LongTable=new o(e++,"long table"),o.GBAStation=new o(e++,"GBA Station"),o.TalkLinkToSupport=new o(e++,"Talk (link to support)"),o.InstaWarp=new o(e++,"insta-warp"),o.LabInvisibleObject=new o(e++,"Lab Invisible Object"),o.LabGlassWindowDoor=new o(e++,"Lab Glass window Door"),o.UnknownItem700=new o(e++,"Unknown Item (700)"),o.LabCelingWarp=new o(e++,"Lab Celing Warp"),o.Ep4LightSource=new o(e++,"Ep4 Light Source"),o.Cacti=new o(e++,"cacti"),o.BigBrownRock=new o(e++,"Big Brown Rock"),o.BreakableBrownRock=new o(e++,"Breakable Brown Rock"),o.UnknownItem832=new o(e++,"Unknown Item (832)"),o.UnknownItem833=new o(e++,"Unknown Item (833)"),o.PoisonPlant=new o(e++,"Poison Plant"),o.UnknownItem897=new o(e++,"Unknown Item (897)"),o.UnknownItem898=new o(e++,"Unknown Item (898)"),o.OozingDesertPlant=new o(e++,"Oozing Desert Plant"),o.UnknownItem901=new o(e++,"Unknown Item (901)"),o.BigBlackRocks=new o(e++,"big black rocks"),o.UnknownItem903=new o(e++,"Unknown Item (903)"),o.UnknownItem904=new o(e++,"Unknown Item (904)"),o.UnknownItem905=new o(e++,"Unknown Item (905)"),o.UnknownItem906=new o(e++,"Unknown Item (906)"),o.FallingRock=new o(e++,"Falling Rock"),o.DesertPlantHasCollision=new o(e++,"Desert Plant (has collision)"),o.DesertFixedTypeBoxBreakableCrystals=new o(e++,"Desert Fixed Type Box (Breakable Crystals)"),o.UnknownItem910=new o(e++,"Unknown Item (910)"),o.BeeHive=new o(e++,"Bee Hive"),o.UnknownItem912=new o(e++,"Unknown Item (912)"),o.Heat=new o(e++,"Heat"),o.TopOfSaintMillionEgg=new o(e++,"Top of saint million egg"),o.UnknownItem961=new o(e++,"Unknown Item (961)")}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(64),s=r(a),c=n(102);s.default.render(o.default.createElement(c.ApplicationComponent,null),document.getElementById("phantq-root"))},function(e,t,n){"use strict";function r(e){var t=e.u32(),n=e.u32(),r=e.u32();e.seek(12);var o=e.string_utf_16(64,!0,!0),a=e.string_utf_16(256,!0,!0),s=e.string_utf_16(512,!0,!0),c=Math.floor((r-n)/4);e.seek_start(n);for(var u=[],l=0;l<c;++l)u.push(e.i32());var h=i(e.seek_start(t).take(n-t));return{quest_name:o,short_description:a,long_description:s,function_offsets:u,instructions:h}}function i(e){for(var t=[];e.bytes_left;){var n=e.u8(),r=void 0,i=void 0,l=void 0;switch(n){case 248:r=e.u8(),i=2,l=c;break;case 249:r=e.u8(),i=2,l=u;break;default:r=n,i=1,l=s}var h=a(l[r],3),p=(h[0],h[1]),d=h[2],f=o(e,d);if(!f){console.error("Parameters unknown for opcode 0x"+r.toString(16).toUpperCase()+".");break}t.push({opcode:r,mnemonic:p,args:f.args,size:i+f.size})}return t}function o(e,t){if(null===t)return null;var n=e.position,r=[],i=0;e:for(var o=0;o<t.length;++o)switch(t.charAt(o)){case"p":break;case"a":break e;case"B":r.push(e.u8()),i+=1;break;case"W":r.push(e.u16()),i+=2;break;case"L":r.push(e.u32()),i+=4;break;case"I":r.push(e.i32()),i+=4;break;case"f":case"F":r.push(e.f32()),i+=4;break;case"R":case"r":i+=1;break;case"b":r.push(e.u8()),i+=1;break;case"w":r.push(e.u16()),i+=2;break;case"l":r.push(e.u32()),i+=4;break;case"i":r.push(e.i32()),i+=4;break;case"j":case"J":i+=1+2*e.seek(i).u8();break;case"t":case"T":i+=1+e.seek(i).u8();break;case"s":case"S":for(;e.u16();)i+=2;i+=2;break;default:console.warn("Unknown mask part "+t.charAt(o)+".")}return e.seek_start(n+i),{args:r,size:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.parse_bin=r;var s=(n(14),[[0,"nop",""],[1,"ret",""],[2,"sync",""],[3,"exit","aL"],[4,"thread","W"],[5,"va_start",""],[6,"va_end",""],[7,"va_call","W"],[8,"let","RR"],[9,"leti","RI"],[10,"unknown",null],[11,"unknown",null],[12,"unknown",null],[13,"unknown",null],[14,"unknown",null],[15,"unknown",null],[16,"set","R"],[17,"clear","R"],[18,"rev","R"],[19,"gset","w"],[20,"gclear","w"],[21,"grev","w"],[22,"glet","w"],[23,"gget","wR"],[24,"add","RR"],[25,"addi","RI"],[26,"sub","RR"],[27,"subi","RI"],[28,"mul","RR"],[29,"muli","RI"],[30,"div","RR"],[31,"divi","RI"],[32,"and","RR"],[33,"andi","RI"],[34,"or","RR"],[35,"ori","RI"],[36,"xor","RR"],[37,"xori","RI"],[38,"mod","RR"],[39,"modi","RI"],[40,"jmp","W"],[41,"call","W"],[42,"jmp_on","Wt"],[43,"jmp_off","Wt"],[44,"jmp_=","RRW"],[45,"jmpi_=","RIW"],[46,"jmp_!=","RRW"],[47,"jmpi_!=","RIW"],[48,"ujmp_>","RRW"],[49,"ujmpi_>","RLW"],[50,"jmp_>","RRW"],[51,"jmpi_>","RIW"],[52,"ujmp_<","RRW"],[53,"ujmpi_<","RLW"],[54,"jmp_<","RRW"],[55,"jmpi_<","RIW"],[56,"ujmp_>=","RRW"],[57,"ujmpi_>=","RLW"],[58,"jmp_>=","RRW"],[59,"jmpi_>=","RIW"],[60,"ujmp_<=","RRW"],[61,"ujmpi_<=","RLW"],[62,"jmp_<=","RRW"],[63,"jmpi_<=","RIW"],[64,"switch_jmp","Rj"],[65,"switch_call","Rj"],[66,"stack_push","R"],[67,"stack_pop","R"],[68,"stack_pushm","RL"],[69,"stack_popm","RL"],[70,"unknown",null],[71,"unknown",null],[72,"arg_pushr","pR"],[73,"arg_pushl","pI"],[74,"arg_pushb","pB"],[75,"arg_pushw","pW"],[76,"unknown",null],[77,"unknown",null],[78,"arg_pushs","ps"],[79,"unknown4F","RR"],[80,"message","aLs"],[81,"list","aRs"],[82,"fadein",""],[83,"fadeout",""],[84,"se","aL"],[85,"bgm","aL"],[86,"unknown",null],[87,"unknown",null],[88,"enable","aL"],[89,"disable","aL"],[90,"window_msg","as"],[91,"add_msg","as"],[92,"mesend",""],[93,"gettime","R"],[94,"winend",""],[95,"unknown",null],[96,"npc_crt_V3","R"],[97,"npc_stop","aR"],[98,"npc_play","aL"],[99,"npc_kill","aR"],[100,"npc_nont",""],[101,"npc_talk",""],[102,"npc_crp_V3","R"],[103,"unknown",null],[104,"create_pipe","aL"],[105,"p_hpstat_V3","aRL"],[106,"p_dead_V3","aRL"],[107,"p_disablewarp",""],[108,"p_enablewarp",""],[109,"p_move_V3","R"],[110,"p_look","aL"],[111,"unknown",null],[112,"p_action_disable",""],[113,"p_action_enable",""],[114,"disable_movement1","aR"],[115,"enable_movement1","aR"],[116,"p_noncol",""],[117,"p_col",""],[118,"p_setpos","aRR"],[119,"p_return_guild",""],[120,"p_talk_guild","aL"],[121,"npc_talk_pl_V3","R"],[122,"npc_talk_kill","aL"],[123,"npc_crtpk_V3","R"],[124,"npc_crppk_V3","R"],[125,"npc_crptalk_v3","R"],[126,"p_look_at_V1","aLL"],[127,"npc_crp_id_V3","R"],[128,"cam_quake",""],[129,"cam_adj",""],[130,"cam_zmin",""],[131,"cam_zmout",""],[132,"cam_pan_V3","R"],[133,"game_lev_super",""],[134,"game_lev_reset",""],[135,"pos_pipe_V3","R"],[136,"if_zone_clear","RR"],[137,"chk_ene_num","R"],[138,"unhide_obj","R"],[139,"unhide_ene","R"],[140,"at_coords_call","R"],[141,"at_coords_talk","R"],[142,"col_npcin","R"],[143,"col_npcinr","R"],[144,"switch_on","aL"],[145,"switch_off","aL"],[146,"playbgm_epi","aL"],[147,"set_mainwarp","aL"],[148,"set_obj_param","RR"],[149,"set_floor_handler","aLW"],[150,"clr_floor_handler","aL"],[151,"col_plinaw","R"],[152,"hud_hide",""],[153,"hud_show",""],[154,"cine_enable",""],[155,"cine_disable",""],[156,"unknown",null],[157,"unknown",null],[158,"unknown",null],[159,"unknown",null],[160,"unknown",null],[161,"set_qt_failure","W"],[162,"set_qt_success","W"],[163,"clr_qt_failure",""],[164,"clr_qt_success",""],[165,"set_qt_cancel","W"],[166,"clr_qt_cancel",""],[167,"unknown",null],[168,"pl_walk_V3","R"],[169,"unknown",null],[170,"unknown",null],[171,"unknown",null],[172,"unknown",null],[173,"unknown",null],[174,"unknown",null],[175,"unknown",null],[176,"pl_add_meseta","aLL"],[177,"thread_stg","W"],[178,"del_obj_param","R"],[179,"item_create","RR"],[180,"item_create2","RR"],[181,"item_delete","RR"],[182,"item_delete2","RR"],[183,"item_check","RR"],[184,"setevt","aL"],[185,"get_difflvl","R"],[186,"set_qt_exit","W"],[187,"clr_qt_exit",""],[188,"unknown",null],[189,"unknown",null],[190,"unknown",null],[191,"unknown",null],[192,"particle_V3","R"],[193,"npc_text","aLs"],[194,"npc_chkwarp",""],[195,"pl_pkoff",""],[196,"map_designate","R"],[197,"masterkey_on",""],[198,"masterkey_off",""],[199,"window_time",""],[200,"winend_time",""],[201,"winset_time","R"],[202,"getmtime","R"],[203,"set_quest_board_handler","aLWs"],[204,"clear_quest_board_handler","aL"],[205,"particle_id_V3","R"],[206,"npc_crptalk_id_V3","R"],[207,"npc_lang_clean",""],[208,"pl_pkon",""],[209,"pl_chk_item2","RR"],[210,"enable_mainmenu",""],[211,"disable_mainmenu",""],[212,"start_battlebgm",""],[213,"end_battlebgm",""],[214,"disp_msg_qb","as"],[215,"close_msg_qb",""],[216,"set_eventflag_v3","aLL"],[217,"sync_leti",null],[218,"set_returnhunter",""],[219,"set_returncity",""],[220,"load_pvr",""],[221,"load_midi",""],[222,"unknown",null],[223,"npc_param_V3","aRL"],[224,"pad_dragon",""],[225,"clear_mainwarp","aL"],[226,"pcam_param_V3","R"],[227,"start_setevt_v3","aRL"],[228,"warp_on",""],[229,"warp_off",""],[230,"get_slotnumber","R"],[231,"get_servernumber","R"],[232,"set_eventflag2","aLR"],[233,"res","RR"],[234,"unknownEA","RL"],[235,"enable_bgmctrl","aL"],[236,"sw_send","R"],[237,"create_bgmctrl",""],[238,"pl_add_meseta2","aL"],[239,"sync_register","aRL"],[240,"send_regwork",null],[241,"leti_fixed_camera_V3","R"],[242,"default_camera_pos1",""],[243,"unknown",null],[244,"unknown",null],[245,"unknown",null],[246,"unknown",null],[247,"unknown",null],[248,"unknownF8","R"],[249,"unknown",null],[250,"get_gc_number","R"],[251,"unknownFB","W"],[252,"unknown",null],[253,"unknown",null],[254,"unknown",null],[255,"unknownFF",""]]),c=[[0,"unknown",null],[1,"set_chat_callback?","aRs"],[2,"unknown",null],[3,"unknown",null],[4,"unknown",null],[5,"unknown",null],[6,"unknown",null],[7,"unknown",null],[8,"get_difficulty_level2","R"],[9,"get_number_of_player1","R"],[10,"get_coord_of_player","RR"],[11,"unknownF80B",""],[12,"unknownF80C",""],[13,"map_designate_ex","R"],[14,"unknownF80E","aL"],[15,"unknownF80F","aL"],[16,"ba_initial_floor","aL"],[17,"set_ba_rules",""],[18,"unknownF812","aL"],[19,"unknownF813","aL"],[20,"unknownF814","aL"],[21,"unknownF815","aL"],[22,"unknownF816","aL"],[23,"unknownF817","aL"],[24,"unknownF818","aL"],[25,"unknownF819","aL"],[26,"unknownF81A","aL"],[27,"unknownF81B","aL"],[28,"ba_disp_msg","as"],[29,"death_lvl_up","aL"],[30,"death_tech_lvl_up","aL"],[31,"unknown",null],[32,"cmode_stage","aL"],[33,"unknown",null],[34,"unknown",null],[35,"unknownF823","aL"],[36,"unknownF824","aL"],[37,"exp_multiplication","R"],[38,"exp_division?","R"],[39,"get_user_is_dead?","R"],[40,"go_floor","RR"],[41,"unknown",null],[42,"unknown",null],[43,"unlock_door2","aLL"],[44,"lock_door2","aLL"],[45,"if_switch_not_pressed","R"],[46,"if_switch_pressed","R"],[47,"unknownF82F","aLL"],[48,"control_dragon","R"],[49,"release_dragon",""],[50,"unknown",null],[51,"unknown",null],[52,"unknown",null],[53,"unknown",null],[54,"unknown",null],[55,"unknown",null],[56,"shrink","R"],[57,"unshrink","R"],[58,"unknown",null],[59,"unknown",null],[60,"display_clock2?","R"],[61,"unknownF83D","aL"],[62,"delete_area_title?","aL"],[63,"unknown",null],[64,"load_npc_data",""],[65,"get_npc_data","W"],[66,"unknown",null],[67,"unknown",null],[68,"unknown",null],[69,"unknown",null],[70,"unknown",null],[71,"unknown",null],[72,"give_damage_score","R"],[73,"take_damage_score","R"],[74,"unk_score_F84A","R"],[75,"unk_score_F84B","R"],[76,"kill_score","R"],[77,"death_score","R"],[78,"unk_score_F84E","R"],[79,"enemy_death_score","R"],[80,"meseta_score","R"],[81,"unknownF851","R"],[82,"unknownF852","aL"],[83,"reverse_warps",""],[84,"unreverse_warps",""],[85,"set_ult_map",""],[86,"unset_ult_map",""],[87,"set_area_title","as"],[88,"unknownF858",""],[89,"unknown",null],[90,"equip_item","R"],[91,"unequip_item","aLL"],[92,"unknown",null],[93,"unknown",null],[94,"unknownF85E","aL"],[95,"unknownF85F","aL"],[96,"unknownF860",""],[97,"unknownF861","aL"],[98,"unknown",null],[99,"unknown",null],[100,"cmode_rank","aLs"],[101,"award_item_name?",""],[102,"award_item_select?",""],[103,"award_item_give_to?","R"],[104,"unknownF868","RR"],[105,"unknownF869","RR"],[106,"item_create_cmode","RR"],[107,"unknownF86B","R"],[108,"award_item_ok?","R"],[109,"unknownF86D",""],[110,"unknownF86E",""],[111,"ba_set_lives","aL"],[112,"ba_set_tech_lvl","aL"],[113,"ba_set_lvl","aL"],[114,"ba_set_time_limit","aL"],[115,"boss_is_dead?","R"],[116,"unknown",null],[117,"unknown",null],[118,"unknown",null],[119,"enable_techs","R"],[120,"disable_techs","R"],[121,"get_gender","RR"],[122,"get_chara_class","RR"],[123,"take_slot_meseta","RR"],[124,"unknown",null],[125,"unknown",null],[126,"unknown",null],[127,"read_guildcard_flag","RR"],[128,"unknownF880","R"],[129,"get_pl_name?","R"],[130,"unknown",null],[131,"unknownF883","RR"],[132,"unknown",null],[133,"unknown",null],[134,"unknown",null],[135,"unknown",null],[136,"ba_close_msg",""],[137,"unknown",null],[138,"get_player_status","RR"],[139,"send_mail","aRs"],[140,"online_check","R"],[141,"chl_set_timerecord?","R"],[142,"chl_get_timerecord?","R"],[143,"unknownF88F","R"],[144,"unknownF890",""],[145,"load_enemy_data","aL"],[146,"get_physical_data","W"],[147,"get_attack_data","W"],[148,"get_resist_data","W"],[149,"get_movement_data","W"],[150,"unknown",null],[151,"unknown",null],[152,"shift_left","RR"],[153,"shift_right","RR"],[154,"get_random","RR"],[155,"reset_map",""],[156,"disp_chl_retry_menu","R"],[157,"chl_reverser?",""],[158,"unknownF89E","aL"],[159,"unknownF89F","R"],[160,"unknownF8A0",""],[161,"unknownF8A1",""],[162,"unknown",null],[163,"unknown",null],[164,"unknown",null],[165,"unknown",null],[166,"unknown",null],[167,"unknown",null],[168,"unknownF8A8","aL"],[169,"unknownF8A9","R"],[170,"unknown",null],[171,"unknown",null],[172,"unknown",null],[173,"get_number_of_player2","R"],[174,"unknown",null],[175,"unknown",null],[176,"unknown",null],[177,"unknown",null],[178,"unknown",null],[179,"unknown",null],[180,"unknown",null],[181,"unknown",null],[182,"unknown",null],[183,"unknown",null],[184,"unknownF8B8",""],[185,"chl_recovery?",""],[186,"unknown",null],[187,"unknown",null],[188,"set_episode","L"],[189,"unknown",null],[190,"unknown",null],[191,"unknown",null],[192,"file_dl_req","aLs"],[193,"get_dl_status","R"],[194,"gba_unknown4?",""],[195,"get_gba_state?","R"],[196,"unknownF8C4","R"],[197,"unknownF8C5","R"],[198,"QEXIT",""],[199,"use_animation","RR"],[200,"stop_animation","R"],[201,"run_to_coord","RR"],[202,"set_slot_invincible","RR"],[203,"unknownF8CB","R"],[204,"set_slot_poison","R"],[205,"set_slot_paralyze","R"],[206,"set_slot_shock","R"],[207,"set_slot_freeze","R"],[208,"set_slot_slow","R"],[209,"set_slot_confuse","R"],[210,"set_slot_shifta","R"],[211,"set_slot_deband","R"],[212,"set_slot_jellen","R"],[213,"set_slot_zalure","R"],[214,"fleti_fixed_camera","aR"],[215,"fleti_locked_camera","aLR"],[216,"default_camera_pos2",""],[217,"set_motion_blur",""],[218,"set_screen_b&w",""],[219,"unknownF8DB","aLLLLRW"],[220,"NPC_action_string","RRW"],[221,"get_pad_cond","RR"],[222,"get_button_cond","RR"],[223,"freeze_enemies",""],[224,"unfreeze_enemies",""],[225,"freeze_everything",""],[226,"unfreeze_everything",""],[227,"restore_hp","R"],[228,"restore_tp","R"],[229,"close_chat_bubble","R"],[230,"unknownF8E6","RR"],[231,"unknownF8E7","RR"],[232,"unknownF8E8","RR"],[233,"unknownF8E9","RR"],[234,"unknownF8EA","RR"],[235,"unknownF8EB","RR"],[236,"unknownF8EC","RR"],[237,"animation_check","RR"],[238,"call_image_data","aLW"],[239,"unknownF8EF",""],[240,"turn_off_bgm_p2",""],[241,"turn_on_bgm_p2",""],[242,"load_unk_data","aLLLLRW"],[243,"particle2","aRLf"],[244,"unknown",null],[245,"unknown",null],[246,"unknown",null],[247,"unknown",null],[248,"unknown",null],[249,"unknown",null],[250,"unknown",null],[251,"unknown",null],[252,"unknown",null],[253,"unknown",null],[254,"unknown",null],[255,"unknown",null]],u=[[0,"unknown",null],[1,"dec2float","RR"],[2,"float2dec","RR"],[3,"flet","RR"],[4,"fleti","RF"],[5,"unknown",null],[6,"unknown",null],[7,"unknown",null],[8,"fadd","RR"],[9,"faddi","RF"],[10,"fsub","RR"],[11,"fsubi","RF"],[12,"fmul","RR"],[13,"fmuli","RF"],[14,"fdiv","RR"],[15,"fdivi","RF"],[16,"get_unknown_count?","aLR"],[17,"get_stackable_item_count","RR"],[18,"freeze_and_hide_equip",""],[19,"thaw_and_show_equip",""],[20,"set_paletteX_callback","aRW"],[21,"activate_paletteX","aR"],[22,"enable_paletteX","aR"],[23,"restore_paletteX","aL"],[24,"disable_paletteX","aL"],[25,"get_paletteX_activated","aLR"],[26,"get_unknown_paletteX_status?","aLR"],[27,"disable_movement2","aR"],[28,"enable_movement2","aR"],[29,"get_time_played","R"],[30,"get_guildcard_total","R"],[31,"get_slot_meseta","R"],[32,"get_player_level","aLR"],[33,"get_Section_ID","aLR"],[34,"get_player_hp","aRR"],[35,"get_floor_number","aRR"],[36,"get_coord_player_detect","RR"],[37,"read_global_flag","abR"],[38,"write_global_flag","abR"],[39,"unknownF927","RR"],[40,"floor_player_detect","R"],[41,"read_disk_file?","as"],[42,"open_pack_select",""],[43,"item_select","R"],[44,"get_item_id","R"],[45,"color_change","aRRRRR"],[46,"send_statistic?","aLLLLLLLL"],[47,"unknownF92F","aLL"],[48,"chat_box","aLLLLLs"],[49,"chat_bubble","aLs"],[50,"unknown",null],[51,"unknownF933","R"],[52,"scroll_text","aLLLLLfRs"],[53,"gba_unknown1",""],[54,"gba_unknown2",""],[55,"gba_unknown3",""],[56,"add_damage_to?","aLL"],[57,"item_delete2","aL"],[58,"get_item_info","aLR"],[59,"item_packing1","aL"],[60,"item_packing2","aLL"],[61,"get_lang_setting?","aR"],[62,"prepare_statistic?","aLWW"],[63,"keyword_detect",""],[64,"Keyword","aRLs"],[65,"get_guildcard_num","aLR"],[66,"unknown",null],[67,"unknown",null],[68,"get_wrap_status","aLR"],[69,"initial_floor","aL"],[70,"sin","aRL"],[71,"cos","aRL"],[72,"unknown",null],[73,"unknown",null],[74,"boss_is_dead2?","R"],[75,"unknownF94B","R"],[76,"unknownF94C","R"],[77,"is_there_cardbattle","R"],[78,"unknown",null],[79,"unknown",null],[80,"BB_p2_menu","aL"],[81,"BB_Map_Designate","BWBB"],[82,"BB_get_number_in_pack","R"],[83,"BB_swap_item","aLLLLLLWW"],[84,"BB_check_wrap","aRR"],[85,"BB_exchange_PD_item","aRRRWW"],[86,"BB_exchange_PD_srank","aRRRRRWW"],[87,"BB_exchange_PD_special","aRRRRRLWW"],[88,"BB_exchange_PD_percent","aRRRRRLWW"],[89,"unknownF959","aL"],[90,"unknown",null],[91,"unknown",null],[92,"BB_exchange_SLT","aLRWW"],[93,"BB_exchange_PC",""],[94,"BB_box_create_BP","aLff"],[95,"BB_exchange_PT","aRRLWW"],[96,"unknownF960","aL"],[97,"unknownF961",""],[98,"unknown",null],[99,"unknown",null],[100,"unknown",null],[101,"unknown",null],[102,"unknown",null],[103,"unknown",null],[104,"unknown",null],[105,"unknown",null],[106,"unknown",null],[107,"unknown",null],[108,"unknown",null],[109,"unknown",null],[110,"unknown",null],[111,"unknown",null],[112,"unknown",null],[113,"unknown",null],[114,"unknown",null],[115,"unknown",null],[116,"unknown",null],[117,"unknown",null],[118,"unknown",null],[119,"unknown",null],[120,"unknown",null],[121,"unknown",null],[122,"unknown",null],[123,"unknown",null],[124,"unknown",null],[125,"unknown",null],[126,"unknown",null],[127,"unknown",null],[128,"unknown",null],[129,"unknown",null],[130,"unknown",null],[131,"unknown",null],[132,"unknown",null],[133,"unknown",null],[134,"unknown",null],[135,"unknown",null],[136,"unknown",null],[137,"unknown",null],[138,"unknown",null],[139,"unknown",null],[140,"unknown",null],[141,"unknown",null],[142,"unknown",null],[143,"unknown",null],[144,"unknown",null],[145,"unknown",null],[146,"unknown",null],[147,"unknown",null],[148,"unknown",null],[149,"unknown",null],[150,"unknown",null],[151,"unknown",null],[152,"unknown",null],[153,"unknown",null],[154,"unknown",null],[155,"unknown",null],[156,"unknown",null],[157,"unknown",null],[158,"unknown",null],[159,"unknown",null],[160,"unknown",null],[161,"unknown",null],[162,"unknown",null],[163,"unknown",null],[164,"unknown",null],[165,"unknown",null],[166,"unknown",null],[167,"unknown",null],[168,"unknown",null],[169,"unknown",null],[170,"unknown",null],[171,"unknown",null],[172,"unknown",null],[173,"unknown",null],[174,"unknown",null],[175,"unknown",null],[176,"unknown",null],[177,"unknown",null],[178,"unknown",null],[179,"unknown",null],[180,"unknown",null],[181,"unknown",null],[182,"unknown",null],[183,"unknown",null],[184,"unknown",null],[185,"unknown",null],[186,"unknown",null],[187,"unknown",null],[188,"unknown",null],[189,"unknown",null],[190,"unknown",null],[191,"unknown",null],[192,"unknown",null],[193,"unknown",null],[194,"unknown",null],[195,"unknown",null],[196,"unknown",null],[197,"unknown",null],[198,"unknown",null],[199,"unknown",null],[200,"unknown",null],[201,"unknown",null],[202,"unknown",null],[203,"unknown",null],[204,"unknown",null],[205,"unknown",null],[206,"unknown",null],[207,"unknown",null],[208,"unknown",null],[209,"unknown",null],[210,"unknown",null],[211,"unknown",null],[212,"unknown",null],[213,"unknown",null],[214,"unknown",null],[215,"unknown",null],[216,"unknown",null],[217,"unknown",null],[218,"unknown",null],[219,"unknown",null],[220,"unknown",null],[221,"unknown",null],[222,"unknown",null],[223,"unknown",null],[224,"unknown",null],[225,"unknown",null],[226,"unknown",null],[227,"unknown",null],[228,"unknown",null],[229,"unknown",null],[230,"unknown",null],[231,"unknown",null],[232,"unknown",null],[233,"unknown",null],[234,"unknown",null],[235,"unknown",null],[236,"unknown",null],[237,"unknown",null],[238,"unknown",null],[239,"unknown",null],[240,"unknown",null],[241,"unknown",null],[242,"unknown",null],[243,"unknown",null],[244,"unknown",null],[245,"unknown",null],[246,"unknown",null],[247,"unknown",null],[248,"unknown",null],[249,"unknown",null],[250,"unknown",null],[251,"unknown",null],[252,"unknown",null],[253,"unknown",null],[254,"unknown",null],[255,"unknown",null]];
},function(e,t,n){"use strict";function r(e){for(var t=[],n=[],r=0;r<e.size;){e.seek_start(r);var i=e.u32(),o=e.u32(),a=e.u32(),s=e.u32();if(0===i)break;if(1===i){for(var c=Math.floor(s/68),u=e.position,l=0;l<c;++l){var h=e.u16();e.seek(6);var p=e.u16(),d=e.u16(),f=e.u16();e.seek(2);var m=e.f32(),v=e.f32(),g=e.f32();e.seek(4);var y=e.u32();e.seek(10);var b=e.u32(),_=e.u32();e.seek(14),n.push({type_id:h,id:p,group:d,section_id:f,position:{x:m,y:v,z:g},rotation:y,object_id:b,action:_,area_id:a})}var w=e.position-u;w!==s&&console.warn("Read "+w+" bytes instead of expected "+s+" for entity type "+i+" (Object).")}else if(2===i){for(var x=Math.floor(s/72),T=e.position,E=0;E<x;++E){var M=e.u16();e.seek(4);var S=e.u16();e.seek(4);var R=e.u16();e.seek(6);var C=e.f32(),A=e.f32(),L=e.f32();e.seek(4);var P=e.u32();e.seek(4);var O=e.f32(),k=0===(8388608&e.u32());e.seek(8);var I=e.u32(),D=e.u32(),N=e.u32();t.push({type_id:M,clone_count:S,section_id:R,position:{x:C,y:A,z:L},rotation:P,movement_data:O,regular:k,exp:I,skin:D,rt_index:N,area_id:a})}var U=e.position-T;U!==s&&console.warn("Read "+U+" bytes instead of expected "+s+" for entity type "+i+" (NPC).")}r+=o}return{objs:n,npcs:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.parse_dat=r;n(14)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){for(var t=new DataView(e),n=new a.Geometry,r=t.getUint32(t.byteLength-16,!0),i=t.getUint32(r,!0),o=i;o===i||0!==t.getUint32(o);o+=24){for(var s=t.getUint32(o,!0),c=t.getUint32(s,!0),u=t.getUint32(s+4,!0),l=u+12*c,h=t.getUint32(s+8,!0),p=t.getUint32(s+12,!0),d=p+36*h,f=n.vertices.length,m=u;m<l;m+=12){var v=t.getFloat32(m,!0),g=t.getFloat32(m+4,!0),y=t.getFloat32(m+8,!0);n.vertices.push(new a.Vector3(v,g,y))}for(var b=p;b<d;b+=36){var _=f+t.getUint16(b,!0),w=f+t.getUint16(b+2,!0),x=f+t.getUint16(b+4,!0),T=new a.Vector3(t.getFloat32(b+8,!0),t.getFloat32(b+12,!0),t.getFloat32(b+16,!0));n.faces.push(new a.Face3(_,w,x,T))}}var E=new a.Object3D,M=new a.Mesh(n,new a.MeshLambertMaterial({color:2146416,transparent:!0,opacity:.5}));M.renderOrder=1,E.add(M);var S=new a.Mesh(n,new a.MeshBasicMaterial({color:8978380,wireframe:!0,transparent:!0,opacity:.75}));return E.add(S),E}function o(e){for(var t=new DataView(e),n=new Map,i=[],o=[],c=[],u=t.getUint32(t.byteLength-16,!0),l=t.getUint32(u+8,!0),h=t.getUint32(u+16,!0),p=h;p<h+52*l;p+=52){var d=t.getInt32(p,!0),f=t.getFloat32(p+4,!0),m=t.getFloat32(p+8,!0),v=t.getFloat32(p+12,!0),g=t.getUint32(p+20,!0)/65536*2*Math.PI,y=Math.sin(g),b=Math.cos(g);n.set(d,new s.Section(d,[f,m,v],g));for(var _=t.getUint32(p+32,!0),w=t.getUint32(p+40,!0),x=_;x<_+16*w;x+=16){var T=t.getUint32(x,!0),E=t.getUint32(x+12,!0);4&E&&(T=t.getUint32(T,!0));var M=t.getUint32(T+4,!0);if(M>0){for(var S=t.getUint32(M+4,!0),R=t.getUint32(M+8,!0),C=t.getUint32(M+12,!0),A=t.getUint32(M+16,!0),L=[],P=C;P<C+20*A;P+=20){for(var O=t.getUint32(P+8,!0),k=t.getUint32(P+12,!0),I=[],D=O;D<O+2*k;D+=2)I.push(t.getUint16(D,!0));L.push(I)}R>1&&console.warn("Vertex info count of "+R+" was larger than expected.");for(var N=t.getUint32(S+4,!0),U=t.getUint32(S+8,!0),F=t.getUint32(S+12,!0),j=[],B=[],z=N;z<N+F*U;z+=U){var G=void 0,V=void 0,H=void 0;switch(U){case 16:case 24:G=0,V=1,H=0;break;case 28:case 36:G=t.getFloat32(z+12,!0),V=t.getFloat32(z+16,!0),H=t.getFloat32(z+20,!0);break;default:console.error("Unexpected vertex size of "+U+".");continue}var W=t.getFloat32(z,!0),X=t.getFloat32(z+4,!0),q=t.getFloat32(z+8,!0),Y=b*W+y*q,Z=-y*W+b*q;j.push(f+Y),j.push(m+X),j.push(v+Z),B.push(G),B.push(V),B.push(H)}i.push(L),o.push(j),c.push(B)}}}for(var K=new a.Object3D,J=function(e){var t=o[e],n=c[e],r=i[e];r.forEach(function(e){var r=new a.BufferGeometry;r.addAttribute("position",new a.BufferAttribute(new Float32Array(t),3)),r.addAttribute("normal",new a.BufferAttribute(new Float32Array(n),3)),r.setIndex(new a.BufferAttribute(new Uint16Array(e),1));var i=new a.Mesh(r,new a.MeshLambertMaterial({color:4500223,opacity:.25,side:a.DoubleSide}));i.setDrawMode(a.TriangleStripDrawMode),K.add(i)})},Q=0;Q<o.length;++Q)J(Q);return{sections:[].concat(r(n.values())).sort(function(e,t){return e.id-t.id}),object_3d:K}}Object.defineProperty(t,"__esModule",{value:!0}),t.parse_c_rel=i,t.parse_n_rel=o;var a=n(27),s=n(12)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){for(var t=new s(e);;)if(1===t.read_flag_bit())t.copy_byte();else{var n=void 0,r=void 0;if(0===t.read_flag_bit())n=t.read_flag_bit()<<1,n|=t.read_flag_bit(),n+=2,r=t.read_byte()-256;else{if(r=t.read_short(),0===r)break;n=7&r,r>>>=3,0===n?(n=t.read_byte(),n+=1):n+=2,r-=8192}t.offset_copy(r,n)}return t.dst.seek_start(0)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.decompress=i;var a=n(14),s=function(){function e(t){r(this,e),this.src=t,this.dst=new a.ArrayBufferCursor(4*t.size,!0),this.flags=0,this.bit_pos=0}return o(e,[{key:"read_flag_bit",value:function(){0===this.bit_pos&&(this.flags=this.read_byte(),this.bit_pos=8);var e=1&this.flags;return this.flags>>>=1,this.bit_pos-=1,e}},{key:"copy_byte",value:function(){this.dst.write_u8(this.read_byte())}},{key:"read_byte",value:function(){return this.src.u8()}},{key:"read_short",value:function(){return this.src.u16()}},{key:"offset_copy",value:function(e,t){(e<-8192||e>0)&&console.error("Offset was "+e+", should be between -8192 and 0."),(t<1||t>256)&&console.error("Size was "+t+", should be between 1 and 256.");var n=Math.min(-e,t);this.dst.seek(e);var r=this.dst.take(n);this.dst.seek(-e-n);for(var i=0;i<Math.floor(t/n);++i)this.dst.write_cursor(r);this.dst.write_cursor(r.take(t%n))}}]),e}()},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){var t="PC",n=null,r=0,i=null,a=0,s=e.u8();e.seek(1);var h=e.u8();68===s?t="Dreamcast/GameCube":88===s?68===h&&(t="Blue Burst"):166===s&&(t="Dreamcast download"),e.seek_start(0);for(var p=0;p<2;++p){e.seek(44);var d=e.string_ascii(16,!0,!0),f=e.u32();e.seek(24),d.endsWith(".dat")?(n=d,r=f):d.endsWith(".bin")?(i=d,a=f):console.warn('File "'+d+'" has unexpected extension.')}null===n&&console.warn("No .dat file defined in header."),null===i&&console.warn("No .bin file defined in header.");var m=o(e,r,a),v=m.dat_data,g=m.bin_data;return{version:t,dat:(0,u.parse_dat)(c.decompress(v)),bin:(0,l.parse_bin)(c.decompress(g))}}function o(e,t,n){for(var r=new a.ArrayBufferCursor(t,!0),i=new a.ArrayBufferCursor(n,!0);e.position<e.size;){var o=e.position,s=e.seek(8).string_ascii(16,!0,!0),c=e.seek(1024).u32();if(e.seek(-1028),c<=1024)if(s.endsWith(".dat")){var u=e.take(c);r.write_cursor(u),e.seek(1028-u.size)}else if(s.endsWith(".bin")){var l=e.take(c);i.write_cursor(l),e.seek(1028-l.size)}else console.warn('Chunk for file "'+s+'" has unexpected extension.'),e.seek(1028);else console.warn("Data segment size of "+c+" is larger than expected maximum size of 1024.");e.seek(4),e.position!==o+1056&&console.error("Couldn't read a full file data block.")}return r.size!==t&&console.warn("Read "+r.size+" .dat file bytes instead of expected "+t+"."),i.size!==n&&console.warn("Read "+i.size+" .bin file bytes instead of expected "+n+"."),r.seek_start(0),i.seek_start(0),{dat_data:r,bin_data:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.parse_qst=i;var a=n(14),s=n(98),c=r(s),u=n(96),l=n(95)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){var t=(0,d.parse_qst)(e),n=t.dat,r=t.bin,i=1,l=[];if(r.function_offsets.length){var h=s(r.instructions,r.function_offsets[0]);h?(i=o(h),l=a(i,h)):console.warn("Function 0 offset "+r.function_offsets[0]+" is invalid.")}else console.warn("File contains no functions.");return new f.Quest(r.quest_name,r.short_description,r.long_description,i,l,c(i,n.objs),u(i,n.npcs))}function o(e){var t=e.find(function(e){return"set_episode"===e.mnemonic});if(!t)return console.warn("Function 0 has no set_episode instruction."),1;switch(t.args[0]){default:case 0:return 1;case 1:return 2;case 2:return 4}}function a(e,t){var n=new Map,i=t.filter(function(e){return"BB_Map_Designate"===e.mnemonic}),o=!0,a=!1,s=void 0;try{for(var c,u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value,h=l.args[0],d=l.args[2];n.set(h,d)}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}return[].concat(r(n)).map(function(t){var n=p(t,2),r=n[0],i=n[1];return m.area_store.get_variant(e,r,i)}).sort(function(e,t){return e.area.order-t.area.order||e.id-t.id})}function s(e,t){var n=0,r=!1,i=[],o=!0,a=!1,s=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value;if(n===t&&(r=!0),r&&(i.push(l),1===l.opcode))break;n+=l.size}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}return r?i:null}function c(e,t){return t.map(function(e){return new f.QuestObject(e.area_id,e.section_id,e.position,l(e.type_id))})}function u(e,t){return t.map(function(t){return new f.QuestNpc(t.area_id,t.section_id,t.position,h(e,t))})}function l(e){switch(e){case 0:return f.ObjectType.PlayerSet;case 1:return f.ObjectType.Particle;case 2:return f.ObjectType.Teleporter;case 3:return f.ObjectType.Warp;case 4:return f.ObjectType.LightCollision;case 5:return f.ObjectType.Item;case 6:return f.ObjectType.EnvSound;case 7:return f.ObjectType.FogCollision;case 8:return f.ObjectType.EventCollision;case 9:return f.ObjectType.CharaCollision;case 10:return f.ObjectType.ElementalTrap;case 11:return f.ObjectType.StatusTrap;case 12:return f.ObjectType.HealTrap;case 13:return f.ObjectType.LargeElementalTrap;case 14:return f.ObjectType.ObjRoomID;case 15:return f.ObjectType.Sensor;case 16:return f.ObjectType.UnknownItem16;case 17:return f.ObjectType.Lensflare;case 18:return f.ObjectType.ScriptCollision;case 19:return f.ObjectType.HealRing;case 20:return f.ObjectType.MapCollision;case 21:return f.ObjectType.ScriptCollisionA;case 22:return f.ObjectType.ItemLight;case 23:return f.ObjectType.RadarCollision;case 24:return f.ObjectType.FogCollisionSW;case 25:return f.ObjectType.BossTeleporter;case 26:return f.ObjectType.ImageBoard;case 27:return f.ObjectType.QuestWarp;case 28:return f.ObjectType.Epilogue;case 29:return f.ObjectType.UnknownItem29;case 30:return f.ObjectType.UnknownItem30;case 31:return f.ObjectType.UnknownItem31;case 32:return f.ObjectType.BoxDetectObject;case 33:return f.ObjectType.SymbolChatObject;case 34:return f.ObjectType.TouchPlateObject;case 35:return f.ObjectType.TargetableObject;case 36:return f.ObjectType.EffectObject;case 37:return f.ObjectType.CountDownObject;case 38:return f.ObjectType.UnknownItem38;case 39:return f.ObjectType.UnknownItem39;case 40:return f.ObjectType.UnknownItem40;case 41:return f.ObjectType.UnknownItem41;case 64:return f.ObjectType.MenuActivation;case 65:return f.ObjectType.TelepipeLocation;case 66:return f.ObjectType.BGMCollision;case 67:return f.ObjectType.MainRagolTeleporter;case 68:return f.ObjectType.LobbyTeleporter;case 69:return f.ObjectType.PrincipalWarp;case 70:return f.ObjectType.ShopDoor;case 71:return f.ObjectType.HuntersGuildDoor;case 72:return f.ObjectType.TeleporterDoor;case 73:return f.ObjectType.MedicalCenterDoor;case 74:return f.ObjectType.Elevator;case 75:return f.ObjectType.EasterEgg;case 76:return f.ObjectType.ValentinesHeart;case 77:return f.ObjectType.ChristmasTree;case 78:return f.ObjectType.ChristmasWreath;case 79:return f.ObjectType.HalloweenPumpkin;case 80:return f.ObjectType.TwentyFirstCentury;case 81:return f.ObjectType.Sonic;case 82:return f.ObjectType.WelcomeBoard;case 83:return f.ObjectType.Firework;case 84:return f.ObjectType.LobbyScreenDoor;case 85:return f.ObjectType.MainRagolTeleporterBattleInNextArea;case 86:return f.ObjectType.LabTeleporterDoor;case 87:return f.ObjectType.Pioneer2InvisibleTouchplate;case 128:return f.ObjectType.ForestDoor;case 129:return f.ObjectType.ForestSwitch;case 130:return f.ObjectType.LaserFence;case 131:return f.ObjectType.LaserSquareFence;case 132:return f.ObjectType.ForestLaserFenceSwitch;case 133:return f.ObjectType.LightRays;case 134:return f.ObjectType.BlueButterfly;case 135:return f.ObjectType.Probe;case 136:return f.ObjectType.RandomTypeBox1;case 137:return f.ObjectType.ForestWeatherStation;case 138:return f.ObjectType.Battery;case 139:return f.ObjectType.ForestConsole;case 140:return f.ObjectType.BlackSlidingDoor;case 141:return f.ObjectType.RicoMessagePod;case 142:return f.ObjectType.EnergyBarrier;case 143:return f.ObjectType.ForestRisingBridge;case 144:return f.ObjectType.SwitchNoneDoor;case 145:return f.ObjectType.EnemyBoxGrey;case 146:return f.ObjectType.FixedTypeBox;case 147:return f.ObjectType.EnemyBoxBrown;case 149:return f.ObjectType.EmptyTypeBox;case 150:return f.ObjectType.LaserFenseEx;case 151:return f.ObjectType.LaserSquareFenceEx;case 192:return f.ObjectType.FloorPanel1;case 193:return f.ObjectType.Caves4ButtonDoor;case 194:return f.ObjectType.CavesNormalDoor;case 195:return f.ObjectType.CavesSmashingPillar;case 196:return f.ObjectType.CavesSign1;case 197:return f.ObjectType.CavesSign2;case 198:return f.ObjectType.CavesSign3;case 199:return f.ObjectType.HexagalTank;case 200:return f.ObjectType.BrownPlatform;case 201:return f.ObjectType.WarningLightObject;case 203:return f.ObjectType.Rainbow;case 204:return f.ObjectType.FloatingJelifish;case 205:return f.ObjectType.FloatingDragonfly;case 206:return f.ObjectType.CavesSwitchDoor;case 207:return f.ObjectType.RobotRechargeStation;case 208:return f.ObjectType.CavesCakeShop;case 209:return f.ObjectType.Caves1SmallRedRock;case 210:return f.ObjectType.Caves1MediumRedRock;case 211:return f.ObjectType.Caves1LargeRedRock;case 212:return f.ObjectType.Caves2SmallRock1;case 213:return f.ObjectType.Caves2MediumRock1;case 214:return f.ObjectType.Caves2LargeRock1;case 215:return f.ObjectType.Caves2SmallRock2;case 216:return f.ObjectType.Caves2MediumRock2;case 217:return f.ObjectType.Caves2LargeRock2;case 218:return f.ObjectType.Caves3SmallRock;case 219:return f.ObjectType.Caves3MediumRock;case 220:return f.ObjectType.Caves3LargeRock;case 222:return f.ObjectType.FloorPanel2;case 223:return f.ObjectType.DestructableRockCaves1;case 224:return f.ObjectType.DestructableRockCaves2;case 225:return f.ObjectType.DestructableRockCaves3;case 256:return f.ObjectType.MinesDoor;case 257:return f.ObjectType.FloorPanel3;case 258:return f.ObjectType.MinesSwitchDoor;case 259:return f.ObjectType.LargeCryoTube;case 260:return f.ObjectType.ComputerLikeCalus;case 261:return f.ObjectType.GreenScreenOpeningAndClosing;case 262:return f.ObjectType.FloatingRobot;case 263:return f.ObjectType.FloatingBlueLight;case 264:return f.ObjectType.SelfDestructingObject1;case 265:return f.ObjectType.SelfDestructingObject2;case 266:return f.ObjectType.SelfDestructingObject3;case 267:return f.ObjectType.SparkMachine;case 268:return f.ObjectType.MinesLargeFlashingCrate;case 304:return f.ObjectType.RuinsSeal;case 320:return f.ObjectType.RuinsTeleporter;case 321:return f.ObjectType.RuinsWarpSiteToSite;case 322:return f.ObjectType.RuinsSwitch;case 323:return f.ObjectType.FloorPanel4;case 324:return f.ObjectType.Ruins1Door;case 325:return f.ObjectType.Ruins3Door;case 326:return f.ObjectType.Ruins2Door;case 327:return f.ObjectType.Ruins11ButtonDoor;case 328:return f.ObjectType.Ruins21ButtonDoor;case 329:return f.ObjectType.Ruins31ButtonDoor;case 330:return f.ObjectType.Ruins4ButtonDoor;case 331:return f.ObjectType.Ruins2ButtonDoor;case 332:return f.ObjectType.RuinsSensor;case 333:return f.ObjectType.RuinsFenceSwitch;case 334:return f.ObjectType.RuinsLaserFence4x2;case 335:return f.ObjectType.RuinsLaserFence6x2;case 336:return f.ObjectType.RuinsLaserFence4x4;case 337:return f.ObjectType.RuinsLaserFence6x4;case 338:return f.ObjectType.RuinsPoisonBlob;case 339:return f.ObjectType.RuinsPilarTrap;case 340:return f.ObjectType.PopupTrapNoTech;case 341:return f.ObjectType.RuinsCrystal;case 342:return f.ObjectType.Monument;case 345:return f.ObjectType.RuinsRock1;case 346:return f.ObjectType.RuinsRock2;case 347:return f.ObjectType.RuinsRock3;case 348:return f.ObjectType.RuinsRock4;case 349:return f.ObjectType.RuinsRock5;case 350:return f.ObjectType.RuinsRock6;case 351:return f.ObjectType.RuinsRock7;case 352:return f.ObjectType.Poison;case 353:return f.ObjectType.FixedBoxTypeRuins;case 354:return f.ObjectType.RandomBoxTypeRuins;case 355:return f.ObjectType.EnemyTypeBoxYellow;case 356:return f.ObjectType.EnemyTypeBoxBlue;case 357:return f.ObjectType.EmptyTypeBoxBlue;case 358:return f.ObjectType.DestructableRock;case 359:return f.ObjectType.PopupTrapsTechs;case 368:return f.ObjectType.FlyingWhiteBird;case 369:return f.ObjectType.Tower;case 370:return f.ObjectType.FloatingRocks;case 371:return f.ObjectType.FloatingSoul;case 372:return f.ObjectType.Butterfly;case 384:return f.ObjectType.LobbyGameMenu;case 385:return f.ObjectType.LobbyWarpObject;case 386:return f.ObjectType.Lobby1EventObjectDefaultTree;case 387:return f.ObjectType.UnknownItem387;case 388:return f.ObjectType.UnknownItem388;case 389:return f.ObjectType.UnknownItem389;case 390:return f.ObjectType.LobbyEventObjectStaticPumpkin;case 391:return f.ObjectType.LobbyEventObject3ChristmasWindows;case 392:return f.ObjectType.LobbyEventObjectRedAndWhiteCurtain;case 393:return f.ObjectType.UnknownItem393;case 394:return f.ObjectType.UnknownItem394;case 395:return f.ObjectType.LobbyFishTank;case 396:return f.ObjectType.LobbyEventObjectButterflies;case 400:return f.ObjectType.UnknownItem400;case 401:return f.ObjectType.GreyWallLow;case 402:return f.ObjectType.SpaceshipDoor;case 403:return f.ObjectType.GreyWallHigh;case 416:return f.ObjectType.TempleNormalDoor;case 417:return f.ObjectType.BreakableWallWallButUnbreakable;case 418:return f.ObjectType.BrokenCilinderAndRubble;case 419:return f.ObjectType.ThreeBrokenWallPiecesOnFloor;case 420:return f.ObjectType.HighBrickCilinder;case 421:return f.ObjectType.LyingCilinder;case 422:return f.ObjectType.BrickConeWithFlatTop;case 423:return f.ObjectType.BreakableTempleWall;case 424:return f.ObjectType.TempleMapDetect;case 425:return f.ObjectType.SmallBrownBrickRisingBridge;case 426:return f.ObjectType.LongRisingBridgeWithPinkHighEdges;case 427:return f.ObjectType.FourSwitchTempleDoor;case 448:return f.ObjectType.FourButtonSpaceshipDoor;case 512:return f.ObjectType.ItemBoxCca;case 513:return f.ObjectType.TeleporterEp2;case 514:return f.ObjectType.CCADoor;case 515:return f.ObjectType.SpecialBoxCCA;case 516:return f.ObjectType.BigCCADoor;case 517:return f.ObjectType.BigCCADoorSwitch;case 518:return f.ObjectType.LittleRock;case 519:return f.ObjectType.Little3StoneWall;case 520:return f.ObjectType.Medium3StoneWall;case 521:return f.ObjectType.SpiderPlant;case 522:return f.ObjectType.CCAAreaTeleporter;case 523:return f.ObjectType.UnknownItem523;case 524:return f.ObjectType.WhiteBird;case 525:return f.ObjectType.OrangeBird;case 527:return f.ObjectType.Saw;case 528:return f.ObjectType.LaserDetect;case 529:return f.ObjectType.UnknownItem529;case 530:return f.ObjectType.UnknownItem530;case 531:return f.ObjectType.Seagull;case 544:return f.ObjectType.Fish;case 545:return f.ObjectType.SeabedDoorWithBlueEdges;case 546:return f.ObjectType.SeabedDoorAlwaysOpenNonTriggerable;case 547:return f.ObjectType.LittleCryotube;case 548:return f.ObjectType.WideGlassWallBreakable;case 549:return f.ObjectType.BlueFloatingRobot;case 550:return f.ObjectType.RedFloatingRobot;case 551:return f.ObjectType.Dolphin;case 552:return f.ObjectType.CaptureTrap;case 553:return f.ObjectType.VRLink;case 576:return f.ObjectType.UnknownItem576;case 640:return f.ObjectType.WarpInBarbaRayRoom;case 672:return f.ObjectType.UnknownItem672;case 688:return f.ObjectType.GeeNest;case 689:return f.ObjectType.LabComputerConsole;case 690:return f.ObjectType.LabComputerConsoleGreenScreen;case 691:return f.ObjectType.ChairYelllowPillow;case 692:return f.ObjectType.OrangeWallWithHoleInMiddle;case 693:return f.ObjectType.GreyWallWithHoleInMiddle;case 694:return f.ObjectType.LongTable;case 695:return f.ObjectType.GBAStation;case 696:return f.ObjectType.TalkLinkToSupport;case 697:return f.ObjectType.InstaWarp;case 698:return f.ObjectType.LabInvisibleObject;case 699:return f.ObjectType.LabGlassWindowDoor;case 700:return f.ObjectType.UnknownItem700;case 701:return f.ObjectType.LabCelingWarp;case 768:return f.ObjectType.Ep4LightSource;case 769:return f.ObjectType.Cacti;case 770:return f.ObjectType.BigBrownRock;case 771:return f.ObjectType.BreakableBrownRock;case 832:return f.ObjectType.UnknownItem832;case 833:return f.ObjectType.UnknownItem833;case 896:return f.ObjectType.PoisonPlant;case 897:return f.ObjectType.UnknownItem897;case 898:return f.ObjectType.UnknownItem898;case 899:return f.ObjectType.OozingDesertPlant;case 901:return f.ObjectType.UnknownItem901;case 902:return f.ObjectType.BigBlackRocks;case 903:return f.ObjectType.UnknownItem903;case 904:return f.ObjectType.UnknownItem904;case 905:return f.ObjectType.UnknownItem905;case 906:return f.ObjectType.UnknownItem906;case 907:return f.ObjectType.FallingRock;case 908:return f.ObjectType.DesertPlantHasCollision;case 909:return f.ObjectType.DesertFixedTypeBoxBreakableCrystals;case 910:return f.ObjectType.UnknownItem910;case 911:return f.ObjectType.BeeHive;case 912:return f.ObjectType.UnknownItem912;case 913:return f.ObjectType.Heat;case 960:return f.ObjectType.TopOfSaintMillionEgg;case 961:return f.ObjectType.UnknownItem961;default:return f.ObjectType.Unknown}}function h(e,t){var n=t.type_id,r=t.regular,i=t.skin,o=t.area_id;switch(n+", "+i%3+", "+e){case"68, 0, 1":return f.NpcType.Booma;case"68, 1, 1":return f.NpcType.Gobooma;case"68, 2, 1":return f.NpcType.Gigobooma;case"99, 0, 1":return f.NpcType.EvilShark;case"99, 1, 1":return f.NpcType.PalShark;case"99, 2, 1":return f.NpcType.GuilShark;case"166, 0, 1":return f.NpcType.Dimenian;case"166, 0, 2":return f.NpcType.Dimenian2;case"166, 1, 1":return f.NpcType.LaDimenian;case"166, 1, 2":return f.NpcType.LaDimenian2;case"166, 2, 1":return f.NpcType.SoDimenian;case"166, 2, 2":return f.NpcType.SoDimenian2;case"214, 0, 2":return f.NpcType.Mericarol;case"214, 1, 2":return f.NpcType.Mericus;case"214, 2, 2":return f.NpcType.Merikle;case"277, 0, 4":return f.NpcType.Boota;case"277, 1, 4":return f.NpcType.ZeBoota;case"277, 2, 4":return f.NpcType.BaBoota;case"279, 0, 4":return f.NpcType.Goran;case"279, 1, 4":return f.NpcType.PyroGoran;case"279, 2, 4":return f.NpcType.GoranDetonator}switch(n+", "+i%2+", "+e){case"64, 0, 1":return f.NpcType.Hildebear;case"64, 0, 2":return f.NpcType.Hildebear2;case"64, 1, 1":return f.NpcType.Hildeblue;case"64, 1, 2":return f.NpcType.Hildeblue2;case"65, 0, 1":return f.NpcType.RagRappy;case"65, 0, 2":return f.NpcType.RagRappy2;case"65, 0, 4":return f.NpcType.SandRappy;case"65, 1, 1":return f.NpcType.AlRappy;case"65, 1, 2":return f.NpcType.LoveRappy;case"65, 1, 4":return f.NpcType.DelRappy;case"97, 0, 1":return o>15?f.NpcType.DelLily:f.NpcType.PoisonLily;case"97, 0, 2":return o>15?f.NpcType.DelLily:f.NpcType.PoisonLily2;case"97, 1, 1":return o>15?f.NpcType.DelLily:f.NpcType.NarLily;case"97, 1, 2":return o>15?f.NpcType.DelLily:f.NpcType.NarLily2;case"128, 0, 1":return f.NpcType.Dubchic;case"128, 0, 2":return f.NpcType.Dubchic2;case"128, 1, 1":return f.NpcType.Gilchic;case"128, 1, 2":return f.NpcType.Gilchic2;case"212, 0, 2":return f.NpcType.SinowBerill;case"212, 1, 2":return f.NpcType.SinowSpigell;case"213, 0, 2":return f.NpcType.Merillia;case"213, 1, 2":return f.NpcType.Meriltas;case"215, 0, 2":return f.NpcType.UlGibbon;case"215, 1, 2":return f.NpcType.ZolGibbon;case"221, 0, 2":return f.NpcType.Dolmolm;case"221, 1, 2":return f.NpcType.Dolmdarl;case"224, 0, 2":return o>15?f.NpcType.Epsilon:f.NpcType.SinowZoa;case"224, 1, 2":return o>15?f.NpcType.Epsilon:f.NpcType.SinowZele;case"274, 0, 4":return f.NpcType.MerissaA;case"274, 1, 4":return f.NpcType.MerissaAA;case"276, 0, 4":return f.NpcType.Zu;case"276, 1, 4":return f.NpcType.Pazuzu;case"278, 0, 4":return f.NpcType.Dorphon;case"278, 1, 4":return f.NpcType.DorphonEclair;case"281, 0, 4":return r?f.NpcType.SaintMillion:f.NpcType.Kondrieu;case"281, 1, 4":return r?f.NpcType.Shambertin:f.NpcType.Kondrieu}switch(n+", "+e){case"66, 1":return f.NpcType.Monest;case"66, 2":return f.NpcType.Monest2;case"67, 1":return r?f.NpcType.SavageWolf:f.NpcType.BarbarousWolf;case"67, 2":return r?f.NpcType.SavageWolf2:f.NpcType.BarbarousWolf2;case"96, 1":return f.NpcType.GrassAssassin;case"96, 2":return f.NpcType.GrassAssassin2;case"98, 1":return f.NpcType.NanoDragon;case"100, 1":return r?f.NpcType.PofuillySlime:f.NpcType.PouillySlime;case"101, 1":return f.NpcType.PanArms;case"101, 2":return f.NpcType.PanArms2;case"129, 1":return f.NpcType.Garanz;case"129, 2":return f.NpcType.Garanz2;case"130, 1":return r?f.NpcType.SinowBeat:f.NpcType.SinowGold;case"131, 1":return f.NpcType.Canadine;case"132, 1":return f.NpcType.Canane;case"133, 1":return f.NpcType.Dubswitch;case"133, 2":return f.NpcType.Dubswitch2;case"160, 1":return f.NpcType.Delsaber;case"160, 2":return f.NpcType.Delsaber2;case"161, 1":return f.NpcType.ChaosSorcerer;case"161, 2":return f.NpcType.ChaosSorcerer2;case"162, 1":return f.NpcType.DarkGunner;case"164, 1":return f.NpcType.ChaosBringer;case"165, 1":return f.NpcType.DarkBelra;case"165, 2":return f.NpcType.DarkBelra2;case"167, 1":return f.NpcType.Bulclaw;case"168, 1":return f.NpcType.Claw;case"192, 1":return f.NpcType.Dragon;case"192, 2":return f.NpcType.GalGryphon;case"193, 1":return f.NpcType.DeRolLe;case"197, 1":return f.NpcType.VolOpt;case"200, 1":return f.NpcType.DarkFalz;case"202, 2":return f.NpcType.OlgaFlow;case"203, 2":return f.NpcType.BarbaRay;case"204, 2":return f.NpcType.GolDragon;case"216, 2":return f.NpcType.Gibbles;case"217, 2":return f.NpcType.Gee;case"218, 2":return f.NpcType.GiGue;case"219, 2":return f.NpcType.Deldepth;case"220, 2":return f.NpcType.Delbiter;case"222, 2":return f.NpcType.Morfos;case"223, 2":return f.NpcType.Recobox;case"225, 2":return f.NpcType.IllGill;case"272, 4":return f.NpcType.Astark;case"273, 4":return r?f.NpcType.SatelliteLizard:f.NpcType.Yowie;case"275, 4":return f.NpcType.Girtablulu}switch(n){case 4:return f.NpcType.FemaleFat;case 5:return f.NpcType.FemaleMacho;case 7:return f.NpcType.FemaleTall;case 10:return f.NpcType.MaleDwarf;case 11:return f.NpcType.MaleFat;case 12:return f.NpcType.MaleMacho;case 13:return f.NpcType.MaleOld;case 25:return f.NpcType.BlueSoldier;case 26:return f.NpcType.RedSoldier;case 27:return f.NpcType.Principal;case 28:return f.NpcType.Tekker;case 29:return f.NpcType.GuildLady;case 30:return f.NpcType.Scientist;case 31:return f.NpcType.Nurse;case 32:return f.NpcType.Irene}return f.NpcType.Unknown}Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.parse_quest=i;var d=(n(14),n(99)),f=n(12),m=n(34)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.QuestRenderer=void 0;var a=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(27),u=i(c),l=n(199),h=r(l),p=n(12),d=n(56),f=n(57),m=(0,h.default)(u);t.QuestRenderer=function(){function e(t){var n=this,r=t.on_select;o(this,e),this._renderer=new c.WebGLRenderer({antialias:!0}),this._raycaster=new c.Raycaster,this._pointer_position=new c.Vector2(0,0),this._scene=new c.Scene,this._quest=null,this._quest_entities_loaded=!1,this._area=null,this._objs=new Map,this._npcs=new Map,this._collision_geometry=null,this._obj_geometry=new c.Object3D,this._npc_geometry=new c.Object3D,this._on_select=null,this._hovered_data=null,this._selected_data=null,this._render_loop=function(){n._controls.update(),n._add_loaded_entities(),n._renderer.render(n._scene,n._camera),requestAnimationFrame(n._render_loop)},this._on_mouse_down=function(e){var t=n._selected_data,r=n._pick_entity(n._pointer_pos_to_device_coords(e));!n._hovered_data||r&&r.object===n._hovered_data.object||(n._hovered_data.object.material.color.set(n._get_color(n._hovered_data.entity,"normal")),n._hovered_data.object.material.transparent=!0),!n._selected_data||r&&r.object===n._selected_data.object||(n._selected_data.object.material.color.set(n._get_color(n._selected_data.entity,"normal")),n._selected_data.object.material.transparent=!0,n._selected_data.manipulating=!1),r?(r.object.material.color.set(n._get_color(r.entity,"selected")),r.object.material.transparent=!1,r.manipulating=!0,n._hovered_data=r,n._selected_data=r,n._controls.enabled=!1):(n._hovered_data=null,n._selected_data=null,n._controls.enabled=!0);var i=t&&r?t.object!==r.object:t!==r;i&&n._on_select&&n._on_select(r&&r.entity)},this._on_mouse_up=function(e){n._selected_data&&(n._selected_data.manipulating=!1,n._controls.enabled=!0)},this._on_mouse_move=function(e){var t=n._pointer_pos_to_device_coords(e);if(n._selected_data&&n._selected_data.manipulating){var r=n._selected_data,i=n._pick_terrain(t,r);i&&(r.entity.position={x:i.point.x,y:i.point.y+r.drag_y,z:i.point.z})}else{var o=n._hovered_data,a=n._pick_entity(t);!o||a&&a.object===o.object||(n._selected_data&&o.object===n._selected_data.object||(o.object.material.color.set(n._get_color(o.entity,"normal")),o.object.material.transparent=!0),n._hovered_data=null),!a||o&&a.object===o.object||(n._selected_data&&a.object===n._selected_data.object||(a.object.material.color.set(n._get_color(a.entity,"hover")),a.object.material.transparent=!0),n._hovered_data=a)}},this._on_select=r,this._renderer.domElement.addEventListener("mousedown",this._on_mouse_down),this._renderer.domElement.addEventListener("mouseup",this._on_mouse_up),this._renderer.domElement.addEventListener("mousemove",this._on_mouse_move),this._camera=new c.PerspectiveCamera(75,1,.1,5e3),this._controls=new m(this._camera,this._renderer.domElement),this._scene.background=new c.Color(526344),this._scene.add(new c.HemisphereLight(16777215,5263440,1)),this._scene.add(this._obj_geometry),this._scene.add(this._npc_geometry),requestAnimationFrame(this._render_loop)}return s(e,[{key:"set_size",value:function(e,t){this._renderer.setSize(e,t),this._camera.aspect=e/t,this._camera.updateProjectionMatrix()}},{key:"set_quest_and_area",value:function(e,t){var n=!1;if(this._area!==t&&(this._area=t,n=!0),this._quest!==e){if(this._quest=e,this._objs.clear(),this._npcs.clear(),e){
var r=!0,i=!1,o=void 0;try{for(var a,s=e.objects[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value,u=this._objs.get(c.area_id)||[];u.push(c),this._objs.set(c.area_id,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var l=!0,h=!1,p=void 0;try{for(var d,f=e.npcs[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var m=d.value,v=this._npcs.get(m.area_id)||[];v.push(m),this._npcs.set(m.area_id,v)}}catch(e){h=!0,p=e}finally{try{!l&&f.return&&f.return()}finally{if(h)throw p}}}n=!0}n&&this._update_geometry()}},{key:"_update_geometry",value:function(){var e=this;this._scene.remove(this._obj_geometry),this._scene.remove(this._npc_geometry),this._obj_geometry=new c.Object3D,this._npc_geometry=new c.Object3D,this._scene.add(this._obj_geometry),this._scene.add(this._npc_geometry),this._quest_entities_loaded=!1,this._scene.remove(this._collision_geometry),this._quest&&this._area&&!function(){var t=e._quest.episode,n=e._area.id,r=e._quest.area_variants.find(function(e){return e.area.id===n}),i=r&&r.id||0;(0,d.get_area_collision_geometry)(t,n,i).then(function(t){e._quest&&e._area&&(e._scene.remove(e._collision_geometry),e._reset_camera(),e._collision_geometry=t,e._scene.add(t))})}()}},{key:"_reset_camera",value:function(){this._controls.reset(),this._camera.position.set(0,800,700),this._camera.lookAt(new c.Vector3(0,0,0))}},{key:"_add_loaded_entities",value:function(){if(this._quest&&this._area&&!this._quest_entities_loaded){var e=!0,t=!0,n=!1,r=void 0;try{for(var i,o=this._quest.objects[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.area_id===this._area.id&&(a.object3d?this._obj_geometry.add(a.object3d):e=!1)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}var s=!0,c=!1,u=void 0;try{for(var l,h=this._quest.npcs[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var p=l.value;p.area_id===this._area.id&&(p.object3d?this._npc_geometry.add(p.object3d):e=!1)}}catch(e){c=!0,u=e}finally{try{!s&&h.return&&h.return()}finally{if(c)throw u}}this._quest_entities_loaded=e}}},{key:"_pointer_pos_to_device_coords",value:function(e){var t=this._renderer.getSize(),n=t.width,r=t.height;return new c.Vector2(e.offsetX/n*2-1,e.offsetY/r*-2+1)}},{key:"_pick_entity",value:function(e){this._raycaster.setFromCamera(e,this._camera);var t=this._raycaster.intersectObjects(this._obj_geometry.children),n=a(t,1),r=n[0],i=this._raycaster.intersectObjects(this._npc_geometry.children),o=a(i,1),s=o[0];if(!r&&!s)return null;var u=r?r.distance:1/0,l=s?s.distance:1/0,h=u<l?r:s;h.entity=h.object.userData.entity,h.drag_adjust=h.object.position.clone().sub(h.point),h.drag_y=0,this._raycaster.set(h.object.position,new c.Vector3(0,-1,0));var p=this._raycaster.intersectObject(this._collision_geometry.children[0],!0),d=a(p,1),f=d[0];return f&&(h.drag_adjust.sub(new c.Vector3(0,f.distance,0)),h.drag_y+=f.distance),h}},{key:"_pick_terrain",value:function(e,t){this._raycaster.setFromCamera(e,this._camera),this._raycaster.ray.origin.add(t.drag_adjust);var n=this._raycaster.intersectObject(this._collision_geometry.children[0],!0),r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;if(c.face.normal.y>.75)return c}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return null}},{key:"_get_color",value:function(e,t){var n=e instanceof p.QuestNpc;switch(t){default:case"normal":return n?f.NPC_COLOR:f.OBJECT_COLOR;case"hover":return n?f.NPC_HOVER_COLOR:f.OBJECT_HOVER_COLOR;case"selected":return n?f.NPC_SELECTED_COLOR:f.OBJECT_SELECTED_COLOR}}},{key:"dom_element",get:function(){return this._renderer.domElement}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationComponent=void 0;var c,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(21),h=r(l),p=n(61),d=n(34),f=n(55),m=n(106),v=n(103),g=n(104),y=n(105);t.ApplicationComponent=(0,p.observer)(c=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r._main_container_style=Object.assign(m.Style.fill(),{display:"flex",flexDirection:"column"}),r._header_style={padding:"0 20px",display:"flex"},r._controls_style={flex:1,padding:"10px 30px",alignSelf:"center"},r._area_select={margin:"0 10px"},r._main_style={flex:1,display:"flex",overflow:"hidden"},r._area_3d_style={flex:1},r._on_file_change=function(e){if(e.currentTarget instanceof HTMLInputElement){var t=e.currentTarget.files[0];t&&(0,f.load_file)(t)}},r._on_area_select_change=function(e){if(e.currentTarget instanceof HTMLSelectElement){var t=parseInt(e.currentTarget.value,10);(0,f.current_area_id_changed)(t)}},i=n,a(r,i)}return s(t,e),u(t,[{key:"render",value:function(){var e=d.application_state.current_quest,t=e?[].concat(i(e.area_variants)).map(function(e){return e.area}):null,n=d.application_state.current_area,r=n&&n.id;return h.default.createElement("div",{style:this._main_container_style},h.default.createElement("div",{style:this._header_style},h.default.createElement("h1",null,"Phantasmal Quest Viewer"),h.default.createElement("div",{style:this._controls_style},h.default.createElement("input",{type:"file",accept:".qst",onChange:this._on_file_change}),t?h.default.createElement("select",{style:this._area_select,onChange:this._on_area_select_change,defaultValue:r},t.map(function(e){return h.default.createElement("option",{key:e.id,value:e.id},e.name)})):null)),h.default.createElement("div",{style:this._main_style},h.default.createElement(y.QuestInfoComponent,{quest:e}),h.default.createElement(v.Area3DComponent,{style:this._area_3d_style,quest:e,area:n}),h.default.createElement(g.EntityInfoComponent,{entity:d.application_state.selected_entity})))}}]),t}(h.default.Component))||c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Area3DComponent=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(21),u=r(c),l=n(55),h=n(101);t.Area3DComponent=function(e){function t(){var e,n,r,a;i(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r._renderer=new h.QuestRenderer({on_select:r._on_select.bind(r)}),r._modify_dom=function(e){r._renderer.set_size(e.clientWidth,e.clientHeight),e.appendChild(r._renderer.dom_element)},a=n,o(r,a)}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("div",{style:this.props.style,ref:this._modify_dom})}},{key:"componentWillReceiveProps",value:function(e){var t=e.quest,n=e.area;this._renderer.set_quest_and_area(t,n)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"_on_select",value:function(e){(0,l.entity_selected)(e)}}]),t}(u.default.Component)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EntityInfoComponent=void 0;var i=n(21),o=r(i),a=n(61),s=n(12),c={width:200,padding:10,display:"flex",flexDirection:"column"},u={borderCollapse:"collapse"};t.EntityInfoComponent=(0,a.observer)(function(e){var t=e.entity;if(t){var n=t.position,r=n.x,i=n.y,a=n.z,l=null,h=null;return t instanceof s.QuestObject&&(l=o.default.createElement("tr",null,o.default.createElement("td",{colSpan:"2"},t.type.name))),t instanceof s.QuestNpc&&(l=o.default.createElement("tr",null,o.default.createElement("td",{colSpan:"2"},t.type.name))),o.default.createElement("div",{style:c},o.default.createElement("table",{style:u},o.default.createElement("tbody",null,l,o.default.createElement("tr",null,o.default.createElement("td",null,"Section: "),o.default.createElement("td",null,t.section_id)),o.default.createElement("tr",null,o.default.createElement("td",null,"Position: "),o.default.createElement("td",null,Math.round(r),", ",Math.round(i),", ",Math.round(a))),h)))}return o.default.createElement("div",{style:c})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){var t=e.quest;if(!t)return u.default.createElement("div",{style:h});var n=function(){var e=4===t.episode?"IV":2===t.episode?"II":"I",n=new Map,r=!0,o=!1,a=void 0;try{for(var c,m=t.npcs[Symbol.iterator]();!(r=(c=m.next()).done);r=!0){var v=c.value,g=n.get(v.type)||0;n.set(v.type,g+1)}}catch(e){o=!0,a=e}finally{try{!r&&m.return&&m.return()}finally{if(o)throw a}}var y=8*(n.get(l.NpcType.Canane)||0);n=[].concat(i(n)).sort(function(e,t){return e[0].id-t[0].id});var b=n.map(function(e){var t=s(e,2),n=t[0],r=t[1],i=n===l.NpcType.Canadine?y:0;return u.default.createElement("tr",{key:n.id},u.default.createElement("td",null,n.name,":"),u.default.createElement("td",null,r+i))});return{v:u.default.createElement("div",{style:h},u.default.createElement("table",{style:p},u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("td",null,"Name:"),u.default.createElement("td",null,t.name)),u.default.createElement("tr",null,u.default.createElement("td",null,"Episode:"),u.default.createElement("td",null,e)),u.default.createElement("tr",null,u.default.createElement("td",{colSpan:"2",style:d},t.short_description)),u.default.createElement("tr",null,u.default.createElement("td",{colSpan:"2",style:d},t.long_description)))),u.default.createElement("div",{style:f},u.default.createElement("table",{style:p},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"NPC Counts"))),u.default.createElement("tbody",null,b))))}}();return"object"===("undefined"==typeof n?"undefined":a(n))?n.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.QuestInfoComponent=o;var c=n(21),u=r(c),l=n(12),h={width:280,padding:10,display:"flex",flexDirection:"column"},p={borderCollapse:"collapse"},d={whiteSpace:"pre",padding:"10px 0"},f={overflow:"auto"}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Style={fill:function(){return{position:"absolute",top:0,bottom:0,left:0,right:0}}}},function(e,t,n){"undefined"==typeof Promise&&(n(123).enable(),window.Promise=n(122)),n(200),Object.assign=n(4)},function(e,t,n){"use strict";e.exports=function(){var e=n(109),t={};return t.createDomain=t.create=function(){function t(e){n.emit("error",e)}var n=new e.EventEmitter;return n.add=function(e){e.on("error",t)},n.remove=function(e){e.removeListener("error",t)},n.bind=function(e){return function(){var n=Array.prototype.slice.call(arguments);try{e.apply(null,n)}catch(e){t(e)}}},n.intercept=function(e){return function(n){if(n)t(n);else{var r=Array.prototype.slice.call(arguments,1);try{e.apply(null,r)}catch(e){t(e)}}}},n.run=function(e){try{e()}catch(e){t(e)}return this},n.dispose=function(){return this.removeAllListeners(),this},n.enter=n.exit=function(){return this},n},t}.call(this)},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),i=u.length,c=0;c<i;c++)u[c].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"use strict";function n(e){return e.replace(r,function(e,t){return t.toUpperCase()})}var r=/-(.)/g;e.exports=n},function(e,t,n){"use strict";function r(e){return i(e.replace(o,"ms-"))}var i=n(110),o=/^-ms-/;e.exports=r},function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e===t||!i(e)&&(i(t)?r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var i=n(120);e.exports=r},function(e,t,n){"use strict";function r(e){var t=e.length;if(Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e?a(!1):void 0,"number"!=typeof t?a(!1):void 0,0===t||t-1 in e?void 0:a(!1),"function"==typeof e.callee?a(!1):void 0,e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}function i(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function o(e){return i(e)?Array.isArray(e)?e.slice():r(e):[e]}var a=n(1);e.exports=o},function(e,t,n){"use strict";function r(e){var t=e.match(l);return t&&t[1].toLowerCase()}function i(e,t){var n=u;u?void 0:c(!1);var i=r(e),o=i&&s(i);if(o){n.innerHTML=o[1]+e+o[2];for(var l=o[0];l--;)n=n.lastChild}else n.innerHTML=e;var h=n.getElementsByTagName("script");h.length&&(t?void 0:c(!1),a(h).forEach(t));for(var p=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return p}var o=n(6),a=n(113),s=n(115),c=n(1),u=o.canUseDOM?document.createElement("div"):null,l=/^\s*<(\w+)/;e.exports=i},function(e,t,n){"use strict";function r(e){return a?void 0:o(!1),p.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||("*"===e?a.innerHTML="<link />":a.innerHTML="<"+e+"></"+e+">",s[e]=!a.firstChild),s[e]?p[e]:null}var i=n(6),o=n(1),a=i.canUseDOM?document.createElement("div"):null,s={},c=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],l=[3,"<table><tbody><tr>","</tr></tbody></table>"],h=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:c,option:c,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:l,th:l},d=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];d.forEach(function(e){p[e]=h,s[e]=!0}),e.exports=r},function(e,t){"use strict";function n(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=n},function(e,t){"use strict";function n(e){return e.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;e.exports=n},function(e,t,n){"use strict";function r(e){return i(e).replace(o,"-ms-")}var i=n(117),o=/^ms-/;e.exports=r},function(e,t){"use strict";function n(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}e.exports=n},function(e,t,n){"use strict";function r(e){return i(e)&&3==e.nodeType}var i=n(119);e.exports=r},function(e,t){"use strict";function n(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}e.exports=n},function(e,t,n){"use strict";function r(e){var t=new i(i._61);return t._81=1,t._65=e,t}var i=n(63);e.exports=i;var o=r(!0),a=r(!1),s=r(null),c=r(void 0),u=r(0),l=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return c;if(e===!0)return o;if(e===!1)return a;if(0===e)return u;if(""===e)return l;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(a,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._81;)s=s._65;return 1===s._81?r(a,s._65):(2===s._81&&n(s._65),void s.then(function(e){r(a,e)},n))}var c=s.then;if("function"==typeof c){var u=new i(c.bind(s));return void u.then(function(e){r(a,e)},n)}}t[a]=s,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)r(a,t[a])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){"use strict";function r(){u=!1,s._10=null,s._97=null}function i(e){function t(t){(e.allRejections||a(h[t].error,e.whitelist||c))&&(h[t].displayId=l++,e.onUnhandled?(h[t].logged=!0,e.onUnhandled(h[t].displayId,h[t].error)):(h[t].logged=!0,o(h[t].displayId,h[t].error)))}function n(t){h[t].logged&&(e.onHandled?e.onHandled(h[t].displayId,h[t].error):h[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+h[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+h[t].displayId+".")))}e=e||{},u&&r(),u=!0;var i=0,l=0,h={};s._10=function(e){2===e._81&&h[e._72]&&(h[e._72].logged?n(e._72):clearTimeout(h[e._72].timeout),delete h[e._72])},s._97=function(e,n){0===e._45&&(e._72=i++,h[e._72]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._72),a(n,c)?100:2e3),logged:!1})}}function o(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):");var n=(t&&(t.stack||t))+"";n.split("\n").forEach(function(e){console.warn("  "+e)})}function a(e,t){return t.some(function(t){return e instanceof t})}var s=n(63),c=[ReferenceError,TypeError,RangeError],u=!1;t.disable=r,t.enable=i},function(e,t){"use strict";var n={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}};e.exports=n},function(e,t,n){"use strict";var r=n(5),i=n(59),o={focusDOMComponent:function(){i(r.getNodeFromInstance(this))}};e.exports=o},function(e,t,n){"use strict";function r(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function i(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function o(e){switch(e){case"topCompositionStart":return S.compositionStart;case"topCompositionEnd":return S.compositionEnd;case"topCompositionUpdate":return S.compositionUpdate}}function a(e,t){return"topKeyDown"===e&&t.keyCode===b}function s(e,t){switch(e){case"topKeyUp":return y.indexOf(t.keyCode)!==-1;case"topKeyDown":return t.keyCode!==b;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function c(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function u(e,t,n,r){var i,u;if(_?i=o(e):C?s(e,n)&&(i=S.compositionEnd):a(e,n)&&(i=S.compositionStart),!i)return null;T&&(C||i!==S.compositionStart?i===S.compositionEnd&&C&&(u=C.getData()):C=m.getPooled(r));var l=v.getPooled(i,t,n,r);if(u)l.data=u;else{var h=c(n);null!==h&&(l.data=h)}return d.accumulateTwoPhaseDispatches(l),l}function l(e,t){switch(e){case"topCompositionEnd":return c(t);case"topKeyPress":var n=t.which;return n!==E?null:(R=!0,M);case"topTextInput":var r=t.data;return r===M&&R?null:r;default:return null}}function h(e,t){if(C){if("topCompositionEnd"===e||!_&&s(e,t)){var n=C.getData();return m.release(C),C=null,n}return null}switch(e){case"topPaste":return null;case"topKeyPress":return t.which&&!i(t)?String.fromCharCode(t.which):null;case"topCompositionEnd":return T?null:t.data;default:return null}}function p(e,t,n,r){var i;if(i=x?l(e,n):h(e,n),!i)return null;var o=g.getPooled(S.beforeInput,t,n,r);return o.data=i,d.accumulateTwoPhaseDispatches(o),o}var d=n(24),f=n(6),m=n(132),v=n(169),g=n(172),y=[9,13,27,32],b=229,_=f.canUseDOM&&"CompositionEvent"in window,w=null;f.canUseDOM&&"documentMode"in document&&(w=document.documentMode);var x=f.canUseDOM&&"TextEvent"in window&&!w&&!r(),T=f.canUseDOM&&(!_||w&&w>8&&w<=11),E=32,M=String.fromCharCode(E),S={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},R=!1,C=null,A={eventTypes:S,extractEvents:function(e,t,n,r){return[u(e,t,n,r),p(e,t,n,r)]}};e.exports=A},function(e,t,n){"use strict";var r=n(65),i=n(6),o=(n(8),n(111),n(178)),a=n(118),s=n(121),c=(n(2),s(function(e){return a(e)})),u=!1,l="cssFloat";if(i.canUseDOM){var h=document.createElement("div").style;try{h.font=""}catch(e){u=!0}void 0===document.documentElement.style.cssFloat&&(l="styleFloat")}var p={createMarkupForStyles:function(e,t){var n="";for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];null!=i&&(n+=c(r)+":",n+=o(r,i,t)+";")}return n||null},setValueForStyles:function(e,t,n){var i=e.style;for(var a in t)if(t.hasOwnProperty(a)){var s=o(a,t[a],n);if("float"!==a&&"cssFloat"!==a||(a=l),s)i[a]=s;else{var c=u&&r.shorthandPropertyExpansions[a];if(c)for(var h in c)i[h]="";else i[a]=""}}}};e.exports=p},function(e,t,n){"use strict";function r(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function i(e){var t=T.getPooled(R.change,A,e,E(e));b.accumulateTwoPhaseDispatches(t),x.batchedUpdates(o,t)}function o(e){y.enqueueEvents(e),y.processEventQueue(!1)}function a(e,t){C=e,A=t,C.attachEvent("onchange",i)}function s(){C&&(C.detachEvent("onchange",i),C=null,A=null)}function c(e,t){if("topChange"===e)return t}function u(e,t,n){"topFocus"===e?(s(),a(t,n)):"topBlur"===e&&s()}function l(e,t){C=e,A=t,L=e.value,P=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(C,"value",I),C.attachEvent?C.attachEvent("onpropertychange",p):C.addEventListener("propertychange",p,!1)}function h(){C&&(delete C.value,C.detachEvent?C.detachEvent("onpropertychange",p):C.removeEventListener("propertychange",p,!1),C=null,A=null,L=null,P=null)}function p(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==L&&(L=t,i(e))}}function d(e,t){if("topInput"===e)return t}function f(e,t,n){"topFocus"===e?(h(),l(t,n)):"topBlur"===e&&h()}function m(e,t){if(("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)&&C&&C.value!==L)return L=C.value,A}function v(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function g(e,t){if("topClick"===e)return t}var y=n(23),b=n(24),_=n(6),w=n(5),x=n(9),T=n(10),E=n(49),M=n(50),S=n(82),R={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}},C=null,A=null,L=null,P=null,O=!1;_.canUseDOM&&(O=M("change")&&(!document.documentMode||document.documentMode>8));var k=!1;_.canUseDOM&&(k=M("input")&&(!document.documentMode||document.documentMode>11));var I={get:function(){return P.get.call(this)},set:function(e){L=""+e,P.set.call(this,e)}},D={eventTypes:R,extractEvents:function(e,t,n,i){var o,a,s=t?w.getNodeFromInstance(t):window;if(r(s)?O?o=c:a=u:S(s)?k?o=d:(o=m,a=f):v(s)&&(o=g),o){var l=o(e,t);if(l){var h=T.getPooled(R.change,l,n,i);return h.type="change",b.accumulateTwoPhaseDispatches(h),h}}a&&a(e,s,t)}};e.exports=D},function(e,t,n){"use strict";var r=n(3),i=n(15),o=n(6),a=n(114),s=n(7),c=(n(1),{dangerouslyReplaceNodeWithMarkup:function(e,t){if(o.canUseDOM?void 0:r("56"),t?void 0:r("57"),"HTML"===e.nodeName?r("58"):void 0,"string"==typeof t){var n=a(t,s)[0];e.parentNode.replaceChild(n,e)}else i.replaceChildWithTree(e,t)}});e.exports=c},function(e,t){"use strict";var n=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"];e.exports=n},function(e,t,n){"use strict";var r=n(24),i=n(5),o=n(30),a={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},s={eventTypes:a,extractEvents:function(e,t,n,s){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement))return null;if("topMouseOut"!==e&&"topMouseOver"!==e)return null;var c;if(s.window===s)c=s;else{var u=s.ownerDocument;c=u?u.defaultView||u.parentWindow:window}var l,h;if("topMouseOut"===e){l=t;var p=n.relatedTarget||n.toElement;h=p?i.getClosestInstanceFromNode(p):null}else l=null,h=t;if(l===h)return null;var d=null==l?c:i.getNodeFromInstance(l),f=null==h?c:i.getNodeFromInstance(h),m=o.getPooled(a.mouseLeave,l,n,s);m.type="mouseleave",m.target=d,m.relatedTarget=f;var v=o.getPooled(a.mouseEnter,h,n,s);return v.type="mouseenter",v.target=f,v.relatedTarget=d,r.accumulateEnterLeaveDispatches(m,v,l,h),[m,v]}};e.exports=s},function(e,t,n){"use strict";function r(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var i=n(4),o=n(13),a=n(80);i(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,i=this.getText(),o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=i.slice(e,s),this._fallbackText}}),o.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";var r=n(16),i=r.injection.MUST_USE_PROPERTY,o=r.injection.HAS_BOOLEAN_VALUE,a=r.injection.HAS_NUMERIC_VALUE,s=r.injection.HAS_POSITIVE_NUMERIC_VALUE,c=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,u={
isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+r.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:o,allowTransparency:0,alt:0,as:0,async:o,autoComplete:0,autoPlay:o,capture:o,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:i|o,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:o,coords:0,crossOrigin:0,data:0,dateTime:0,default:o,defer:o,dir:0,disabled:o,download:c,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:o,formTarget:0,frameBorder:0,headers:0,height:0,hidden:o,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:o,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:i|o,muted:i|o,name:0,nonce:0,noValidate:o,open:o,optimum:0,pattern:0,placeholder:0,playsInline:o,poster:0,preload:0,profile:0,radioGroup:0,readOnly:o,referrerPolicy:0,rel:0,required:o,reversed:o,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:o,scrolling:0,seamless:o,selected:i|o,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:o,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};e.exports=u},function(e,t,n){(function(t){"use strict";function r(e,t,n,r){var i=void 0===e[n];null!=t&&i&&(e[n]=o(t,!0))}var i=n(17),o=n(81),a=(n(41),n(51)),s=n(84),c=(n(2),{instantiateChildren:function(e,t,n,i){if(null==e)return null;var o={};return s(e,r,o),o},updateChildren:function(e,t,n,r,s,c,u,l,h){if(t||e){var p,d;for(p in t)if(t.hasOwnProperty(p)){d=e&&e[p];var f=d&&d._currentElement,m=t[p];if(null!=d&&a(f,m))i.receiveComponent(d,m,s,l),t[p]=d;else{d&&(r[p]=i.getHostNode(d),i.unmountComponent(d,!1));var v=o(m,!0);t[p]=v;var g=i.mountComponent(v,s,c,u,l,h);n.push(g)}}for(p in e)!e.hasOwnProperty(p)||t&&t.hasOwnProperty(p)||(d=e[p],r[p]=i.getHostNode(d),i.unmountComponent(d,!1))}},unmountChildren:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];i.unmountComponent(r,t)}}});e.exports=c}).call(t,n(62))},function(e,t,n){"use strict";var r=n(37),i=n(142),o={processChildrenUpdates:i.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup};e.exports=o},function(e,t,n){"use strict";function r(e){}function i(e,t){}function o(e){return!(!e.prototype||!e.prototype.isReactComponent)}function a(e){return!(!e.prototype||!e.prototype.isPureReactComponent)}var s=n(3),c=n(4),u=n(18),l=n(43),h=n(11),p=n(44),d=n(25),f=(n(8),n(75)),m=n(17),v=n(22),g=(n(1),n(36)),y=n(51),b=(n(2),{ImpureClass:0,PureClass:1,StatelessFunctional:2});r.prototype.render=function(){var e=d.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return i(e,t),t};var _=1,w={construct:function(e){this._currentElement=e,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(e,t,n,c){this._context=c,this._mountOrder=_++,this._hostParent=t,this._hostContainerInfo=n;var l,h=this._currentElement.props,p=this._processContext(c),f=this._currentElement.type,m=e.getUpdateQueue(),g=o(f),y=this._constructComponent(g,h,p,m);g||null!=y&&null!=y.render?a(f)?this._compositeType=b.PureClass:this._compositeType=b.ImpureClass:(l=y,i(f,l),null===y||y===!1||u.isValidElement(y)?void 0:s("105",f.displayName||f.name||"Component"),y=new r(f),this._compositeType=b.StatelessFunctional);y.props=h,y.context=p,y.refs=v,y.updater=m,this._instance=y,d.set(y,this);var w=y.state;void 0===w&&(y.state=w=null),"object"!=typeof w||Array.isArray(w)?s("106",this.getName()||"ReactCompositeComponent"):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var x;return x=y.unstable_handleError?this.performInitialMountWithErrorHandling(l,t,n,e,c):this.performInitialMount(l,t,n,e,c),y.componentDidMount&&e.getReactMountReady().enqueue(y.componentDidMount,y),x},_constructComponent:function(e,t,n,r){return this._constructComponentWithoutOwner(e,t,n,r)},_constructComponentWithoutOwner:function(e,t,n,r){var i=this._currentElement.type;return e?new i(t,n,r):i(t,n,r)},performInitialMountWithErrorHandling:function(e,t,n,r,i){var o,a=r.checkpoint();try{o=this.performInitialMount(e,t,n,r,i)}catch(s){r.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=r.checkpoint(),this._renderedComponent.unmountComponent(!0),r.rollback(a),o=this.performInitialMount(e,t,n,r,i)}return o},performInitialMount:function(e,t,n,r,i){var o=this._instance,a=0;o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===e&&(e=this._renderValidatedComponent());var s=f.getType(e);this._renderedNodeType=s;var c=this._instantiateReactComponent(e,s!==f.EMPTY);this._renderedComponent=c;var u=m.mountComponent(c,r,t,n,this._processChildContext(i),a);return u},getHostNode:function(){return m.getHostNode(this._renderedComponent)},unmountComponent:function(e){if(this._renderedComponent){var t=this._instance;if(t.componentWillUnmount&&!t._calledComponentWillUnmount)if(t._calledComponentWillUnmount=!0,e){var n=this.getName()+".componentWillUnmount()";p.invokeGuardedCallback(n,t.componentWillUnmount.bind(t))}else t.componentWillUnmount();this._renderedComponent&&(m.unmountComponent(this._renderedComponent,e),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,d.remove(t)}},_maskContext:function(e){var t=this._currentElement.type,n=t.contextTypes;if(!n)return v;var r={};for(var i in n)r[i]=e[i];return r},_processContext:function(e){var t=this._maskContext(e);return t},_processChildContext:function(e){var t,n=this._currentElement.type,r=this._instance;if(r.getChildContext&&(t=r.getChildContext()),t){"object"!=typeof n.childContextTypes?s("107",this.getName()||"ReactCompositeComponent"):void 0;for(var i in t)i in n.childContextTypes?void 0:s("108",this.getName()||"ReactCompositeComponent",i);return c({},e,t)}return e},_checkContextTypes:function(e,t,n){},receiveComponent:function(e,t,n){var r=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(t,r,e,i,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement?m.receiveComponent(this,this._pendingElement,e,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(e,t,n,r,i){var o=this._instance;null==o?s("136",this.getName()||"ReactCompositeComponent"):void 0;var a,c=!1;this._context===i?a=o.context:(a=this._processContext(i),c=!0);var u=t.props,l=n.props;t!==n&&(c=!0),c&&o.componentWillReceiveProps&&o.componentWillReceiveProps(l,a);var h=this._processPendingState(l,a),p=!0;this._pendingForceUpdate||(o.shouldComponentUpdate?p=o.shouldComponentUpdate(l,h,a):this._compositeType===b.PureClass&&(p=!g(u,l)||!g(o.state,h))),this._updateBatchNumber=null,p?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,l,h,a,e,i)):(this._currentElement=n,this._context=i,o.props=l,o.state=h,o.context=a)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(i&&1===r.length)return r[0];for(var o=c({},i?r[0]:n.state),a=i?1:0;a<r.length;a++){var s=r[a];c(o,"function"==typeof s?s.call(n,o,e,t):s)}return o},_performComponentUpdate:function(e,t,n,r,i,o){var a,s,c,u=this._instance,l=Boolean(u.componentDidUpdate);l&&(a=u.props,s=u.state,c=u.context),u.componentWillUpdate&&u.componentWillUpdate(t,n,r),this._currentElement=e,this._context=o,u.props=t,u.state=n,u.context=r,this._updateRenderedComponent(i,o),l&&i.getReactMountReady().enqueue(u.componentDidUpdate.bind(u,a,s,c),u)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,r=n._currentElement,i=this._renderValidatedComponent(),o=0;if(y(r,i))m.receiveComponent(n,i,e,this._processChildContext(t));else{var a=m.getHostNode(n);m.unmountComponent(n,!1);var s=f.getType(i);this._renderedNodeType=s;var c=this._instantiateReactComponent(i,s!==f.EMPTY);this._renderedComponent=c;var u=m.mountComponent(c,e,this._hostParent,this._hostContainerInfo,this._processChildContext(t),o);this._replaceNodeWithMarkup(a,u,n)}},_replaceNodeWithMarkup:function(e,t,n){l.replaceNodeWithMarkup(e,t,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e,t=this._instance;return e=t.render()},_renderValidatedComponent:function(){var e;if(this._compositeType!==b.StatelessFunctional){h.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{h.current=null}}else e=this._renderValidatedComponentWithoutOwnerOrContext();return null===e||e===!1||u.isValidElement(e)?void 0:s("109",this.getName()||"ReactCompositeComponent"),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n?s("110"):void 0;var r=t.getPublicInstance(),i=n.refs===v?n.refs={}:n.refs;i[e]=r},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return this._compositeType===b.StatelessFunctional?null:e},_instantiateReactComponent:null};e.exports=w},function(e,t,n){"use strict";var r=n(5),i=n(150),o=n(74),a=n(17),s=n(9),c=n(163),u=n(179),l=n(79),h=n(187);n(2);i.inject();var p={findDOMNode:u,render:o.render,unmountComponentAtNode:o.unmountComponentAtNode,version:c,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:h};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:r.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=l(e)),e?r.getNodeFromInstance(e):null}},Mount:o,Reconciler:a});e.exports=p},function(e,t,n){"use strict";function r(e){if(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function i(e,t){t&&(Y[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML?m("137",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""):void 0),null!=t.dangerouslySetInnerHTML&&(null!=t.children?m("60"):void 0,"object"==typeof t.dangerouslySetInnerHTML&&G in t.dangerouslySetInnerHTML?void 0:m("61")),null!=t.style&&"object"!=typeof t.style?m("62",r(e)):void 0)}function o(e,t,n,r){if(!(r instanceof k)){var i=e._hostContainerInfo,o=i._node&&i._node.nodeType===H,s=o?i._node:i._ownerDocument;F(t,s),r.getReactMountReady().enqueue(a,{inst:e,registrationName:t,listener:n})}}function a(){var e=this;T.putListener(e.inst,e.registrationName,e.listener)}function s(){var e=this;C.postMountWrapper(e)}function c(){var e=this;P.postMountWrapper(e)}function u(){var e=this;A.postMountWrapper(e)}function l(){var e=this;e._rootNodeID?void 0:m("63");var t=U(e);switch(t?void 0:m("64"),e._tag){case"iframe":case"object":e._wrapperState.listeners=[M.trapBubbledEvent("topLoad","load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var n in W)W.hasOwnProperty(n)&&e._wrapperState.listeners.push(M.trapBubbledEvent(n,W[n],t));break;case"source":e._wrapperState.listeners=[M.trapBubbledEvent("topError","error",t)];break;case"img":e._wrapperState.listeners=[M.trapBubbledEvent("topError","error",t),M.trapBubbledEvent("topLoad","load",t)];break;case"form":e._wrapperState.listeners=[M.trapBubbledEvent("topReset","reset",t),M.trapBubbledEvent("topSubmit","submit",t)];break;case"input":case"select":case"textarea":e._wrapperState.listeners=[M.trapBubbledEvent("topInvalid","invalid",t)]}}function h(){L.postUpdateWrapper(this)}function p(e){J.call(K,e)||(Z.test(e)?void 0:m("65",e),K[e]=!0)}function d(e,t){return e.indexOf("-")>=0||null!=t.is}function f(e){var t=e.type;p(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var m=n(3),v=n(4),g=n(125),y=n(127),b=n(15),_=n(38),w=n(16),x=n(67),T=n(23),E=n(39),M=n(29),S=n(68),R=n(5),C=n(143),A=n(144),L=n(69),P=n(147),O=(n(8),n(156)),k=n(161),I=(n(7),n(32)),D=(n(1),n(50),n(36),n(52),n(2),S),N=T.deleteListener,U=R.getNodeFromInstance,F=M.listenTo,j=E.registrationNameModules,B={string:!0,number:!0},z="style",G="__html",V={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},H=11,W={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},X={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},q={listing:!0,pre:!0,textarea:!0},Y=v({menuitem:!0},X),Z=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,K={},J={}.hasOwnProperty,Q=1;f.displayName="ReactDOMComponent",f.Mixin={mountComponent:function(e,t,n,r){this._rootNodeID=Q++,this._domID=n._idCounter++,this._hostParent=t,this._hostContainerInfo=n;var o=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(l,this);break;case"input":C.mountWrapper(this,o,t),o=C.getHostProps(this,o),e.getReactMountReady().enqueue(l,this);break;case"option":A.mountWrapper(this,o,t),o=A.getHostProps(this,o);break;case"select":L.mountWrapper(this,o,t),o=L.getHostProps(this,o),e.getReactMountReady().enqueue(l,this);break;case"textarea":P.mountWrapper(this,o,t),o=P.getHostProps(this,o),e.getReactMountReady().enqueue(l,this)}i(this,o);var a,h;null!=t?(a=t._namespaceURI,h=t._tag):n._tag&&(a=n._namespaceURI,h=n._tag),(null==a||a===_.svg&&"foreignobject"===h)&&(a=_.html),a===_.html&&("svg"===this._tag?a=_.svg:"math"===this._tag&&(a=_.mathml)),this._namespaceURI=a;var p;if(e.useCreateElement){var d,f=n._ownerDocument;if(a===_.html)if("script"===this._tag){var m=f.createElement("div"),v=this._currentElement.type;m.innerHTML="<"+v+"></"+v+">",d=m.removeChild(m.firstChild)}else d=o.is?f.createElement(this._currentElement.type,o.is):f.createElement(this._currentElement.type);else d=f.createElementNS(a,this._currentElement.type);R.precacheNode(this,d),this._flags|=D.hasCachedChildNodes,this._hostParent||x.setAttributeForRoot(d),this._updateDOMProperties(null,o,e);var y=b(d);this._createInitialChildren(e,o,r,y),p=y}else{var w=this._createOpenTagMarkupAndPutListeners(e,o),T=this._createContentMarkup(e,o,r);p=!T&&X[this._tag]?w+"/>":w+">"+T+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(s,this),o.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"textarea":e.getReactMountReady().enqueue(c,this),o.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"select":o.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"button":o.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(u,this)}return p},_createOpenTagMarkupAndPutListeners:function(e,t){var n="<"+this._currentElement.type;for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];if(null!=i)if(j.hasOwnProperty(r))i&&o(this,r,i,e);else{r===z&&(i&&(i=this._previousStyleCopy=v({},t.style)),i=y.createMarkupForStyles(i,this));var a=null;null!=this._tag&&d(this._tag,t)?V.hasOwnProperty(r)||(a=x.createMarkupForCustomAttribute(r,i)):a=x.createMarkupForProperty(r,i),a&&(n+=" "+a)}}return e.renderToStaticMarkup?n:(this._hostParent||(n+=" "+x.createMarkupForRoot()),n+=" "+x.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,n){var r="",i=t.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&(r=i.__html);else{var o=B[typeof t.children]?t.children:null,a=null!=o?null:t.children;if(null!=o)r=I(o);else if(null!=a){var s=this.mountChildren(a,e,n);r=s.join("")}}return q[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(e,t,n,r){var i=t.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&b.queueHTML(r,i.__html);else{var o=B[typeof t.children]?t.children:null,a=null!=o?null:t.children;if(null!=o)b.queueText(r,o);else if(null!=a)for(var s=this.mountChildren(a,e,n),c=0;c<s.length;c++)b.queueChild(r,s[c])}},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,n,r){var o=t.props,a=this._currentElement.props;switch(this._tag){case"input":o=C.getHostProps(this,o),a=C.getHostProps(this,a);break;case"option":o=A.getHostProps(this,o),a=A.getHostProps(this,a);break;case"select":o=L.getHostProps(this,o),a=L.getHostProps(this,a);break;case"textarea":o=P.getHostProps(this,o),a=P.getHostProps(this,a)}switch(i(this,a),this._updateDOMProperties(o,a,e),this._updateDOMChildren(o,a,e,r),this._tag){case"input":C.updateWrapper(this);break;case"textarea":P.updateWrapper(this);break;case"select":e.getReactMountReady().enqueue(h,this)}},_updateDOMProperties:function(e,t,n){var r,i,a;for(r in e)if(!t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&null!=e[r])if(r===z){var s=this._previousStyleCopy;for(i in s)s.hasOwnProperty(i)&&(a=a||{},a[i]="");this._previousStyleCopy=null}else j.hasOwnProperty(r)?e[r]&&N(this,r):d(this._tag,e)?V.hasOwnProperty(r)||x.deleteValueForAttribute(U(this),r):(w.properties[r]||w.isCustomAttribute(r))&&x.deleteValueForProperty(U(this),r);for(r in t){var c=t[r],u=r===z?this._previousStyleCopy:null!=e?e[r]:void 0;if(t.hasOwnProperty(r)&&c!==u&&(null!=c||null!=u))if(r===z)if(c?c=this._previousStyleCopy=v({},c):this._previousStyleCopy=null,u){for(i in u)!u.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(a=a||{},a[i]="");for(i in c)c.hasOwnProperty(i)&&u[i]!==c[i]&&(a=a||{},a[i]=c[i])}else a=c;else if(j.hasOwnProperty(r))c?o(this,r,c,n):u&&N(this,r);else if(d(this._tag,t))V.hasOwnProperty(r)||x.setValueForAttribute(U(this),r,c);else if(w.properties[r]||w.isCustomAttribute(r)){var l=U(this);null!=c?x.setValueForProperty(l,r,c):x.deleteValueForProperty(l,r)}}a&&y.setValueForStyles(U(this),a,this)},_updateDOMChildren:function(e,t,n,r){var i=B[typeof e.children]?e.children:null,o=B[typeof t.children]?t.children:null,a=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,c=null!=i?null:e.children,u=null!=o?null:t.children,l=null!=i||null!=a,h=null!=o||null!=s;null!=c&&null==u?this.updateChildren(null,n,r):l&&!h&&this.updateTextContent(""),null!=o?i!==o&&this.updateTextContent(""+o):null!=s?a!==s&&this.updateMarkup(""+s):null!=u&&this.updateChildren(u,n,r)},getHostNode:function(){return U(this)},unmountComponent:function(e){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var t=this._wrapperState.listeners;if(t)for(var n=0;n<t.length;n++)t[n].remove();break;case"html":case"head":case"body":m("66",this._tag)}this.unmountChildren(e),R.uncacheNode(this),T.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return U(this)}},v(f.prototype,f.Mixin,O.Mixin),e.exports=f},function(e,t,n){"use strict";function r(e,t){var n={_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===i?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null};return n}var i=(n(52),9);e.exports=r},function(e,t,n){"use strict";var r=n(4),i=n(15),o=n(5),a=function(e){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};r(a.prototype,{mountComponent:function(e,t,n,r){var a=n._idCounter++;this._domID=a,this._hostParent=t,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(e.useCreateElement){var c=n._ownerDocument,u=c.createComment(s);return o.precacheNode(this,u),i(u)}return e.renderToStaticMarkup?"":"<!--"+s+"-->"},receiveComponent:function(){},getHostNode:function(){return o.getNodeFromInstance(this)},unmountComponent:function(){o.uncacheNode(this)}}),e.exports=a},function(e,t){"use strict";var n={useCreateElement:!0,useFiber:!1};e.exports=n},function(e,t,n){"use strict";var r=n(37),i=n(5),o={dangerouslyProcessChildrenUpdates:function(e,t){var n=i.getNodeFromInstance(e);r.processUpdates(n,t)}};e.exports=o},function(e,t,n){"use strict";function r(){this._rootNodeID&&h.updateWrapper(this)}function i(e){var t=this._currentElement.props,n=c.executeOnChange(t,e);l.asap(r,this);var i=t.name;if("radio"===t.type&&null!=i){for(var a=u.getNodeFromInstance(this),s=a;s.parentNode;)s=s.parentNode;for(var h=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),p=0;p<h.length;p++){var d=h[p];if(d!==a&&d.form===a.form){var f=u.getInstanceFromNode(d);f?void 0:o("90"),l.asap(r,f)}}}return n}var o=n(3),a=n(4),s=n(67),c=n(42),u=n(5),l=n(9),h=(n(1),n(2),{getHostProps:function(e,t){var n=c.getValue(t),r=c.getChecked(t),i=a({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange});return i},mountWrapper:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,listeners:null,onChange:i.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&s.setValueForProperty(u.getNodeFromInstance(e),"checked",n||!1);var r=u.getNodeFromInstance(e),i=c.getValue(t);if(null!=i){var o=""+i;o!==r.value&&(r.value=o)}else null==t.value&&null!=t.defaultValue&&(r.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(r.defaultChecked=!!t.defaultChecked)},postMountWrapper:function(e){var t=e._currentElement.props,n=u.getNodeFromInstance(e);switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}});e.exports=h},function(e,t,n){"use strict";function r(e){var t="";return o.Children.forEach(e,function(e){null!=e&&("string"==typeof e||"number"==typeof e?t+=e:c||(c=!0))}),t}var i=n(4),o=n(18),a=n(5),s=n(69),c=(n(2),!1),u={mountWrapper:function(e,t,n){var i=null;if(null!=n){var o=n;"optgroup"===o._tag&&(o=o._hostParent),null!=o&&"select"===o._tag&&(i=s.getSelectValueContext(o))}var a=null;if(null!=i){var c;if(c=null!=t.value?t.value+"":r(t.children),a=!1,Array.isArray(i)){for(var u=0;u<i.length;u++)if(""+i[u]===c){a=!0;break}}else a=""+i===c}e._wrapperState={selected:a}},postMountWrapper:function(e){var t=e._currentElement.props;if(null!=t.value){var n=a.getNodeFromInstance(e);n.setAttribute("value",t.value)}},getHostProps:function(e,t){var n=i({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(n.selected=e._wrapperState.selected);var o=r(t.children);return o&&(n.children=o),n}};e.exports=u},function(e,t,n){"use strict";function r(e,t,n,r){return e===n&&t===r}function i(e){var t=document.selection,n=t.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(e),i.setEndPoint("EndToStart",n);var o=i.text.length,a=o+r;return{start:o,end:a}}function o(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,i=t.anchorOffset,o=t.focusNode,a=t.focusOffset,s=t.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(e){return null}var c=r(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),u=c?0:s.toString().length,l=s.cloneRange();l.selectNodeContents(e),l.setEnd(s.startContainer,s.startOffset);var h=r(l.startContainer,l.startOffset,l.endContainer,l.endOffset),p=h?0:l.toString().length,d=p+u,f=document.createRange();f.setStart(n,i),f.setEnd(o,a);var m=f.collapsed;return{start:m?d:p,end:m?p:d}}function a(e,t){var n,r,i=document.selection.createRange().duplicate();void 0===t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),i.moveToElementText(e),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function s(e,t){if(window.getSelection){var n=window.getSelection(),r=e[l()].length,i=Math.min(t.start,r),o=void 0===t.end?i:Math.min(t.end,r);if(!n.extend&&i>o){var a=o;o=i,i=a}var s=u(e,i),c=u(e,o);if(s&&c){var h=document.createRange();h.setStart(s.node,s.offset),n.removeAllRanges(),i>o?(n.addRange(h),n.extend(c.node,c.offset)):(h.setEnd(c.node,c.offset),n.addRange(h))}}}var c=n(6),u=n(184),l=n(80),h=c.canUseDOM&&"selection"in document&&!("getSelection"in window),p={getOffsets:h?i:o,setOffsets:h?a:s};e.exports=p},function(e,t,n){"use strict";var r=n(3),i=n(4),o=n(37),a=n(15),s=n(5),c=n(32),u=(n(1),n(52),function(e){this._currentElement=e,this._stringText=""+e,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});i(u.prototype,{mountComponent:function(e,t,n,r){var i=n._idCounter++,o=" react-text: "+i+" ",u=" /react-text ";if(this._domID=i,this._hostParent=t,e.useCreateElement){var l=n._ownerDocument,h=l.createComment(o),p=l.createComment(u),d=a(l.createDocumentFragment());return a.queueChild(d,a(h)),this._stringText&&a.queueChild(d,a(l.createTextNode(this._stringText))),a.queueChild(d,a(p)),s.precacheNode(this,h),this._closingComment=p,d}var f=c(this._stringText);return e.renderToStaticMarkup?f:"<!--"+o+"-->"+f+"<!--"+u+"-->"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var r=this.getHostNode();o.replaceDelimitedText(r[0],r[1],n)}}},getHostNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=s.getNodeFromInstance(this),n=t.nextSibling;;){if(null==n?r("67",this._domID):void 0,8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return e=[this._hostNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),e.exports=u},function(e,t,n){"use strict";function r(){this._rootNodeID&&l.updateWrapper(this)}function i(e){var t=this._currentElement.props,n=s.executeOnChange(t,e);return u.asap(r,this),n}var o=n(3),a=n(4),s=n(42),c=n(5),u=n(9),l=(n(1),n(2),{getHostProps:function(e,t){null!=t.dangerouslySetInnerHTML?o("91"):void 0;var n=a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue,onChange:e._wrapperState.onChange});return n},mountWrapper:function(e,t){var n=s.getValue(t),r=n;if(null==n){var a=t.defaultValue,c=t.children;null!=c&&(null!=a?o("92"):void 0,Array.isArray(c)&&(c.length<=1?void 0:o("93"),c=c[0]),a=""+c),null==a&&(a=""),r=a}e._wrapperState={initialValue:""+r,listeners:null,onChange:i.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=c.getNodeFromInstance(e),r=s.getValue(t);if(null!=r){var i=""+r;i!==n.value&&(n.value=i),null==t.defaultValue&&(n.defaultValue=i)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=c.getNodeFromInstance(e);t.value=t.textContent}});e.exports=l},function(e,t,n){"use strict";function r(e,t){"_hostNode"in e?void 0:c("33"),"_hostNode"in t?void 0:c("33");for(var n=0,r=e;r;r=r._hostParent)n++;for(var i=0,o=t;o;o=o._hostParent)i++;for(;n-i>0;)e=e._hostParent,n--;for(;i-n>0;)t=t._hostParent,i--;for(var a=n;a--;){if(e===t)return e;e=e._hostParent,t=t._hostParent}return null}function i(e,t){"_hostNode"in e?void 0:c("35"),"_hostNode"in t?void 0:c("35");for(;t;){if(t===e)return!0;t=t._hostParent}return!1}function o(e){return"_hostNode"in e?void 0:c("36"),e._hostParent}function a(e,t,n){for(var r=[];e;)r.push(e),e=e._hostParent;var i;for(i=r.length;i-- >0;)t(r[i],"captured",n);for(i=0;i<r.length;i++)t(r[i],"bubbled",n)}function s(e,t,n,i,o){for(var a=e&&t?r(e,t):null,s=[];e&&e!==a;)s.push(e),e=e._hostParent;for(var c=[];t&&t!==a;)c.push(t),t=t._hostParent;var u;for(u=0;u<s.length;u++)n(s[u],"bubbled",i);for(u=c.length;u-- >0;)n(c[u],"captured",o)}var c=n(3);n(1);e.exports={isAncestor:i,getLowestCommonAncestor:r,getParentInstance:o,traverseTwoPhase:a,traverseEnterLeave:s}},function(e,t,n){"use strict";function r(){this.reinitializeTransaction()}var i=n(4),o=n(9),a=n(31),s=n(7),c={initialize:s,close:function(){p.isBatchingUpdates=!1}},u={initialize:s,close:o.flushBatchedUpdates.bind(o)},l=[u,c];i(r.prototype,a,{getTransactionWrappers:function(){return l}});var h=new r,p={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,i,o){var a=p.isBatchingUpdates;return p.isBatchingUpdates=!0,a?e(t,n,r,i,o):h.perform(e,null,t,n,r,i,o)}};e.exports=p},function(e,t,n){"use strict";function r(){T||(T=!0,y.EventEmitter.injectReactEventListener(g),y.EventPluginHub.injectEventPluginOrder(s),y.EventPluginUtils.injectComponentTree(p),y.EventPluginUtils.injectTreeTraversal(f),y.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:x,EnterLeaveEventPlugin:c,ChangeEventPlugin:a,SelectEventPlugin:w,BeforeInputEventPlugin:o}),y.HostComponent.injectGenericComponentClass(h),y.HostComponent.injectTextComponentClass(m),y.DOMProperty.injectDOMPropertyConfig(i),y.DOMProperty.injectDOMPropertyConfig(u),y.DOMProperty.injectDOMPropertyConfig(_),y.EmptyComponent.injectEmptyComponentFactory(function(e){return new d(e)}),y.Updates.injectReconcileTransaction(b),y.Updates.injectBatchingStrategy(v),y.Component.injectEnvironment(l))}var i=n(124),o=n(126),a=n(128),s=n(130),c=n(131),u=n(133),l=n(135),h=n(138),p=n(5),d=n(140),f=n(148),m=n(146),v=n(149),g=n(153),y=n(154),b=n(159),_=n(164),w=n(165),x=n(166),T=!1;e.exports={inject:r}},86,function(e,t,n){"use strict";function r(e){i.enqueueEvents(e),i.processEventQueue(!1)}var i=n(23),o={handleTopLevel:function(e,t,n,o){var a=i.extractEvents(e,t,n,o);r(a)}};e.exports=o},function(e,t,n){"use strict";function r(e){for(;e._hostParent;)e=e._hostParent;var t=h.getNodeFromInstance(e),n=t.parentNode;
return h.getClosestInstanceFromNode(n)}function i(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function o(e){var t=d(e.nativeEvent),n=h.getClosestInstanceFromNode(t),i=n;do e.ancestors.push(i),i=i&&r(i);while(i);for(var o=0;o<e.ancestors.length;o++)n=e.ancestors[o],m._handleTopLevel(e.topLevelType,n,e.nativeEvent,d(e.nativeEvent))}function a(e){var t=f(window);e(t)}var s=n(4),c=n(58),u=n(6),l=n(13),h=n(5),p=n(9),d=n(49),f=n(116);s(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),l.addPoolingTo(i,l.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){return n?c.listen(n,t,m.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){return n?c.capture(n,t,m.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=a.bind(null,e);c.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(m._enabled){var n=i.getPooled(e,t);try{p.batchedUpdates(o,n)}finally{i.release(n)}}}};e.exports=m},function(e,t,n){"use strict";var r=n(16),i=n(23),o=n(40),a=n(43),s=n(70),c=n(29),u=n(72),l=n(9),h={Component:a.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:i.injection,EventPluginUtils:o.injection,EventEmitter:c.injection,HostComponent:u.injection,Updates:l.injection};e.exports=h},function(e,t,n){"use strict";var r=n(177),i=/\/?>/,o=/^<\!\-\-/,a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return o.test(e)?e:e.replace(i," "+a.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(a.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var i=r(e);return i===n}};e.exports=a},function(e,t,n){"use strict";function r(e,t,n){return{type:"INSERT_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:n,afterNode:t}}function i(e,t,n){return{type:"MOVE_EXISTING",content:null,fromIndex:e._mountIndex,fromNode:p.getHostNode(e),toIndex:n,afterNode:t}}function o(e,t){return{type:"REMOVE_NODE",content:null,fromIndex:e._mountIndex,fromNode:t,toIndex:null,afterNode:null}}function a(e){return{type:"SET_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(e){return{type:"TEXT_CONTENT",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function c(e,t){return t&&(e=e||[],e.push(t)),e}function u(e,t){h.processChildrenUpdates(e,t)}var l=n(3),h=n(43),p=(n(25),n(8),n(11),n(17)),d=n(134),f=(n(7),n(180)),m=(n(1),{Mixin:{_reconcilerInstantiateChildren:function(e,t,n){return d.instantiateChildren(e,t,n)},_reconcilerUpdateChildren:function(e,t,n,r,i,o){var a,s=0;return a=f(t,s),d.updateChildren(e,a,n,r,i,this,this._hostContainerInfo,o,s),a},mountChildren:function(e,t,n){var r=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=r;var i=[],o=0;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],c=0,u=p.mountComponent(s,t,this,this._hostContainerInfo,n,c);s._mountIndex=o++,i.push(u)}return i},updateTextContent:function(e){var t=this._renderedChildren;d.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&l("118");var r=[s(e)];u(this,r)},updateMarkup:function(e){var t=this._renderedChildren;d.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&l("118");var r=[a(e)];u(this,r)},updateChildren:function(e,t,n){this._updateChildren(e,t,n)},_updateChildren:function(e,t,n){var r=this._renderedChildren,i={},o=[],a=this._reconcilerUpdateChildren(r,e,o,i,t,n);if(a||r){var s,l=null,h=0,d=0,f=0,m=null;for(s in a)if(a.hasOwnProperty(s)){var v=r&&r[s],g=a[s];v===g?(l=c(l,this.moveChild(v,m,h,d)),d=Math.max(v._mountIndex,d),v._mountIndex=h):(v&&(d=Math.max(v._mountIndex,d)),l=c(l,this._mountChildAtIndex(g,o[f],m,h,t,n)),f++),h++,m=p.getHostNode(g)}for(s in i)i.hasOwnProperty(s)&&(l=c(l,this._unmountChild(r[s],i[s])));l&&u(this,l),this._renderedChildren=a}},unmountChildren:function(e){var t=this._renderedChildren;d.unmountChildren(t,e),this._renderedChildren=null},moveChild:function(e,t,n,r){if(e._mountIndex<r)return i(e,t,n)},createChild:function(e,t,n){return r(n,t,e._mountIndex)},removeChild:function(e,t){return o(e,t)},_mountChildAtIndex:function(e,t,n,r,i,o){return e._mountIndex=r,this.createChild(e,n,t)},_unmountChild:function(e,t){var n=this.removeChild(e,t);return e._mountIndex=null,n}}});e.exports=m},function(e,t,n){"use strict";function r(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)}var i=n(3),o=(n(1),{addComponentAsRefTo:function(e,t,n){r(n)?void 0:i("119"),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r(n)?void 0:i("120");var o=n.getPublicInstance();o&&o.refs[t]===e.getPublicInstance()&&n.detachRef(t)}});e.exports=o},function(e,t){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=o.getPooled(null),this.useCreateElement=e}var i=n(4),o=n(66),a=n(13),s=n(29),c=n(73),u=(n(8),n(31)),l=n(45),h={initialize:c.getSelectionInformation,close:c.restoreSelection},p={initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},d={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},f=[h,p,d],m={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return l},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(e){this.reactMountReady.rollback(e)},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};i(r.prototype,u,m),a.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e?e(t.getPublicInstance()):o.addComponentAsRefTo(t,e,n)}function i(e,t,n){"function"==typeof e?e(null):o.removeComponentAsRefFrom(t,e,n)}var o=n(157),a={};a.attachRefs=function(e,t){if(null!==t&&"object"==typeof t){var n=t.ref;null!=n&&r(n,e,t._owner)}},a.shouldUpdateRefs=function(e,t){var n=null,r=null;null!==e&&"object"==typeof e&&(n=e.ref,r=e._owner);var i=null,o=null;return null!==t&&"object"==typeof t&&(i=t.ref,o=t._owner),n!==i||"string"==typeof i&&o!==r},a.detachRefs=function(e,t){if(null!==t&&"object"==typeof t){var n=t.ref;null!=n&&i(n,e,t._owner)}},e.exports=a},function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1,this.updateQueue=new s(this)}var i=n(4),o=n(13),a=n(31),s=(n(8),n(162)),c=[],u={enqueue:function(){}},l={getTransactionWrappers:function(){return c},getReactMountReady:function(){return u},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};i(r.prototype,a,l),o.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){}var o=n(45),a=(n(2),function(){function e(t){r(this,e),this.transaction=t}return e.prototype.isMounted=function(e){return!1},e.prototype.enqueueCallback=function(e,t,n){this.transaction.isInTransaction()&&o.enqueueCallback(e,t,n)},e.prototype.enqueueForceUpdate=function(e){this.transaction.isInTransaction()?o.enqueueForceUpdate(e):i(e,"forceUpdate")},e.prototype.enqueueReplaceState=function(e,t){this.transaction.isInTransaction()?o.enqueueReplaceState(e,t):i(e,"replaceState")},e.prototype.enqueueSetState=function(e,t){this.transaction.isInTransaction()?o.enqueueSetState(e,t):i(e,"setState")},e}());e.exports=a},function(e,t){"use strict";e.exports="15.4.1"},function(e,t){"use strict";var n={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},r={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},i={Properties:{},DOMAttributeNamespaces:{xlinkActuate:n.xlink,xlinkArcrole:n.xlink,xlinkHref:n.xlink,xlinkRole:n.xlink,xlinkShow:n.xlink,xlinkTitle:n.xlink,xlinkType:n.xlink,xmlBase:n.xml,xmlLang:n.xml,xmlSpace:n.xml},DOMAttributeNames:{}};Object.keys(r).forEach(function(e){i.Properties[e]=0,r[e]&&(i.DOMAttributeNames[e]=r[e])}),e.exports=i},function(e,t,n){"use strict";function r(e){if("selectionStart"in e&&c.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(e,t){if(y||null==m||m!==l())return null;var n=r(m);if(!g||!p(g,n)){g=n;var i=u.getPooled(f.select,v,e,t);return i.type="select",i.target=m,o.accumulateTwoPhaseDispatches(i),i}return null}var o=n(24),a=n(6),s=n(5),c=n(73),u=n(10),l=n(60),h=n(82),p=n(36),d=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,f={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},m=null,v=null,g=null,y=!1,b=!1,_={eventTypes:f,extractEvents:function(e,t,n,r){if(!b)return null;var o=t?s.getNodeFromInstance(t):window;switch(e){case"topFocus":(h(o)||"true"===o.contentEditable)&&(m=o,v=t,g=null);break;case"topBlur":m=null,v=null,g=null;break;case"topMouseDown":y=!0;break;case"topContextMenu":case"topMouseUp":return y=!1,i(n,r);case"topSelectionChange":if(d)break;case"topKeyDown":case"topKeyUp":return i(n,r)}return null},didPutListener:function(e,t,n){"onSelect"===t&&(b=!0)}};e.exports=_},function(e,t,n){"use strict";function r(e){return"."+e._rootNodeID}function i(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}var o=n(3),a=n(58),s=n(24),c=n(5),u=n(167),l=n(168),h=n(10),p=n(171),d=n(173),f=n(30),m=n(170),v=n(174),g=n(175),y=n(26),b=n(176),_=n(7),w=n(47),x=(n(1),{}),T={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t,r="top"+t,i={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r]};x[e]=i,T[r]=i});var E={},M={eventTypes:x,extractEvents:function(e,t,n,r){var i=T[e];if(!i)return null;var a;switch(e){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":a=h;break;case"topKeyPress":if(0===w(n))return null;case"topKeyDown":case"topKeyUp":a=d;break;case"topBlur":case"topFocus":a=p;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":a=f;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":a=m;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":a=v;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":a=u;break;case"topTransitionEnd":a=g;break;case"topScroll":a=y;break;case"topWheel":a=b;break;case"topCopy":case"topCut":case"topPaste":a=l}a?void 0:o("86",e);var c=a.getPooled(i,t,n,r);return s.accumulateTwoPhaseDispatches(c),c},didPutListener:function(e,t,n){if("onClick"===t&&!i(e._tag)){var o=r(e),s=c.getNodeFromInstance(e);E[o]||(E[o]=a.listen(s,"click",_))}},willDeleteListener:function(e,t){if("onClick"===t&&!i(e._tag)){var n=r(e);E[n].remove(),delete E[n]}}};e.exports=M},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(10),o={animationName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(10),o={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(10),o={data:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(30),o={dataTransfer:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(26),o={relatedTarget:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(10),o={data:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(26),o=n(47),a=n(181),s=n(48),c={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?o(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?o(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};i.augmentClass(r,c),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(26),o=n(48),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};i.augmentClass(r,a),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(10),o={propertyName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(30),o={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(r,o),e.exports=r},function(e,t){"use strict";function n(e){for(var t=1,n=0,i=0,o=e.length,a=o&-4;i<a;){for(var s=Math.min(i+4096,a);i<s;i+=4)n+=(t+=e.charCodeAt(i))+(t+=e.charCodeAt(i+1))+(t+=e.charCodeAt(i+2))+(t+=e.charCodeAt(i+3));t%=r,n%=r}for(;i<o;i++)n+=t+=e.charCodeAt(i);return t%=r,n%=r,t|n<<16}var r=65521;e.exports=n},function(e,t,n){"use strict";function r(e,t,n){var r=null==t||"boolean"==typeof t||""===t;if(r)return"";var i=isNaN(t);if(i||0===t||o.hasOwnProperty(e)&&o[e])return""+t;if("string"==typeof t){t=t.trim()}return t+"px"}var i=n(65),o=(n(2),i.isUnitlessNumber);e.exports=r},function(e,t,n){"use strict";function r(e){if(null==e)return null;if(1===e.nodeType)return e;var t=a.get(e);return t?(t=s(t),t?o.getNodeFromInstance(t):null):void("function"==typeof e.render?i("44"):i("45",Object.keys(e)))}var i=n(3),o=(n(11),n(5)),a=n(25),s=n(79);n(1),n(2);e.exports=r},function(e,t,n){(function(t){"use strict";function r(e,t,n,r){if(e&&"object"==typeof e){var i=e,o=void 0===i[n];o&&null!=t&&(i[n]=t)}}function i(e,t){if(null==e)return e;var n={};return o(e,r,n),n}var o=(n(41),n(84));n(2);e.exports=i}).call(t,n(62))},function(e,t,n){"use strict";function r(e){if(e.key){var t=o[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=i(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?a[e.keyCode]||"Unidentified":""}var i=n(47),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=r},89,function(e,t){"use strict";function n(){return r++}var r=1;e.exports=n},function(e,t){"use strict";function n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function i(e,t){for(var i=n(e),o=0,a=0;i;){if(3===i.nodeType){if(a=o+i.textContent.length,o<=t&&a>=t)return{node:i,offset:t-o};o=a}i=n(r(i))}}e.exports=i},function(e,t,n){"use strict";function r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function i(e){if(s[e])return s[e];if(!a[e])return e;var t=a[e];for(var n in t)if(t.hasOwnProperty(n)&&n in c)return s[e]=t[n];return""}var o=n(6),a={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},s={},c={};o.canUseDOM&&(c=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),e.exports=i},function(e,t,n){"use strict";function r(e){return'"'+i(e)+'"'}var i=n(32);e.exports=r},function(e,t,n){"use strict";var r=n(74);e.exports=r.renderSubtreeIntoContainer},41,[201,20],function(e,t,n){"use strict";function r(e){return(""+e).replace(_,"$&/")}function i(e,t){this.func=e,this.context=t,this.count=0}function o(e,t,n){var r=e.func,i=e.context;r.call(i,t,e.count++)}function a(e,t,n){if(null==e)return e;var r=i.getPooled(t,n);g(e,o,r),i.release(r)}function s(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function c(e,t,n){var i=e.result,o=e.keyPrefix,a=e.func,s=e.context,c=a.call(s,t,e.count++);Array.isArray(c)?u(c,i,n,v.thatReturnsArgument):null!=c&&(m.isValidElement(c)&&(c=m.cloneAndReplaceKey(c,o+(!c.key||t&&t.key===c.key?"":r(c.key)+"/")+n)),i.push(c))}function u(e,t,n,i,o){var a="";null!=n&&(a=r(n)+"/");var u=s.getPooled(t,a,i,o);g(e,c,u),s.release(u)}function l(e,t,n){if(null==e)return e;var r=[];return u(e,r,null,t,n),r}function h(e,t,n){return null}function p(e,t){return g(e,h,null)}function d(e){var t=[];return u(e,t,null,v.thatReturnsArgument),t}var f=n(189),m=n(19),v=n(7),g=n(198),y=f.twoArgumentPooler,b=f.fourArgumentPooler,_=/\/+/g;i.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},f.addPoolingTo(i,y),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},f.addPoolingTo(s,b);var w={forEach:a,map:l,mapIntoWithKeyPrefixInternal:u,count:p,toArray:d};e.exports=w},function(e,t,n){"use strict";function r(e){return e}function i(e,t){var n=_.hasOwnProperty(t)?_[t]:null;x.hasOwnProperty(t)&&("OVERRIDE_BASE"!==n?p("73",t):void 0),e&&("DEFINE_MANY"!==n&&"DEFINE_MANY_MERGED"!==n?p("74",t):void 0)}function o(e,t){if(t){"function"==typeof t?p("75"):void 0,m.isValidElement(t)?p("76"):void 0;var n=e.prototype,r=n.__reactAutoBindPairs;t.hasOwnProperty(y)&&w.mixins(e,t.mixins);for(var o in t)if(t.hasOwnProperty(o)&&o!==y){var a=t[o],s=n.hasOwnProperty(o);if(i(s,o),w.hasOwnProperty(o))w[o](e,a);else{var l=_.hasOwnProperty(o),h="function"==typeof a,d=h&&!l&&!s&&t.autobind!==!1;if(d)r.push(o,a),n[o]=a;else if(s){var f=_[o];!l||"DEFINE_MANY_MERGED"!==f&&"DEFINE_MANY"!==f?p("77",f,o):void 0,"DEFINE_MANY_MERGED"===f?n[o]=c(n[o],a):"DEFINE_MANY"===f&&(n[o]=u(n[o],a))}else n[o]=a}}}else;}function a(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var i=n in w;i?p("78",n):void 0;var o=n in e;o?p("79",n):void 0,e[n]=r}}}function s(e,t){e&&t&&"object"==typeof e&&"object"==typeof t?void 0:p("80");for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]?p("81",n):void 0,e[n]=t[n]);return e}function c(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return s(i,n),s(i,r),i}}function u(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function l(e,t){var n=t.bind(e);return n}function h(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e[r]=l(e,i)}}var p=n(20),d=n(4),f=n(53),m=n(19),v=(n(87),n(54)),g=n(22),y=(n(1),n(2),"mixins"),b=[],_={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},w={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)o(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=d({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=d({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=c(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=d({},e.propTypes,t)},statics:function(e,t){a(e,t)},autobind:function(){}},x={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},T=function(){};d(T.prototype,f.prototype,x);var E={createClass:function(e){var t=r(function(e,n,r){this.__reactAutoBindPairs.length&&h(this),this.props=e,this.context=n,this.refs=g,this.updater=r||v,this.state=null;var i=this.getInitialState?this.getInitialState():null;"object"!=typeof i||Array.isArray(i)?p("82",t.displayName||"ReactCompositeComponent"):void 0,this.state=i});t.prototype=new T,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],b.forEach(o.bind(null,t)),o(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.prototype.render?void 0:p("83");for(var n in _)t.prototype[n]||(t.prototype[n]=null);return t},injection:{injectMixin:function(e){b.push(e)}}};e.exports=E},function(e,t,n){"use strict";var r=n(19),i=r.createFactory,o={a:i("a"),abbr:i("abbr"),address:i("address"),area:i("area"),article:i("article"),aside:i("aside"),audio:i("audio"),b:i("b"),base:i("base"),bdi:i("bdi"),bdo:i("bdo"),big:i("big"),blockquote:i("blockquote"),body:i("body"),br:i("br"),button:i("button"),canvas:i("canvas"),caption:i("caption"),cite:i("cite"),code:i("code"),col:i("col"),colgroup:i("colgroup"),data:i("data"),datalist:i("datalist"),dd:i("dd"),del:i("del"),details:i("details"),dfn:i("dfn"),dialog:i("dialog"),div:i("div"),dl:i("dl"),dt:i("dt"),em:i("em"),embed:i("embed"),fieldset:i("fieldset"),figcaption:i("figcaption"),figure:i("figure"),footer:i("footer"),form:i("form"),h1:i("h1"),h2:i("h2"),h3:i("h3"),h4:i("h4"),h5:i("h5"),h6:i("h6"),head:i("head"),header:i("header"),hgroup:i("hgroup"),hr:i("hr"),html:i("html"),i:i("i"),iframe:i("iframe"),img:i("img"),input:i("input"),ins:i("ins"),kbd:i("kbd"),keygen:i("keygen"),label:i("label"),legend:i("legend"),li:i("li"),link:i("link"),main:i("main"),map:i("map"),mark:i("mark"),menu:i("menu"),menuitem:i("menuitem"),meta:i("meta"),meter:i("meter"),nav:i("nav"),noscript:i("noscript"),object:i("object"),ol:i("ol"),optgroup:i("optgroup"),option:i("option"),output:i("output"),p:i("p"),param:i("param"),picture:i("picture"),pre:i("pre"),progress:i("progress"),q:i("q"),rp:i("rp"),rt:i("rt"),ruby:i("ruby"),s:i("s"),samp:i("samp"),script:i("script"),section:i("section"),select:i("select"),small:i("small"),source:i("source"),span:i("span"),strong:i("strong"),style:i("style"),sub:i("sub"),summary:i("summary"),sup:i("sup"),table:i("table"),tbody:i("tbody"),td:i("td"),textarea:i("textarea"),tfoot:i("tfoot"),th:i("th"),thead:i("thead"),time:i("time"),title:i("title"),tr:i("tr"),track:i("track"),u:i("u"),ul:i("ul"),var:i("var"),video:i("video"),wbr:i("wbr"),circle:i("circle"),clipPath:i("clipPath"),defs:i("defs"),ellipse:i("ellipse"),g:i("g"),image:i("image"),line:i("line"),linearGradient:i("linearGradient"),mask:i("mask"),path:i("path"),pattern:i("pattern"),polygon:i("polygon"),polyline:i("polyline"),radialGradient:i("radialGradient"),rect:i("rect"),stop:i("stop"),svg:i("svg"),text:i("text"),tspan:i("tspan")};e.exports=o},function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function i(e){this.message=e,this.stack=""}function o(e){function t(t,n,r,o,a,s,c){o=o||S,s=s||r;if(null==n[r]){var u=x[a];return t?new i(null===n[r]?"The "+u+" `"+s+"` is marked as required "+("in `"+o+"`, but its value is `null`."):"The "+u+" `"+s+"` is marked as required in "+("`"+o+"`, but its value is `undefined`.")):null}return e(n,r,o,a,s)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function a(e){function t(t,n,r,o,a,s){var c=t[n],u=y(c);if(u!==e){var l=x[o],h=b(c);return new i("Invalid "+l+" `"+a+"` of type "+("`"+h+"` supplied to `"+r+"`, expected ")+("`"+e+"`."))}return null}return o(t)}function s(){return o(E.thatReturns(null))}function c(e){function t(t,n,r,o,a){if("function"!=typeof e)return new i("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){var c=x[o],u=y(s);return new i("Invalid "+c+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an array."))}for(var l=0;l<s.length;l++){var h=e(s,l,r,o,a+"["+l+"]",T);if(h instanceof Error)return h}return null}return o(t)}function u(){function e(e,t,n,r,o){var a=e[t];if(!w.isValidElement(a)){var s=x[r],c=y(a);return new i("Invalid "+s+" `"+o+"` of type "+("`"+c+"` supplied to `"+n+"`, expected a single ReactElement."))}return null}return o(e)}function l(e){function t(t,n,r,o,a){if(!(t[n]instanceof e)){var s=x[o],c=e.name||S,u=_(t[n]);return new i("Invalid "+s+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected ")+("instance of `"+c+"`."))}return null}return o(t)}function h(e){function t(t,n,o,a,s){
for(var c=t[n],u=0;u<e.length;u++)if(r(c,e[u]))return null;var l=x[a],h=JSON.stringify(e);return new i("Invalid "+l+" `"+s+"` of value `"+c+"` "+("supplied to `"+o+"`, expected one of "+h+"."))}return Array.isArray(e)?o(t):E.thatReturnsNull}function p(e){function t(t,n,r,o,a){if("function"!=typeof e)return new i("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],c=y(s);if("object"!==c){var u=x[o];return new i("Invalid "+u+" `"+a+"` of type "+("`"+c+"` supplied to `"+r+"`, expected an object."))}for(var l in s)if(s.hasOwnProperty(l)){var h=e(s,l,r,o,a+"."+l,T);if(h instanceof Error)return h}return null}return o(t)}function d(e){function t(t,n,r,o,a){for(var s=0;s<e.length;s++){var c=e[s];if(null==c(t,n,r,o,a,T))return null}var u=x[o];return new i("Invalid "+u+" `"+a+"` supplied to "+("`"+r+"`."))}return Array.isArray(e)?o(t):E.thatReturnsNull}function f(){function e(e,t,n,r,o){if(!v(e[t])){var a=x[r];return new i("Invalid "+a+" `"+o+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return o(e)}function m(e){function t(t,n,r,o,a){var s=t[n],c=y(s);if("object"!==c){var u=x[o];return new i("Invalid "+u+" `"+a+"` of type `"+c+"` "+("supplied to `"+r+"`, expected `object`."))}for(var l in e){var h=e[l];if(h){var p=h(s,l,r,o,a+"."+l,T);if(p)return p}}return null}return o(t)}function v(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(v);if(null===e||w.isValidElement(e))return!0;var t=M(e);if(!t)return!1;var n,r=t.call(e);if(t!==e.entries){for(;!(n=r.next()).done;)if(!v(n.value))return!1}else for(;!(n=r.next()).done;){var i=n.value;if(i&&!v(i[1]))return!1}return!0;default:return!1}}function g(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function y(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":g(t,e)?"symbol":t}function b(e){var t=y(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function _(e){return e.constructor&&e.constructor.name?e.constructor.name:S}var w=n(19),x=n(87),T=n(194),E=n(7),M=n(89),S=(n(2),"<<anonymous>>"),R={array:a("array"),bool:a("boolean"),func:a("function"),number:a("number"),object:a("object"),string:a("string"),symbol:a("symbol"),any:s(),arrayOf:c,element:u(),instanceOf:l,node:f(),objectOf:p,oneOf:h,oneOfType:d,shape:m};i.prototype=Error.prototype,e.exports=R},158,function(e,t,n){"use strict";function r(e,t,n){this.props=e,this.context=t,this.refs=c,this.updater=n||s}function i(){}var o=n(4),a=n(53),s=n(54),c=n(22);i.prototype=a.prototype,r.prototype=new i,r.prototype.constructor=r,o(r.prototype,a.prototype),r.prototype.isPureReactComponent=!0,e.exports=r},163,function(e,t,n){"use strict";function r(e){return o.isValidElement(e)?void 0:i("143"),e}var i=n(20),o=n(19);n(1);e.exports=r},function(e,t,n){"use strict";function r(e,t){return e&&"object"==typeof e&&null!=e.key?u.escape(e.key):t.toString(36)}function i(e,t,n,o){var p=typeof e;if("undefined"!==p&&"boolean"!==p||(e=null),null===e||"string"===p||"number"===p||"object"===p&&e.$$typeof===s)return n(o,e,""===t?l+r(e,0):t),1;var d,f,m=0,v=""===t?l:t+h;if(Array.isArray(e))for(var g=0;g<e.length;g++)d=e[g],f=v+r(d,g),m+=i(d,f,n,o);else{var y=c(e);if(y){var b,_=y.call(e);if(y!==e.entries)for(var w=0;!(b=_.next()).done;)d=b.value,f=v+r(d,w++),m+=i(d,f,n,o);else for(;!(b=_.next()).done;){var x=b.value;x&&(d=x[1],f=v+u.escape(x[0])+h+r(d,0),m+=i(d,f,n,o))}}else if("object"===p){var T="",E=String(e);a("31","[object Object]"===E?"object with keys {"+Object.keys(e).join(", ")+"}":E,T)}}return m}function o(e,t,n){return null==e?0:i(e,"",t,n)}var a=n(20),s=(n(11),n(86)),c=n(89),u=(n(1),n(188)),l=(n(2),"."),h=":";e.exports=o},function(e,t){e.exports=function(e){function t(t,n){function r(){return 2*Math.PI/60/60*I.autoRotateSpeed}function i(){return Math.pow(.95,I.zoomSpeed)}function o(e){G.theta-=e}function a(e){G.phi-=e}function s(t){I.object instanceof e.PerspectiveCamera?V/=t:I.object instanceof e.OrthographicCamera?(I.object.zoom=Math.max(I.minZoom,Math.min(I.maxZoom,I.object.zoom*t)),I.object.updateProjectionMatrix(),W=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),I.enableZoom=!1)}function c(t){I.object instanceof e.PerspectiveCamera?V*=t:I.object instanceof e.OrthographicCamera?(I.object.zoom=Math.max(I.minZoom,Math.min(I.maxZoom,I.object.zoom/t)),I.object.updateProjectionMatrix(),W=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),I.enableZoom=!1)}function u(e){X.set(e.clientX,e.clientY)}function l(e){Q.set(e.clientX,e.clientY)}function h(e){Z.set(e.clientX,e.clientY)}function p(e){q.set(e.clientX,e.clientY),Y.subVectors(q,X);var t=I.domElement===document?I.domElement.body:I.domElement;o(2*Math.PI*Y.x/t.clientWidth*I.rotateSpeed),a(2*Math.PI*Y.y/t.clientHeight*I.rotateSpeed),X.copy(q),I.update()}function d(e){$.set(e.clientX,e.clientY),ee.subVectors($,Q),ee.y>0?s(i()):ee.y<0&&c(i()),Q.copy($),I.update()}function f(e){K.set(e.clientX,e.clientY),J.subVectors(K,Z),re(J.x,J.y),Z.copy(K),I.update()}function m(e){}function v(e){e.deltaY<0?c(i()):e.deltaY>0&&s(i()),I.update()}function g(e){switch(e.keyCode){case I.keys.UP:re(0,I.keyPanSpeed),I.update();break;case I.keys.BOTTOM:re(0,-I.keyPanSpeed),I.update();break;case I.keys.LEFT:re(I.keyPanSpeed,0),I.update();break;case I.keys.RIGHT:re(-I.keyPanSpeed,0),I.update()}}function y(e){X.set(e.touches[0].pageX,e.touches[0].pageY)}function b(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);Q.set(0,r)}function _(e){Z.set(e.touches[0].pageX,e.touches[0].pageY)}function w(e){q.set(e.touches[0].pageX,e.touches[0].pageY),Y.subVectors(q,X);var t=I.domElement===document?I.domElement.body:I.domElement;o(2*Math.PI*Y.x/t.clientWidth*I.rotateSpeed),a(2*Math.PI*Y.y/t.clientHeight*I.rotateSpeed),X.copy(q),I.update()}function x(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);$.set(0,r),ee.subVectors($,Q),ee.y>0?c(i()):ee.y<0&&s(i()),Q.copy($),I.update()}function T(e){K.set(e.touches[0].pageX,e.touches[0].pageY),J.subVectors(K,Z),re(J.x,J.y),Z.copy(K),I.update()}function E(e){}function M(e){if(I.enabled!==!1){if(e.preventDefault(),e.button===I.mouseButtons.ORBIT){if(I.enableRotate===!1)return;u(e),j=F.ROTATE}else if(e.button===I.mouseButtons.ZOOM){if(I.enableZoom===!1)return;l(e),j=F.DOLLY}else if(e.button===I.mouseButtons.PAN){if(I.enablePan===!1)return;h(e),j=F.PAN}j!==F.NONE&&(document.addEventListener("mousemove",S,!1),document.addEventListener("mouseup",R,!1),I.dispatchEvent(N))}}function S(e){if(I.enabled!==!1)if(e.preventDefault(),j===F.ROTATE){if(I.enableRotate===!1)return;p(e)}else if(j===F.DOLLY){if(I.enableZoom===!1)return;d(e)}else if(j===F.PAN){if(I.enablePan===!1)return;f(e)}}function R(e){I.enabled!==!1&&(m(e),document.removeEventListener("mousemove",S,!1),document.removeEventListener("mouseup",R,!1),I.dispatchEvent(U),j=F.NONE)}function C(e){I.enabled===!1||I.enableZoom===!1||j!==F.NONE&&j!==F.ROTATE||(e.preventDefault(),e.stopPropagation(),v(e),I.dispatchEvent(N),I.dispatchEvent(U))}function A(e){I.enabled!==!1&&I.enableKeys!==!1&&I.enablePan!==!1&&g(e)}function L(e){if(I.enabled!==!1){switch(e.touches.length){case 1:if(I.enableRotate===!1)return;y(e),j=F.TOUCH_ROTATE;break;case 2:if(I.enableZoom===!1)return;b(e),j=F.TOUCH_DOLLY;break;case 3:if(I.enablePan===!1)return;_(e),j=F.TOUCH_PAN;break;default:j=F.NONE}j!==F.NONE&&I.dispatchEvent(N)}}function P(e){if(I.enabled!==!1)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(I.enableRotate===!1)return;if(j!==F.TOUCH_ROTATE)return;w(e);break;case 2:if(I.enableZoom===!1)return;if(j!==F.TOUCH_DOLLY)return;x(e);break;case 3:if(I.enablePan===!1)return;if(j!==F.TOUCH_PAN)return;T(e);break;default:j=F.NONE}}function O(e){I.enabled!==!1&&(E(e),I.dispatchEvent(U),j=F.NONE)}function k(e){e.preventDefault()}this.object=t,this.domElement=void 0!==n?n:document,this.enabled=!0,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:e.MOUSE.LEFT,ZOOM:e.MOUSE.MIDDLE,PAN:e.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return z.phi},this.getAzimuthalAngle=function(){return z.theta},this.reset=function(){I.target.copy(I.target0),I.object.position.copy(I.position0),I.object.zoom=I.zoom0,I.object.updateProjectionMatrix(),I.dispatchEvent(D),I.update(),j=F.NONE},this.update=function(){var n=new e.Vector3,i=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),a=i.clone().inverse(),s=new e.Vector3,c=new e.Quaternion;return function(){var e=I.object.position;return n.copy(e).sub(I.target),n.applyQuaternion(i),z.setFromVector3(n),I.autoRotate&&j===F.NONE&&o(r()),z.theta+=G.theta,z.phi+=G.phi,z.theta=Math.max(I.minAzimuthAngle,Math.min(I.maxAzimuthAngle,z.theta)),z.phi=Math.max(I.minPolarAngle,Math.min(I.maxPolarAngle,z.phi)),z.makeSafe(),z.radius*=V,z.radius=Math.max(I.minDistance,Math.min(I.maxDistance,z.radius)),I.target.add(H),n.setFromSpherical(z),n.applyQuaternion(a),e.copy(I.target).add(n),I.object.lookAt(I.target),I.enableDamping===!0?(G.theta*=1-I.dampingFactor,G.phi*=1-I.dampingFactor):G.set(0,0,0),V=1,H.set(0,0,0),!!(W||s.distanceToSquared(I.object.position)>B||8*(1-c.dot(I.object.quaternion))>B)&&(I.dispatchEvent(D),s.copy(I.object.position),c.copy(I.object.quaternion),W=!1,!0)}}(),this.dispose=function(){I.domElement.removeEventListener("contextmenu",k,!1),I.domElement.removeEventListener("mousedown",M,!1),I.domElement.removeEventListener("wheel",C,!1),I.domElement.removeEventListener("touchstart",L,!1),I.domElement.removeEventListener("touchend",O,!1),I.domElement.removeEventListener("touchmove",P,!1),document.removeEventListener("mousemove",S,!1),document.removeEventListener("mouseup",R,!1),window.removeEventListener("keydown",A,!1)};var I=this,D={type:"change"},N={type:"start"},U={type:"end"},F={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},j=F.NONE,B=1e-6,z=new e.Spherical,G=new e.Spherical,V=1,H=new e.Vector3,W=!1,X=new e.Vector2,q=new e.Vector2,Y=new e.Vector2,Z=new e.Vector2,K=new e.Vector2,J=new e.Vector2,Q=new e.Vector2,$=new e.Vector2,ee=new e.Vector2,te=function(){var t=new e.Vector3;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),H.add(t)}}(),ne=function(){var t=new e.Vector3;return function(e,n){t.setFromMatrixColumn(n,1),t.multiplyScalar(e),H.add(t)}}(),re=function(){var t=new e.Vector3;return function(n,r){var i=I.domElement===document?I.domElement.body:I.domElement;if(I.object instanceof e.PerspectiveCamera){var o=I.object.position;t.copy(o).sub(I.target);var a=t.length();a*=Math.tan(I.object.fov/2*Math.PI/180),te(2*n*a/i.clientHeight,I.object.matrix),ne(2*r*a/i.clientHeight,I.object.matrix)}else I.object instanceof e.OrthographicCamera?(te(n*(I.object.right-I.object.left)/I.object.zoom/i.clientWidth,I.object.matrix),ne(r*(I.object.top-I.object.bottom)/I.object.zoom/i.clientHeight,I.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),I.enablePan=!1)}}();I.domElement.addEventListener("contextmenu",k,!1),I.domElement.addEventListener("mousedown",M,!1),I.domElement.addEventListener("wheel",C,!1),I.domElement.addEventListener("touchstart",L,!1),I.domElement.addEventListener("touchend",O,!1),I.domElement.addEventListener("touchmove",P,!1),window.addEventListener("keydown",A,!1),this.update()}return t.prototype=Object.create(e.EventDispatcher.prototype),t.prototype.constructor=t,Object.defineProperties(t.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),t}},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function c(e){var t=new FileReader;return t.readAsText(e),a(t)}function u(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob?(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return c(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=o(this);return e?e:Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(h.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=l(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function d(e){var t=new i,n=(e.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(e){var n=e.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();t.append(r,i)}),t}function f(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof i?t.headers:new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var m={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];i||(i=[],this.map[e]=i),i.push(r)},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},i.prototype.getAll=function(e){return this.map[t(e)]||[]},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=[n(r)]},i.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){e.call(t,r,n,this)},this)},this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},m.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this)},u.call(h.prototype),u.call(f.prototype),f.prototype.clone=function(){return new f(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},f.error=function(){var e=new f(null,{status:0,statusText:""});return e.type="error",e};var g=[301,302,303,307,308];f.redirect=function(e,t){if(g.indexOf(t)===-1)throw new RangeError("Invalid status code");return new f(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=h,e.Response=f,e.fetch=function(e,t){return new Promise(function(n,r){function i(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var o;o=h.prototype.isPrototypeOf(e)&&!t?e:new h(e,t);var a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:d(a),url:i()},t="response"in a?a.response:a.responseText;n(new f(t,e))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials&&(a.withCredentials=!0),"responseType"in a&&m.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n,r){"use strict";var i=n(r),o=(n(1),function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)}),a=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},s=function(e,t,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,e,t,n),i}return new r(e,t,n)},c=function(e,t,n,r){var i=this;if(i.instancePool.length){var o=i.instancePool.pop();return i.call(o,e,t,n,r),o}return new i(e,t,n,r)},u=function(e,t,n,r,i){var o=this;if(o.instancePool.length){var a=o.instancePool.pop();return o.call(a,e,t,n,r,i),a}return new o(e,t,n,r,i)},l=function(e){var t=this;e instanceof t?void 0:i("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},h=10,p=o,d=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||p,n.poolSize||(n.poolSize=h),n.release=l,n},f={addPoolingTo:d,oneArgumentPooler:o,twoArgumentPooler:a,threeArgumentPooler:s,fourArgumentPooler:c,fiveArgumentPooler:u};e.exports=f}]));
//# sourceMappingURL=main.feba9624.js.map